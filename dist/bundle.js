/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e,t,n={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],u=i[l]||0,d="".concat(l," ").concat(u);i[l]=u+1;var h=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=a(f,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:p,references:1})}o.push(d)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var c=r(e,a),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},159:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},162:(e,t,n)=>{var r=n(540),a=n(888),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=a.useSyncExternalStore,s=r.useRef,c=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l(function(){function e(e){if(!c){if(c=!0,o=e,e=r(e),void 0!==a&&h.hasValue){var t=h.value;if(a(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(o=e,t):(o=e,s=n)}var o,s,c=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,a]);var f=o(e,d[0],d[1]);return c(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},242:(e,t,n)=>{e.exports=n(162)},287:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(a in c=e.defaultProps)void 0===i[a]&&(i[a]=c[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:k.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===i?"."+I(c,0):i,x(o)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),C(o,t,a,"",function(e){return e})):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(c=0,i=""===i?".":i+":",x(e))for(var l=0;l<e.length;l++){var u=i+I(s=e[l],l);c+=C(s,t,a,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=C(s=s.value,t,a,u=i+I(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],a=0;return C(e,r,"","",function(e){return t.call(n,e,a++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!S.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},338:(e,t,n)=>{var r=n(961);t.H=r.createRoot,r.hydrateRoot},463:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<a&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(l))m=!0,R(E);else{var t=r(u);null!==t&&D(x,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var i=f;try{for(w(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"==typeof o){h.callback=null,f=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof s?h.callback=s:h===r(l)&&a(l),w(n)}else a(l);h=r(l)}if(null!==h)var c=!0;else{var d=r(u);null!==d&&D(x,d.startTime-n),c=!1}return c}finally{h=null,f=i,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,_=null,N=-1,T=5,I=-1;function C(){return!(t.unstable_now()-I<T)}function A(){if(null!==_){var e=t.unstable_now();I=e;var n=!0;try{n=_(!0,e)}finally{n?k():(S=!1,_=null)}}else S=!1}if("function"==typeof b)k=function(){b(A)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,k=function(){O.postMessage(null)}}else k=function(){y(A,0)};function R(e){_=e,S||(S=!0,k())}function D(e,n){N=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch(i="object"==typeof i&&null!==i&&"number"==typeof(i=i.delay)&&0<i?o+i:o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(g?(v(N),N=-1):g=!0,D(x,i-o))):(e.sortIndex=s,n(l,e),m||p||(m=!0,R(E))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},493:(e,t,n)=>{var r=n(540),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,o=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,u=r[1];return s(function(){a.value=n,a.getSnapshot=t,l(a)&&u({inst:a})},[e,n,t]),o(function(){return l(a)&&u({inst:a}),e(function(){l(a)&&u({inst:a})})},[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},540:(e,t,n)=>{e.exports=n(287)},551:(e,t,n)=>{var r=n(540),a=n(982);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var c="\n"+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 1:return V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case E:return"Portal";case _:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(e){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,ke=null,Se=null;function _e(e){if(e=ba(e)){if("function"!=typeof Ee)throw Error(i(280));var t=e.stateNode;t&&(t=xa(t),Ee(e.stateNode,e.type,t))}}function Ne(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Te(){if(ke){var e=ke,t=Se;if(Se=ke=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ie(e,t){return e(t)}function Ce(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==ke||null!==Se)&&(Ce(),Te())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Me(e,t,n,r,a,i,o,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var Le=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,je=e}};function ze(e,t,n,r,a,i,o,s,c){Le=!1,je=null,Me.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return qe(a),e;if(o===r)return qe(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Xe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null,ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2,lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&4194240&i))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return!(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var xt,Et,kt,St,_t,Nt=!1,Tt=[],It=null,Ct=null,At=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&null!==(t=ba(t))&&Et(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function jt(e){var t=va(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void _t(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){Nt=!1,null!==It&&Ft(It)&&(It=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),Pt.forEach(Ut),Ot.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var $t=w.ReactCurrentBatchConfig,qt=!0;function Gt(e,t,n,r){var a=bt,i=$t.transition;$t.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=a,$t.transition=i}}function Wt(e,t,n,r){var a=bt,i=$t.transition;$t.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=a,$t.transition=i}}function Ht(e,t,n,r){if(qt){var a=Qt(e,t,n,r);if(null===a)qr(e,t,r,Kt,n),Mt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return It=Lt(It,e,t,n,r,a),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,a),!0;case"mouseover":return At=Lt(At,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Pt.set(i,Lt(Pt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Ot.set(i,Lt(Ot.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&xt(i),null===(i=Qt(e,t,n,r))&&qr(e,t,r,Kt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Kt=null;function Qt(e,t,n,r){if(Kt=null,null!==(e=va(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(ln),dn=j({},ln,{view:0,detail:0}),hn=an(dn),fn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(j({},fn,{dataTransfer:0})),gn=an(j({},dn,{relatedTarget:0})),yn=an(j({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(vn),wn=an(j({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function _n(){return Sn}var Nn=j({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Nn),In=an(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),An=an(j({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,jn=u&&(!Dn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1,$n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Gn(e,t,n,r){Ne(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Kn(e){Fr(e,0)}function Qn(e){if(H(wa(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Hn)){var t=[];Gn(t,Hn,e,xe(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Hn)}function ir(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cr(e,t){if(sr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(n,i);var o=ur(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},Sr={};function _r(e){if(kr[e])return kr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Nr=_r("animationend"),Tr=_r("animationiteration"),Ir=_r("animationstart"),Cr=_r("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),c(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(Nr,"onAnimationEnd"),Or(Tr,"onAnimationIteration"),Or(Ir,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Cr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,c,l){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=je;Le=!1,je=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&a.isPropagationStopped())break e;jr(a,s,l),i=c}else for(o=0;o<r.length;o++){if(c=(s=r[o]).instance,l=s.currentTarget,s=s.listener,c!==i&&a.isPropagationStopped())break e;jr(a,s,l),i=c}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Yt(t)){case 1:var a=Gt;break;case 4:a=Wt;break;default:a=Ht}n=a.bind(null,t,n,e),a=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,a){var i=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=va(s)))return;if(5===(c=o.tag)||6===c){r=i=o;continue e}s=s.parentNode}}r=r.return}Pe(function(){var r=i,a=xe(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Tn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Cn;break;case Nr:case Tr:case Ir:c=yn;break;case Cr:c=An;break;case"scroll":c=hn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=In}var u=!!(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=Oe(p,h))&&u.push(Gr(p,m,f))),d)break;p=p.return}0<u.length&&(s=new c(s,l,null,n,a),o.push({event:s,listeners:u}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!va(l)&&!l[pa])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?va(l):null)&&(l!==(d=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?s:wa(c),f=null==l?s:wa(l),(s=new u(m,p+"leave",c,n,a)).target=d,s.relatedTarget=f,m=null,va(a)===r&&((u=new u(h,p+"enter",l,n,a)).target=f,u.relatedTarget=d,m=u),d=m,c&&l)e:{for(h=l,p=0,f=u=c;f;f=Hr(f))p++;for(f=0,m=h;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)h=Hr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Hr(u),h=Hr(h)}u=null}else u=null;null!==c&&Kr(o,s,c,u,!1),null!==l&&null!==d&&Kr(o,d,l,u,!0)}if("select"===(c=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Yn;else if(qn(s))if(Xn)g=or;else{g=ar;var y=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(o,g,n,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wa(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,a)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in(Xt=a)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Wr(r,b)).length&&(b=new wn(b,e,null,n,a),o.push({event:b,listeners:y}),(v||null!==(v=zn(n)))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Wr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=v)}Fr(o,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Oe(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Oe(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(c=Oe(n,i))&&o.unshift(Gr(n,c,s)):a||null!=(c=Oe(n,i))&&o.push(Gr(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(i(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"==typeof setTimeout?setTimeout:void 0,aa="function"==typeof clearTimeout?clearTimeout:void 0,ia="function"==typeof Promise?Promise:void 0,oa="function"==typeof queueMicrotask?queueMicrotask:void 0!==ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout(function(){throw e})}function ca(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Bt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,fa="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function va(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[ha])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xa(e){return e[fa]||null}var Ea=[],ka=-1;function Sa(e){return{current:e}}function _a(e){0>ka||(e.current=Ea[ka],Ea[ka]=null,ka--)}function Na(e,t){ka++,Ea[ka]=e.current,e.current=t}var Ta={},Ia=Sa(Ta),Ca=Sa(!1),Aa=Ta;function Pa(e,t){var n=e.type.contextTypes;if(!n)return Ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oa(e){return null!=e.childContextTypes}function Ra(){_a(Ca),_a(Ia)}function Da(e,t,n){if(Ia.current!==Ta)throw Error(i(168));Na(Ia,t),Na(Ca,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,$(e)||"Unknown",a));return j({},n,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Aa=Ia.current,Na(Ia,e),Na(Ca,Ca.current),!0}function ja(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ma(e,t,Aa),r.__reactInternalMemoizedMergedChildContext=e,_a(Ca),_a(Ia),Na(Ia,e)):_a(Ca),Na(Ca,n)}var Fa=null,Ua=!1,Va=!1;function za(e){null===Fa?Fa=[e]:Fa.push(e)}function Ba(){if(!Va&&null!==Fa){Va=!0;var e=0,t=bt;try{var n=Fa;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fa=null,Ua=!1}catch(t){throw null!==Fa&&(Fa=Fa.slice(e+1)),He(Ze,Ba),t}finally{bt=t,Va=!1}}return null}var $a=[],qa=0,Ga=null,Wa=0,Ha=[],Ka=0,Qa=null,Ya=1,Xa="";function Ja(e,t){$a[qa++]=Wa,$a[qa++]=Ga,Ga=e,Wa=t}function Za(e,t,n){Ha[Ka++]=Ya,Ha[Ka++]=Xa,Ha[Ka++]=Qa,Qa=e;var r=Ya;e=Xa;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ya=1<<32-ot(t)+a|n<<a|r,Xa=i+e}else Ya=1<<i|n<<a|r,Xa=e}function ei(e){null!==e.return&&(Ja(e,1),Za(e,1,0))}function ti(e){for(;e===Ga;)Ga=$a[--qa],$a[qa]=null,Wa=$a[--qa],$a[qa]=null;for(;e===Qa;)Qa=Ha[--Ka],Ha[Ka]=null,Xa=Ha[--Ka],Ha[Ka]=null,Ya=Ha[--Ka],Ha[Ka]=null}var ni=null,ri=null,ai=!1,ii=null;function oi(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function si(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:Ya,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ci(e){return!(!(1&e.mode)||128&e.flags)}function li(e){if(ai){var t=ri;if(t){var n=t;if(!si(e,t)){if(ci(e))throw Error(i(418));t=la(n.nextSibling);var r=ni;t&&si(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(ci(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=la(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?la(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=la(e.nextSibling)}function fi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=w.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=jl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===O&&vi(i)===t.type)?((r=a(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=jl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case E:return(t=Fl(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Ml(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==a?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?l(e,t,n,r):null;case E:return n.key===a?u(e,t,n,r):null;case O:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||M(n))return null!==a?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,a){if("string"==typeof r&&""!==r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,a);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case O:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,a,null);yi(t,r)}return null}function m(a,i,s,c){for(var l=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(a,d,s[m],c);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(a,d),i=o(y,i,m),null===u?l=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(a,d),ai&&Ja(a,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],c))&&(i=o(d,i,m),null===u?l=d:u.sibling=d,u=d);return ai&&Ja(a,m),l}for(d=r(a,d);m<s.length;m++)null!==(g=p(d,a,m,s[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=o(g,i,m),null===u?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),ai&&Ja(a,m),l}function g(a,s,c,l){var u=M(c);if("function"!=typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(a,m,v.value,l);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(a,m),ai&&Ja(a,g),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=h(a,v.value,l))&&(s=o(v,s,g),null===d?u=v:d.sibling=v,d=v);return ai&&Ja(a,g),u}for(m=r(a,m);!v.done;g++,v=c.next())null!==(v=p(m,a,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),ai&&Ja(a,g),u}return function e(r,i,o,c){if("object"==typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var l=o.key,u=i;null!==u;){if(u.key===l){if((l=o.type)===k){if(7===u.tag){n(r,u.sibling),(i=a(u,o.props.children)).return=r,r=i;break e}}else if(u.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===O&&vi(l)===u.type){n(r,u.sibling),(i=a(u,o.props)).ref=gi(r,u,o),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((i=Ml(o.props.children,r.mode,c,o.key)).return=r,r=i):((c=Dl(o.type,o.key,o.props,null,r.mode,c)).ref=gi(r,i,o),c.return=r,r=c)}return s(r);case E:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fl(o,r.mode,c)).return=r,r=i}return s(r);case O:return e(r,i,(u=o._init)(o._payload),c)}if(te(o))return m(r,i,o,c);if(M(o))return g(r,i,o,c);yi(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=jl(o,r.mode,c)).return=r,r=i),s(r)):n(r,i)}}var wi=bi(!0),xi=bi(!1),Ei=Sa(null),ki=null,Si=null,_i=null;function Ni(){_i=Si=ki=null}function Ti(e){var t=Ei.current;_a(Ei),e._currentValue=t}function Ii(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ci(e,t){ki=e,_i=Si=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ai(e){var t=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:t,next:null},null===Si){if(null===ki)throw Error(i(308));Si=e,ki.dependencies={lanes:0,firstContext:e}}else Si=Si.next=e;return t}var Pi=null;function Oi(e){null===Pi?Pi=[e]:Pi.push(e)}function Ri(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Oi(t)):(n.next=a.next,a.next=n),t.interleaved=n,Di(e,r)}function Di(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ji(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Ic){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Di(e,n)}return null===(a=r.interleaved)?(t.next=t,Oi(r)):(t.next=a.next,a.next=t),r.interleaved=t,Di(e,n)}function Vi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var a=e.updateQueue;Mi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===o?i=l:o.next=l,o=c;var u=e.alternate;null!==u&&(s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c)}if(null!==i){var d=a.baseState;for(o=0,u=l=c=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=j({},d,h);break e;case 2:Mi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=f,c=d):u=u.next=f,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(c=d),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Lc|=o,e.lanes=o,e.memoizedState=d}}function $i(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!=typeof a)throw Error(i(191,a));a.call(r)}}}var qi={},Gi=Sa(qi),Wi=Sa(qi),Hi=Sa(qi);function Ki(e){if(e===qi)throw Error(i(174));return e}function Qi(e,t){switch(Na(Hi,t),Na(Wi,e),Na(Gi,qi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Gi),Na(Gi,t)}function Yi(){_a(Gi),_a(Wi),_a(Hi)}function Xi(e){Ki(Hi.current);var t=Ki(Gi.current),n=ce(t,e.type);t!==n&&(Na(Wi,e),Na(Gi,n))}function Ji(e){Wi.current===e&&(_a(Gi),_a(Wi))}var Zi=Sa(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,io=0,oo=null,so=null,co=null,lo=!1,uo=!1,ho=0,fo=0;function po(){throw Error(i(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,a,o){if(io=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:es,e=n(r,a),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(i(301));o+=1,co=so=null,t.updateQueue=null,ro.current=ts,e=n(r,a)}while(uo)}if(ro.current=Jo,t=null!==so&&null!==so.next,io=0,co=so=oo=null,lo=!1,t)throw Error(i(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?oo.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?oo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(i(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?oo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"==typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=so,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var c=s=null,l=null,u=o;do{var d=u.lane;if((io&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,s=r):l=l.next=h,oo.lanes|=d,Lc|=d}u=u.next}while(null!==u&&u!==o);null===l?s=r:l.next=c,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,oo.lanes|=o,Lc|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function So(e,t){var n=oo,r=bo(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,bs=!0),r=r.queue,Lo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Po(9,No.bind(null,n,r,a,t),void 0,null),null===Cc)throw Error(i(349));30&io||_o(n,t,a)}return a}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Co(e)}function To(e,t,n){return n(function(){Io(t)&&Co(e)})}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(e){return!0}}function Co(e){var t=Di(e,1);null!==t&&nl(t,e,1,-1)}function Ao(e){var t=vo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return bo().memoizedState}function Ro(e,t,n,r){var a=vo();oo.flags|=e,a.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var a=bo();r=void 0===r?null:r;var i=void 0;if(null!==so){var o=so.memoizedState;if(i=o.destroy,null!==r&&mo(r,o.deps))return void(a.memoizedState=Po(t,n,i,r))}oo.flags|=e,a.memoizedState=Po(1|t,n,i,r)}function Mo(e,t){return Ro(8390656,8,e,t)}function Lo(e,t){return Do(2048,8,e,t)}function jo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!=n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 21&io?(sr(n,t)||(n=mt(),oo.lanes|=n,Lc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n)}function Go(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{bt=n,ao.transition=r}}function Wo(){return bo().memoizedState}function Ho(e,t,n){var r=tl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Yo(t,n):null!==(n=Ri(e,t,n,r))&&(nl(n,e,r,el()),Xo(n,t,r))}function Ko(e,t,n){var r=tl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var c=t.interleaved;return null===c?(a.next=a,Oi(t)):(a.next=c.next,c.next=a),void(t.interleaved=a)}}catch(e){}null!==(n=Ri(e,t,a,r))&&(nl(n,e,r,a=el()),Xo(n,t,r))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Jo={readContext:Ai,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ai,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ai,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ro(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ho.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Ao,useDebugValue:zo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Go.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,a=vo();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Cc)throw Error(i(349));30&io||_o(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Mo(To.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Cc.identifierPrefix;if(ai){var n=Xa;t=":"+t+"R"+(n=(Ya&~(1<<32-ot(Ya)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Ai,useCallback:Bo,useContext:Ai,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:$o,useReducer:xo,useRef:Oo,useState:function(){return xo(wo)},useDebugValue:zo,useDeferredValue:function(e){return qo(bo(),so.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1},ts={readContext:Ai,useCallback:Bo,useContext:Ai,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:$o,useReducer:Eo,useRef:Oo,useState:function(){return Eo(wo)},useDebugValue:zo,useDeferredValue:function(e){var t=bo();return null===so?t.memoizedState=e:qo(t,so.memoizedState,e)},useTransition:function(){return[Eo(wo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:So,useId:Wo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),i=Fi(r,a);i.payload=t,null!=n&&(i.callback=n),null!==(t=Ui(e,i,a))&&(nl(t,e,a,r),Vi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),a=tl(e),i=Fi(r,a);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=Ui(e,i,a))&&(nl(t,e,a,r),Vi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),a=Fi(n,r);a.tag=2,null!=t&&(a.callback=t),null!==(t=Ui(e,a,r))&&(nl(t,e,r,n),Vi(t,e,r))}};function is(e,t,n,r,a,i,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!(t.prototype&&t.prototype.isPureReactComponent&&cr(n,r)&&cr(a,i))}function os(e,t,n){var r=!1,a=Ta,i=t.contextType;return"object"==typeof i&&null!==i?i=Ai(i):(a=Oa(t)?Aa:Ia.current,i=(r=null!=(r=t.contextTypes))?Pa(e,a):Ta),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=as,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&as.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Li(e);var i=t.contextType;"object"==typeof i&&null!==i?a.context=Ai(i):(i=Oa(t)?Aa:Ia.current,a.context=Pa(e,i)),a.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&as.enqueueReplaceState(a,a.state,null),Bi(e,n,a,r),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var a=n}catch(e){a="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:a,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var hs="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){qc||(qc=!0,Gc=r),ds(0,t)},n}function ps(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!=typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=_l.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 1&e.mode?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e)}var vs=w.ReactCurrentOwner,bs=!1;function ws(e,t,n,r){t.child=null===e?xi(t,null,n,r):wi(t,e.child,n,r)}function xs(e,t,n,r,a){n=n.render;var i=t.ref;return Ci(t,a),r=go(e,t,n,r,i,a),n=yo(),null===e||bs?(ai&&n&&ei(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qs(e,t,a))}function Es(e,t,n,r,a){if(null===e){var i=n.type;return"function"!=typeof i||Ol(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ks(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return qs(e,t,a)}return t.flags|=1,(e=Rl(i,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,qs(e,t,a);131072&e.flags&&(bs=!0)}}return Ns(e,t,n,r,a)}function Ss(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(Rc,Oc),Oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Na(Rc,Oc),Oc|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(Rc,Oc),Oc|=n;else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Na(Rc,Oc),Oc|=r;return ws(e,t,a,n),t.child}function _s(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,a){var i=Oa(n)?Aa:Ia.current;return i=Pa(t,i),Ci(t,a),n=go(e,t,n,r,i,a),r=yo(),null===e||bs?(ai&&r&&ei(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qs(e,t,a))}function Ts(e,t,n,r,a){if(Oa(n)){var i=!0;La(t)}else i=!1;if(Ci(t,a),null===t.stateNode)$s(e,t),os(t,n,r),cs(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var c=o.context,l=n.contextType;l="object"==typeof l&&null!==l?Ai(l):Pa(t,l=Oa(n)?Aa:Ia.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||c!==l)&&ss(t,o,r,l),Mi=!1;var h=t.memoizedState;o.state=h,Bi(t,r,o,a),c=t.memoizedState,s!==r||h!==c||Ca.current||Mi?("function"==typeof u&&(rs(t,n,u,r),c=t.memoizedState),(s=Mi||is(t,n,s,r,h,c,l))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ji(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),o.props=l,d=t.pendingProps,h=o.context,c="object"==typeof(c=n.contextType)&&null!==c?Ai(c):Pa(t,c=Oa(n)?Aa:Ia.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||h!==c)&&ss(t,o,r,c),Mi=!1,h=t.memoizedState,o.state=h,Bi(t,r,o,a);var p=t.memoizedState;s!==d||h!==p||Ca.current||Mi?("function"==typeof f&&(rs(t,n,f,r),p=t.memoizedState),(l=Mi||is(t,n,l,r,h,p,c)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,i,a)}function Is(e,t,n,r,a,i){_s(e,t);var o=!!(128&t.flags);if(!r&&!o)return a&&ja(t,n,!1),qs(e,t,i);r=t.stateNode,vs.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&ja(t,n,!0),t.child}function Cs(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),Qi(e,t.containerInfo)}function As(e,t,n,r,a){return fi(),pi(a),t.flags|=256,ws(e,t,n,r),t.child}var Ps,Os,Rs,Ds,Ms={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,n){var r,a=t.pendingProps,o=Zi.current,s=!1,c=!!(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&!!(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Na(Zi,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=a.children,e=a.fallback,s?(a=t.mode,s=t.child,c={mode:"hidden",children:c},1&a||null===s?s=Ll(c,a,0,null):(s.childLanes=0,s.pendingProps=c),e=Ml(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ms,e):Fs(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,a,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,a=t.mode,r=Ll({mode:"visible",children:r.children},a,0,null),(o=Ml(o,a,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,1&t.mode&&wi(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ms,o);if(!(1&t.mode))return Us(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var c=r.dgst;return r=c,Us(e,t,s,r=us(o=Error(i(419)),r,void 0))}if(c=0!==(s&e.childLanes),bs||c){if(null!==(r=Cc)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Di(e,a),nl(r,e,a,-1))}return ml(),Us(e,t,s,r=us(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),a._reactRetry=t,null):(e=o.treeContext,ri=la(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Ha[Ka++]=Ya,Ha[Ka++]=Xa,Ha[Ka++]=Qa,Ya=e.id,Xa=e.overflow,Qa=t),(t=Fs(t,r.children)).flags|=4096,t)}(e,t,c,a,r,o,n);if(s){s=a.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:a.children};return 1&c||t.child===o?(a=Rl(o,l)).subtreeFlags=14680064&o.subtreeFlags:((a=t.child).childLanes=0,a.pendingProps=l,t.deletions=null),null!==r?s=Rl(r,s):(s=Ml(s,c,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,c=null===(c=e.child.memoizedState)?Ls(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ms,a}return e=(s=e.child).sibling,a=Rl(s,{mode:"visible",children:a.children}),!(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Fs(e,t){return(t=Ll({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pi(r),wi(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ii(e.return,t,n)}function zs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Bs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),2&(r=Zi.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Na(Zi,r),1&t.mode)switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),zs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===eo(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}zs(t,!0,n,null,i);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function $s(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hs(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Oa(t.type)&&Ra(),Ws(t),null;case 3:return r=t.stateNode,Yi(),_a(Ca),_a(Ia),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ii&&(ol(ii),ii=null))),Os(e,t),Ws(t),null;case 5:Ji(t);var a=Ki(Hi.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ws(t),null}if(e=Ki(Gi.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[fa]=o,e=!!(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)Ur(Mr[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ae(r,o),Ur("invalid",r)}for(var c in ve(n,o),a=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"==typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),a=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[ha]=t,e[fa]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(c=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)Ur(Mr[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":Y(e,r),a=Q(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(o in ve(n,a),l=a)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&b(e,o,u,c))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(n=Ki(Hi.current),Ki(Gi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Jr(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return Ws(t),null;case 13:if(_a(Zi),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&1&t.mode&&!(128&t.flags))hi(),fi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ha]=t}else fi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==ii&&(ol(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&Zi.current?0===Dc&&(Dc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return Yi(),Os(e,t),null===e&&Br(t.stateNode.containerInfo),Ws(t),null;case 10:return Ti(t.type._context),Ws(t),null;case 19:if(_a(Zi),null===(o=t.memoizedState))return Ws(t),null;if(r=!!(128&t.flags),null===(c=o.rendering))if(r)Gs(o,!1);else{if(0!==Dc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(c=eo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(Zi,1&Zi.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bc&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!ai)return Ws(t),null}else 2*Xe()-o.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zi.current,Na(Zi,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Oc)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ks(e,t){switch(ti(t),t.tag){case 1:return Oa(t.type)&&Ra(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),_a(Ca),_a(Ia),no(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ji(t),null;case 13:if(_a(Zi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(Zi),null;case 4:return Yi(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Rs=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ki(Gi.current);var i,o=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),o=[];break;case"select":a=j({},a,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var c=a[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ur("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Ys=!1,Xs="function"==typeof WeakSet?WeakSet:Set,Js=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Sl(e,t,n)}else n.current=null}function ec(e,t,n){try{n()}catch(n){Sl(e,t,n)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&ec(t,n,i)}a=a.next}while(a!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ac(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[ha],delete t[fa],delete t[ma],delete t[ga],delete t[ya]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(it&&"function"==typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(e){}switch(n.tag){case 5:Ys||Zs(n,t);case 6:var r=uc,a=dc;uc=null,hc(e,t,n),dc=a,null!==(uc=r)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?ca(e.parentNode,n):1===e.nodeType&&ca(e,n),Bt(e)):ca(uc,n.stateNode));break;case 4:r=uc,a=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=r,dc=a;break;case 0:case 11:case 14:case 15:if(!Ys&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(2&i||4&i)&&ec(n,t,o),a=a.next}while(a!==r)}hc(e,t,n);break;case 1:if(!Ys&&(Zs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Sl(n,t,e)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,hc(e,t,n),Ys=r):hc(e,t,n);break;default:hc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach(function(t){var r=Il.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));fc(o,s,a),uc=null,dc=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(e){Sl(a,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),yc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(t){Sl(e,e.return,t)}try{nc(5,e,e.return)}catch(t){Sl(e,e.return,t)}}break;case 1:mc(t,e),yc(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(mc(t,e),yc(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(t){Sl(e,e.return,t)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&X(a,o),be(c,s);var u=be(c,o);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(c){case"input":J(a,o);break;case"textarea":ie(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(a,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(t){Sl(e,e.return,t)}}break;case 6:if(mc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(t){Sl(e,e.return,t)}}break;case 3:if(mc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(t){Sl(e,e.return,t)}break;case 4:default:mc(t,e),yc(e);break;case 13:mc(t,e),yc(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(zc=Xe())),4&r&&pc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(u=Ys)||d,mc(t,e),Ys=u):mc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&1&e.mode)for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(p=(f=Js).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:Zs(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Sl(r,n,e)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){xc(h);continue}}null!==p?(p.return=f,Js=p):xc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"==typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=h.stateNode,s=null!=(l=h.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",s))}catch(t){Sl(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){Sl(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),yc(e),4&r&&pc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(oc(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),lc(e,sc(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;cc(e,sc(e),o);break;default:throw Error(i(161))}}catch(t){Sl(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){Js=e,bc(e,t,n)}function bc(e,t,n){for(var r=!!(1&e.mode);null!==Js;){var a=Js,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Qs;if(!o){var s=a.alternate,c=null!==s&&null!==s.memoizedState||Ys;s=Qs;var l=Ys;if(Qs=o,(Ys=c)&&!l)for(Js=a;null!==Js;)c=(o=Js).child,22===o.tag&&null!==o.memoizedState?Ec(a):null!==c?(c.return=o,Js=c):Ec(a);for(;null!==i;)Js=i,bc(i,t,n),i=i.sibling;Js=a,Qs=s,Ys=l}wc(e)}else 8772&a.subtreeFlags&&null!==i?(i.return=a,Js=i):wc(e)}}function wc(e){for(;null!==Js;){var t=Js;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Ys||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$i(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$i(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Ys||512&t.flags&&ac(t)}catch(e){Sl(t,t.return,e)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xc(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function Ec(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(e){Sl(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(e){Sl(t,a,e)}}var i=t.return;try{ac(t)}catch(e){Sl(t,i,e)}break;case 5:var o=t.return;try{ac(t)}catch(e){Sl(t,o,e)}}}catch(e){Sl(t,t.return,e)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var kc,Sc=Math.ceil,_c=w.ReactCurrentDispatcher,Nc=w.ReactCurrentOwner,Tc=w.ReactCurrentBatchConfig,Ic=0,Cc=null,Ac=null,Pc=0,Oc=0,Rc=Sa(0),Dc=0,Mc=null,Lc=0,jc=0,Fc=0,Uc=null,Vc=null,zc=0,Bc=1/0,$c=null,qc=!1,Gc=null,Wc=null,Hc=!1,Kc=null,Qc=0,Yc=0,Xc=null,Jc=-1,Zc=0;function el(){return 6&Ic?Xe():-1!==Jc?Jc:Jc=Xe()}function tl(e){return 1&e.mode?2&Ic&&0!==Pc?Pc&-Pc:null!==mi.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type):1}function nl(e,t,n,r){if(50<Yc)throw Yc=0,Xc=null,Error(i(185));yt(e,n,r),2&Ic&&e===Cc||(e===Cc&&(!(2&Ic)&&(jc|=n),4===Dc&&sl(e,Pc)),rl(e,r),1===n&&0===Ic&&!(1&t.mode)&&(Bc=Xe()+500,Ua&&Ba()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,c=a[o];-1===c?0!==(s&n)&&0===(s&r)||(a[o]=ft(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Cc?Pc:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ua=!0,za(e)}(cl.bind(null,e)):za(cl.bind(null,e)),oa(function(){!(6&Ic)&&Ba()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cl(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(Jc=-1,Zc=0,6&Ic)throw Error(i(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=ht(e,e===Cc?Pc:0);if(0===r)return null;if(30&r||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var a=Ic;Ic|=2;var o=pl();for(Cc===e&&Pc===t||($c=null,Bc=Xe()+500,hl(e,t));;)try{vl();break}catch(t){fl(e,t)}Ni(),_c.current=o,Ic=a,null!==Ac?t=0:(Cc=null,Pc=0,t=Dc)}if(0!==t){if(2===t&&0!==(a=pt(e))&&(r=a,t=il(e,a)),1===t)throw n=Mc,hl(e,0),sl(e,r),rl(e,Xe()),n;if(6===t)sl(e,r);else{if(a=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)||(t=gl(e,r),2===t&&(o=pt(e),0!==o&&(r=o,t=il(e,o))),1!==t)))throw n=Mc,hl(e,0),sl(e,r),rl(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xl(e,Vc,$c);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=zc+500-Xe())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xl.bind(null,e,Vc,$c),t);break}xl(e,Vc,$c);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sc(r/1960))-r)){e.timeoutHandle=ra(xl.bind(null,e,Vc,$c),r);break}xl(e,Vc,$c);break;default:throw Error(i(329))}}}return rl(e,Xe()),e.callbackNode===n?al.bind(null,e):null}function il(e,t){var n=Uc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Vc,Vc=n,null!==t&&ol(t)),e}function ol(e){null===Vc?Vc=e:Vc.push.apply(Vc,e)}function sl(e,t){for(t&=~Fc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(6&Ic)throw Error(i(327));El();var t=ht(e,0);if(!(1&t))return rl(e,Xe()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Mc,hl(e,0),sl(e,t),rl(e,Xe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Vc,$c),rl(e,Xe()),null}function ll(e,t){var n=Ic;Ic|=1;try{return e(t)}finally{0===(Ic=n)&&(Bc=Xe()+500,Ua&&Ba())}}function ul(e){null!==Kc&&0===Kc.tag&&!(6&Ic)&&El();var t=Ic;Ic|=1;var n=Tc.transition,r=bt;try{if(Tc.transition=null,bt=1,e)return e()}finally{bt=r,Tc.transition=n,!(6&(Ic=t))&&Ba()}}function dl(){Oc=Rc.current,_a(Rc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Ac)for(n=Ac.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ra();break;case 3:Yi(),_a(Ca),_a(Ia),no();break;case 5:Ji(r);break;case 4:Yi();break;case 13:case 19:_a(Zi);break;case 10:Ti(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Cc=e,Ac=e=Rl(e.current,null),Pc=Oc=t,Dc=0,Mc=null,Fc=jc=Lc=0,Vc=Uc=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}Pi=null}return e}function fl(e,t){for(;;){var n=Ac;try{if(Ni(),ro.current=Jo,lo){for(var r=oo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}lo=!1}if(io=0,co=so=oo=null,uo=!1,ho=0,Nc.current=null,null===n||null===n.return){Dc=1,Mc=t,Ac=null;break}e:{var o=e,s=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,d=c,h=d.tag;if(!(1&d.mode||0!==h&&11!==h&&15!==h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,c,0,t),1&p.mode&&ms(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(!(1&t)){ms(o,u,t),ml();break e}l=Error(i(426))}else if(ai&&1&c.mode){var y=gs(s);if(null!==y){!(65536&y.flags)&&(y.flags|=256),ys(y,s,c,0,t),pi(ls(l,c));break e}}o=l=ls(l,c),4!==Dc&&(Dc=2),null===Uc?Uc=[o]:Uc.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zi(o,fs(0,l,t));break e;case 1:c=l;var v=o.type,b=o.stateNode;if(!(128&o.flags||"function"!=typeof v.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Wc&&Wc.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,zi(o,ps(o,c,t));break e}}o=o.return}while(null!==o)}wl(n)}catch(e){t=e,Ac===n&&null!==n&&(Ac=n=n.return);continue}break}}function pl(){var e=_c.current;return _c.current=Jo,null===e?Jo:e}function ml(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Cc||!(268435455&Lc)&&!(268435455&jc)||sl(Cc,Pc)}function gl(e,t){var n=Ic;Ic|=2;var r=pl();for(Cc===e&&Pc===t||($c=null,hl(e,t));;)try{yl();break}catch(t){fl(e,t)}if(Ni(),Ic=n,_c.current=r,null!==Ac)throw Error(i(261));return Cc=null,Pc=0,Dc}function yl(){for(;null!==Ac;)bl(Ac)}function vl(){for(;null!==Ac&&!Qe();)bl(Ac)}function bl(e){var t=kc(e.alternate,e,Oc);e.memoizedProps=e.pendingProps,null===t?wl(e):Ac=t,Nc.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Ac=n);if(null===e)return Dc=6,void(Ac=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Hs(n,t,Oc)))return void(Ac=n);if(null!==(t=t.sibling))return void(Ac=t);Ac=t=e}while(null!==t);0===Dc&&(Dc=5)}function xl(e,t,n){var r=bt,a=Tc.transition;try{Tc.transition=null,bt=1,function(e,t,n,r){do{El()}while(null!==Kc);if(6&Ic)throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Cc&&(Ac=Cc=null,Pc=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Hc||(Hc=!0,Cl(tt,function(){return El(),null})),o=!!(15990&n.flags),15990&n.subtreeFlags||o){o=Tc.transition,Tc.transition=null;var s=bt;bt=1;var c=Ic;Ic|=4,Nc.current=null,function(e,t){if(ea=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==a&&3!==h.nodeType||(c=s+a),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===a&&(c=s),f===o&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},qt=!1,Js=t;null!==Js;)if(e=(t=Js).child,1028&t.subtreeFlags&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(e){Sl(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tc,tc=!1}(e,n),gc(n,e),pr(ta),qt=!!ea,ta=ea=null,e.current=n,vc(n,e,a),Ye(),Ic=c,bt=s,Tc.transition=o}else e.current=n;if(Hc&&(Hc=!1,Kc=e,Qc=a),0===(o=e.pendingLanes)&&(Wc=null),function(e){if(it&&"function"==typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,!(128&~e.current.flags))}catch(e){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((a=t[n]).value,{componentStack:a.stack,digest:a.digest});if(qc)throw qc=!1,e=Gc,Gc=null,e;!!(1&Qc)&&0!==e.tag&&El(),1&(o=e.pendingLanes)?e===Xc?Yc++:(Yc=0,Xc=e):Yc=0,Ba()}(e,t,n,r)}finally{Tc.transition=a,bt=r}return null}function El(){if(null!==Kc){var e=wt(Qc),t=Tc.transition,n=bt;try{if(Tc.transition=null,bt=16>e?16:e,null===Kc)var r=!1;else{if(e=Kc,Kc=null,Qc=0,6&Ic)throw Error(i(331));var a=Ic;for(Ic|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(16&Js.flags){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:nc(8,d,o)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var f=(d=Js).sibling,p=d.return;if(ic(d),d===u){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=o}}if(2064&o.subtreeFlags&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(2048&(o=Js).flags)switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Js=v;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(2064&s.subtreeFlags&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(2048&(c=Js).flags)try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(e){Sl(c,c.return,e)}if(c===s){Js=null;break e}var x=c.sibling;if(null!==x){x.return=c.return,Js=x;break e}Js=c.return}}if(Ic=a,Ba(),it&&"function"==typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(e){}r=!0}return r}finally{bt=n,Tc.transition=t}}return!1}function kl(e,t,n){e=Ui(e,t=fs(0,t=ls(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)kl(e,e,n);else for(;null!==t;){if(3===t.tag){kl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=Ui(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function _l(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Cc===e&&(Pc&n)===n&&(4===Dc||3===Dc&&(130023424&Pc)===Pc&&500>Xe()-zc?hl(e,0):Fc|=n),rl(e,t)}function Nl(e,t){0===t&&(1&e.mode?(t=ut,!(130023424&(ut<<=1))&&(ut=4194304)):t=1);var n=el();null!==(e=Di(e,t))&&(yt(e,t,n),rl(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nl(e,n)}function Il(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Nl(e,n)}function Cl(e,t){return He(e,t)}function Al(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Al(e,t,n,r)}function Ol(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,a,o){var s=2;if(r=e,"function"==typeof e)Ol(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case k:return Ml(n.children,a,o,t);case S:s=8,a|=8;break;case _:return(e=Pl(12,n,t,2|a)).elementType=_,e.lanes=o,e;case C:return(e=Pl(13,n,t,a)).elementType=C,e.lanes=o,e;case A:return(e=Pl(19,n,t,a)).elementType=A,e.lanes=o,e;case R:return Ll(n,a,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:s=10;break e;case T:s=9;break e;case I:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pl(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Ll(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function jl(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Vl(e,t,n,r,a,i,o,s,c){return e=new Ul(e,t,n,s,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function zl(e){if(!e)return Ta;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oa(n))return Ma(e,n,t)}return t}function Bl(e,t,n,r,a,i,o,s,c){return(e=Vl(n,r,!0,e,0,i,0,s,c)).context=zl(null),n=e.current,(i=Fi(r=el(),a=tl(n))).callback=null!=t?t:null,Ui(n,i,a),e.current.lanes=a,yt(e,a,r),rl(e,r),e}function $l(e,t,n,r){var a=t.current,i=el(),o=tl(a);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(a,t,o))&&(nl(e,a,o,i),Vi(e,a,o)),o}function ql(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}kc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ca.current)bs=!0;else{if(0===(e.lanes&n)&&!(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Cs(t),fi();break;case 5:Xi(t);break;case 1:Oa(t.type)&&La(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Na(Ei,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Na(Zi,1&Zi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?js(e,t,n):(Na(Zi,1&Zi.current),null!==(e=qs(e,t,n))?e.sibling:null);Na(Zi,1&Zi.current);break;case 19:if(r=0!==(n&t.childLanes),128&e.flags){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Na(Zi,Zi.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return qs(e,t,n)}(e,t,n);bs=!!(131072&e.flags)}else bs=!1,ai&&1048576&t.flags&&Za(t,Wa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$s(e,t),e=t.pendingProps;var a=Pa(t,Ia.current);Ci(t,n),a=go(null,t,r,e,a,n);var o=yo();return t.flags|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(r)?(o=!0,La(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Li(t),a.updater=as,t.stateNode=a,a._reactInternals=t,cs(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,ai&&o&&ei(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch($s(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"==typeof e)return Ol(e)?1:0;if(null!=e){if((e=e.$$typeof)===I)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),a){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ns(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 3:e:{if(Cs(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ji(e,t),Bi(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=As(e,t,r,n,a=ls(Error(i(423)),t));break e}if(r!==a){t=As(e,t,r,n,a=ls(Error(i(424)),t));break e}for(ri=la(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===a){t=qs(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),_s(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&li(t),null;case 13:return js(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,xs(e,t,r,a=t.elementType===r?a:ns(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Na(Ei,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ca.current){t=qs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){s=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Fi(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ii(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ii(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ci(t,n),r=r(a=Ai(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=ns(r=t.type,t.pendingProps),Es(e,t,r,a=ns(r.type,a),n);case 15:return ks(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ns(r,a),$s(e,t),t.tag=1,Oa(r)?(e=!0,La(t)):e=!1,Ci(t,n),os(t,r,a),cs(t,r,a,n),Is(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return Ss(e,t,n)}throw Error(i(156,t.tag))};var Hl="function"==typeof reportError?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jl(){}function Zl(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"==typeof a){var s=a;a=function(){var e=ql(o);s.call(e)}}$l(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"==typeof r){var i=r;r=function(){var e=ql(o);i.call(e)}}var o=Bl(t,r,e,0,null,!1,0,"",Jl);return e._reactRootContainer=o,e[pa]=o.current,Br(8===e.nodeType?e.parentNode:e),ul(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"==typeof r){var s=r;r=function(){var e=ql(c);s.call(e)}}var c=Vl(e,0,!1,null,0,!1,0,"",Jl);return e._reactRootContainer=c,e[pa]=c.current,Br(8===e.nodeType?e.parentNode:e),ul(function(){$l(t,c,n,r)}),c}(n,t,e,a,r);return ql(o)}Ql.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));$l(e,t,null,null)},Ql.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul(function(){$l(null,e,null,null)}),t[pa]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rl(t,Xe()),!(6&Ic)&&(Bc=Xe()+500,Ba()))}break;case 13:ul(function(){var t=Di(e,1);if(null!==t){var n=el();nl(t,e,1,n)}}),Wl(e,1)}},Et=function(e){if(13===e.tag){var t=Di(e,134217728);null!==t&&nl(t,e,134217728,el()),Wl(e,134217728)}},kt=function(e){if(13===e.tag){var t=tl(e),n=Di(e,t);null!==n&&nl(n,e,t,el()),Wl(e,t)}},St=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(i(90));H(r),J(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=ll,Ce=ul;var eu={usingClientEntryPoint:!1,Events:[ba,wa,xa,Ne,Te,ll]},tu={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yl(e))throw Error(i(299));var n=!1,r="",a=Hl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Vl(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Br(8===e.nodeType?e.parentNode:e),new Kl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(i(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yl(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Hl;if(null!=n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,a,0,o,s),e[pa]=t.current,Br(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ql(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(i(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(i(40));return!!e._reactRootContainer&&(ul(function(){Zl(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},697:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),i=n(314),o=n.n(i)()(a());o.push([e.id,"*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-gradient-from-position:  ;\n  --tw-gradient-via-position:  ;\n  --tw-gradient-to-position:  ;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n  --tw-contain-size:  ;\n  --tw-contain-layout:  ;\n  --tw-contain-paint:  ;\n  --tw-contain-style:  ;\n}/*\n! tailwindcss v3.4.18 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: '';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user's configured `sans` font-family by default.\n5. Use the user's configured `sans` font-feature-settings by default.\n6. Use the user's configured `sans` font-variation-settings by default.\n7. Disable tap highlights on iOS\n*/\n\nhtml,\n:host {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n  font-variation-settings: normal; /* 6 */\n  -webkit-tap-highlight-color: transparent; /* 7 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user's configured `mono` font-family by default.\n2. Use the user's configured `mono` font-feature-settings by default.\n3. Use the user's configured `mono` font-variation-settings by default.\n4. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: SF Mono, Monaco, Consolas, monospace; /* 1 */\n  font-feature-settings: normal; /* 2 */\n  font-variation-settings: normal; /* 3 */\n  font-size: 1em; /* 4 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-feature-settings: inherit; /* 1 */\n  font-variation-settings: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  letter-spacing: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\ninput:where([type='button']),\ninput:where([type='reset']),\ninput:where([type='submit']) {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nReset default styling for dialogs.\n*/\ndialog {\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user's configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role=\"button\"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don't get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden]:where(:not([hidden=\"until-found\"])) {\n  display: none;\n}\n  html {\n    font-family: 'SF Pro Text', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n    font-weight: 400;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  \n  h1, h2, h3, h4, h5, h6 {\n    font-family: 'SF Pro Display', 'SF Pro Text', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n    font-weight: 500;\n    letter-spacing: -0.01em;\n  }\n  \n  .arabic-text {\n    font-family: 'Noto Sans Arabic', 'SF Pro Text', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n    direction: rtl;\n    text-align: right;\n    font-weight: 400;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n.\\!container {\n  width: 100% !important;\n}\n.container {\n  width: 100%;\n}\n@media (min-width: 640px) {\n\n  .\\!container {\n    max-width: 640px !important;\n  }\n\n  .container {\n    max-width: 640px;\n  }\n}\n@media (min-width: 768px) {\n\n  .\\!container {\n    max-width: 768px !important;\n  }\n\n  .container {\n    max-width: 768px;\n  }\n}\n@media (min-width: 1024px) {\n\n  .\\!container {\n    max-width: 1024px !important;\n  }\n\n  .container {\n    max-width: 1024px;\n  }\n}\n@media (min-width: 1280px) {\n\n  .\\!container {\n    max-width: 1280px !important;\n  }\n\n  .container {\n    max-width: 1280px;\n  }\n}\n@media (min-width: 1536px) {\n\n  .\\!container {\n    max-width: 1536px !important;\n  }\n\n  .container {\n    max-width: 1536px;\n  }\n}\n.btn-primary {\n  border-radius: 0.75rem;\n  --tw-bg-opacity: 1;\n  background-color: rgb(74 124 89 / var(--tw-bg-opacity, 1));\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  font-weight: 400;\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.btn-primary:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(90 140 105 / var(--tw-bg-opacity, 1));\n}\n.btn-secondary {\n  border-radius: 0.75rem;\n  border-width: 1px;\n  --tw-border-opacity: 1;\n  border-color: rgb(58 58 58 / var(--tw-border-opacity, 1));\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  font-weight: 400;\n  --tw-text-opacity: 1;\n  color: rgb(160 160 160 / var(--tw-text-opacity, 1));\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.btn-secondary:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(51 51 51 / var(--tw-bg-opacity, 1));\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n}\n.btn-accent {\n  border-radius: 0.75rem;\n  --tw-bg-opacity: 1;\n  background-color: rgb(74 124 89 / var(--tw-bg-opacity, 1));\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  font-weight: 400;\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.btn-accent:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(90 140 105 / var(--tw-bg-opacity, 1));\n}\n.card {\n  border-radius: 1rem;\n  border-width: 1px;\n  --tw-border-opacity: 1;\n  border-color: rgb(58 58 58 / var(--tw-border-opacity, 1));\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n  padding: 1.5rem;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.input-field {\n  border-radius: 0.75rem;\n  border-width: 1px;\n  --tw-border-opacity: 1;\n  border-color: rgb(58 58 58 / var(--tw-border-opacity, 1));\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n  padding-left: 1rem;\n  padding-right: 1rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n}\n.input-field::-moz-placeholder {\n  --tw-placeholder-opacity: 1;\n  color: rgb(107 107 107 / var(--tw-placeholder-opacity, 1));\n}\n.input-field::placeholder {\n  --tw-placeholder-opacity: 1;\n  color: rgb(107 107 107 / var(--tw-placeholder-opacity, 1));\n}\n.input-field {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.input-field:focus {\n  --tw-border-opacity: 1;\n  border-color: rgb(74 124 89 / var(--tw-border-opacity, 1));\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n.search-bar {\n  width: 100%;\n  border-radius: 0.75rem;\n  border-width: 1px;\n  --tw-border-opacity: 1;\n  border-color: rgb(58 58 58 / var(--tw-border-opacity, 1));\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n  padding-left: 1rem;\n  padding-right: 1rem;\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n}\n.search-bar::-moz-placeholder {\n  --tw-placeholder-opacity: 1;\n  color: rgb(107 107 107 / var(--tw-placeholder-opacity, 1));\n}\n.search-bar::placeholder {\n  --tw-placeholder-opacity: 1;\n  color: rgb(107 107 107 / var(--tw-placeholder-opacity, 1));\n}\n.search-bar {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.search-bar:focus {\n  --tw-border-opacity: 1;\n  border-color: rgb(74 124 89 / var(--tw-border-opacity, 1));\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n.surah-tile {\n  cursor: pointer;\n  border-radius: 0.75rem;\n  border-width: 1px;\n  --tw-border-opacity: 1;\n  border-color: rgb(58 58 58 / var(--tw-border-opacity, 1));\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n  padding: 1rem;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 200ms;\n}\n.surah-tile:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(51 51 51 / var(--tw-bg-opacity, 1));\n}\n.surah-tile.selected {\n  --tw-border-opacity: 1;\n  border-color: rgb(74 124 89 / var(--tw-border-opacity, 1));\n  background-color: rgb(74 124 89 / 0.1);\n}\n.difficulty-badge {\n  border-radius: 9999px;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n  font-size: 0.75rem;\n  line-height: 1rem;\n  font-weight: 500;\n}\n.difficulty-easy {\n  border-width: 1px;\n  border-color: rgb(52 199 89 / 0.3);\n  background-color: rgb(52 199 89 / 0.2);\n  --tw-text-opacity: 1;\n  color: rgb(52 199 89 / var(--tw-text-opacity, 1));\n}\n.difficulty-medium {\n  border-width: 1px;\n  border-color: rgb(255 210 102 / 0.3);\n  background-color: rgb(255 210 102 / 0.2);\n  --tw-text-opacity: 1;\n  color: rgb(255 210 102 / var(--tw-text-opacity, 1));\n}\n.difficulty-hard {\n  border-width: 1px;\n  border-color: rgb(255 94 87 / 0.3);\n  background-color: rgb(255 94 87 / 0.2);\n  --tw-text-opacity: 1;\n  color: rgb(255 94 87 / var(--tw-text-opacity, 1));\n}\n.progress-circle {\n  position: relative;\n  height: 2rem;\n  width: 2rem;\n}\n.progress-circle svg {\n  height: 100%;\n  width: 100%;\n  --tw-rotate: -90deg;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.progress-circle-bg {\n  stroke: #3A3A3A;\n}\n.progress-circle-fill {\n  stroke: #4A7C59;\n  transition-property: all;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 300ms;\n}\n/* Anki-style flashcard piles */\n.pile-card.learn {\n  --tw-border-opacity: 1;\n  border-color: rgb(52 199 89 / var(--tw-border-opacity, 1));\n  background-color: rgb(52 199 89 / 0.05);\n}\n.pile-card.review {\n  --tw-border-opacity: 1;\n  border-color: rgb(255 210 102 / var(--tw-border-opacity, 1));\n  background-color: rgb(255 210 102 / 0.05);\n}\n.pile-card.memorize {\n  --tw-border-opacity: 1;\n  border-color: rgb(255 94 87 / var(--tw-border-opacity, 1));\n  background-color: rgb(255 94 87 / 0.05);\n}\n.pile-card.consolidation {\n  --tw-border-opacity: 1;\n  border-color: rgb(74 124 89 / var(--tw-border-opacity, 1));\n  background-color: rgb(74 124 89 / 0.05);\n}\n.pointer-events-none {\n  pointer-events: none;\n}\n.static {\n  position: static;\n}\n.fixed {\n  position: fixed;\n}\n.absolute {\n  position: absolute;\n}\n.relative {\n  position: relative;\n}\n.sticky {\n  position: sticky;\n}\n.inset-0 {\n  inset: 0px;\n}\n.inset-y-0 {\n  top: 0px;\n  bottom: 0px;\n}\n.bottom-0 {\n  bottom: 0px;\n}\n.bottom-1 {\n  bottom: 0.25rem;\n}\n.left-0 {\n  left: 0px;\n}\n.left-1\\/2 {\n  left: 50%;\n}\n.left-4 {\n  left: 1rem;\n}\n.right-0 {\n  right: 0px;\n}\n.right-4 {\n  right: 1rem;\n}\n.right-8 {\n  right: 2rem;\n}\n.top-0 {\n  top: 0px;\n}\n.top-1 {\n  top: 0.25rem;\n}\n.top-1\\/3 {\n  top: 33.333333%;\n}\n.top-10 {\n  top: 2.5rem;\n}\n.top-4 {\n  top: 1rem;\n}\n.top-full {\n  top: 100%;\n}\n.z-10 {\n  z-index: 10;\n}\n.z-20 {\n  z-index: 20;\n}\n.z-30 {\n  z-index: 30;\n}\n.z-40 {\n  z-index: 40;\n}\n.z-50 {\n  z-index: 50;\n}\n.mx-1 {\n  margin-left: 0.25rem;\n  margin-right: 0.25rem;\n}\n.mx-auto {\n  margin-left: auto;\n  margin-right: auto;\n}\n.my-6 {\n  margin-top: 1.5rem;\n  margin-bottom: 1.5rem;\n}\n.my-8 {\n  margin-top: 2rem;\n  margin-bottom: 2rem;\n}\n.mb-1 {\n  margin-bottom: 0.25rem;\n}\n.mb-12 {\n  margin-bottom: 3rem;\n}\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n.mb-3 {\n  margin-bottom: 0.75rem;\n}\n.mb-4 {\n  margin-bottom: 1rem;\n}\n.mb-6 {\n  margin-bottom: 1.5rem;\n}\n.mb-8 {\n  margin-bottom: 2rem;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n.mt-2 {\n  margin-top: 0.5rem;\n}\n.mt-3 {\n  margin-top: 0.75rem;\n}\n.mt-4 {\n  margin-top: 1rem;\n}\n.mt-6 {\n  margin-top: 1.5rem;\n}\n.mt-8 {\n  margin-top: 2rem;\n}\n.block {\n  display: block;\n}\n.inline-block {\n  display: inline-block;\n}\n.flex {\n  display: flex;\n}\n.inline-flex {\n  display: inline-flex;\n}\n.grid {\n  display: grid;\n}\n.hidden {\n  display: none;\n}\n.h-0\\.5 {\n  height: 0.125rem;\n}\n.h-1 {\n  height: 0.25rem;\n}\n.h-1\\.5 {\n  height: 0.375rem;\n}\n.h-10 {\n  height: 2.5rem;\n}\n.h-12 {\n  height: 3rem;\n}\n.h-14 {\n  height: 3.5rem;\n}\n.h-16 {\n  height: 4rem;\n}\n.h-2 {\n  height: 0.5rem;\n}\n.h-20 {\n  height: 5rem;\n}\n.h-3 {\n  height: 0.75rem;\n}\n.h-4 {\n  height: 1rem;\n}\n.h-5 {\n  height: 1.25rem;\n}\n.h-6 {\n  height: 1.5rem;\n}\n.h-8 {\n  height: 2rem;\n}\n.h-full {\n  height: 100%;\n}\n.h-px {\n  height: 1px;\n}\n.max-h-\\[80vh\\] {\n  max-height: 80vh;\n}\n.max-h-\\[90vh\\] {\n  max-height: 90vh;\n}\n.min-h-\\[120px\\] {\n  min-height: 120px;\n}\n.min-h-\\[400px\\] {\n  min-height: 400px;\n}\n.min-h-\\[500px\\] {\n  min-height: 500px;\n}\n.min-h-screen {\n  min-height: 100vh;\n}\n.w-1 {\n  width: 0.25rem;\n}\n.w-1\\.5 {\n  width: 0.375rem;\n}\n.w-1\\/4 {\n  width: 25%;\n}\n.w-10 {\n  width: 2.5rem;\n}\n.w-12 {\n  width: 3rem;\n}\n.w-14 {\n  width: 3.5rem;\n}\n.w-16 {\n  width: 4rem;\n}\n.w-2 {\n  width: 0.5rem;\n}\n.w-20 {\n  width: 5rem;\n}\n.w-3 {\n  width: 0.75rem;\n}\n.w-4 {\n  width: 1rem;\n}\n.w-5 {\n  width: 1.25rem;\n}\n.w-56 {\n  width: 14rem;\n}\n.w-6 {\n  width: 1.5rem;\n}\n.w-64 {\n  width: 16rem;\n}\n.w-8 {\n  width: 2rem;\n}\n.w-full {\n  width: 100%;\n}\n.min-w-\\[120px\\] {\n  min-width: 120px;\n}\n.max-w-2xl {\n  max-width: 42rem;\n}\n.max-w-4xl {\n  max-width: 56rem;\n}\n.max-w-5xl {\n  max-width: 64rem;\n}\n.max-w-6xl {\n  max-width: 72rem;\n}\n.max-w-7xl {\n  max-width: 80rem;\n}\n.max-w-lg {\n  max-width: 32rem;\n}\n.max-w-md {\n  max-width: 28rem;\n}\n.max-w-sm {\n  max-width: 24rem;\n}\n.max-w-xl {\n  max-width: 36rem;\n}\n.flex-1 {\n  flex: 1 1 0%;\n}\n.flex-shrink-0 {\n  flex-shrink: 0;\n}\n.-translate-x-1\\/2 {\n  --tw-translate-x: -50%;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.scale-105 {\n  --tw-scale-x: 1.05;\n  --tw-scale-y: 1.05;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n@keyframes fadeIn {\n\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n}\n.animate-fade-in {\n  animation: fadeIn 0.3s ease-in-out;\n}\n@keyframes pulse {\n\n  50% {\n    opacity: .5;\n  }\n}\n.animate-pulse {\n  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n}\n@keyframes slideUp {\n\n  0% {\n    transform: translateY(10px);\n    opacity: 0;\n  }\n\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n.animate-slide-up {\n  animation: slideUp 0.3s ease-out;\n}\n@keyframes spin {\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.grid-cols-1 {\n  grid-template-columns: repeat(1, minmax(0, 1fr));\n}\n.grid-cols-2 {\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n}\n.grid-cols-3 {\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n}\n.grid-cols-4 {\n  grid-template-columns: repeat(4, minmax(0, 1fr));\n}\n.grid-cols-7 {\n  grid-template-columns: repeat(7, minmax(0, 1fr));\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-wrap {\n  flex-wrap: wrap;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-end {\n  align-items: flex-end;\n}\n.items-center {\n  align-items: center;\n}\n.justify-end {\n  justify-content: flex-end;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.gap-1 {\n  gap: 0.25rem;\n}\n.gap-2 {\n  gap: 0.5rem;\n}\n.gap-3 {\n  gap: 0.75rem;\n}\n.gap-4 {\n  gap: 1rem;\n}\n.gap-6 {\n  gap: 1.5rem;\n}\n.space-y-1 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(0.25rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(0.25rem * var(--tw-space-y-reverse));\n}\n.space-y-2 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(0.5rem * var(--tw-space-y-reverse));\n}\n.space-y-3 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(0.75rem * var(--tw-space-y-reverse));\n}\n.space-y-4 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(1rem * var(--tw-space-y-reverse));\n}\n.space-y-6 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(1.5rem * var(--tw-space-y-reverse));\n}\n.space-y-8 > :not([hidden]) ~ :not([hidden]) {\n  --tw-space-y-reverse: 0;\n  margin-top: calc(2rem * calc(1 - var(--tw-space-y-reverse)));\n  margin-bottom: calc(2rem * var(--tw-space-y-reverse));\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.overflow-y-auto {\n  overflow-y: auto;\n}\n.rounded {\n  border-radius: 0.25rem;\n}\n.rounded-2xl {\n  border-radius: 1rem;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n.border {\n  border-width: 1px;\n}\n.border-2 {\n  border-width: 2px;\n}\n.border-y {\n  border-top-width: 1px;\n  border-bottom-width: 1px;\n}\n.border-b {\n  border-bottom-width: 1px;\n}\n.border-b-2 {\n  border-bottom-width: 2px;\n}\n.border-l {\n  border-left-width: 1px;\n}\n.border-t {\n  border-top-width: 1px;\n}\n.border-accent {\n  --tw-border-opacity: 1;\n  border-color: rgb(74 124 89 / var(--tw-border-opacity, 1));\n}\n.border-accent\\/20 {\n  border-color: rgb(74 124 89 / 0.2);\n}\n.border-accent\\/40 {\n  border-color: rgb(74 124 89 / 0.4);\n}\n.border-blue-500\\/30 {\n  border-color: rgb(59 130 246 / 0.3);\n}\n.border-dark-border {\n  --tw-border-opacity: 1;\n  border-color: rgb(58 58 58 / var(--tw-border-opacity, 1));\n}\n.border-dark-text {\n  --tw-border-opacity: 1;\n  border-color: rgb(229 229 229 / var(--tw-border-opacity, 1));\n}\n.border-easy {\n  --tw-border-opacity: 1;\n  border-color: rgb(52 199 89 / var(--tw-border-opacity, 1));\n}\n.border-gray-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(209 213 219 / var(--tw-border-opacity, 1));\n}\n.border-green-500\\/30 {\n  border-color: rgb(34 197 94 / 0.3);\n}\n.border-medium {\n  --tw-border-opacity: 1;\n  border-color: rgb(255 210 102 / var(--tw-border-opacity, 1));\n}\n.border-orange-500\\/30 {\n  border-color: rgb(249 115 22 / 0.3);\n}\n.border-red-500\\/20 {\n  border-color: rgb(239 68 68 / 0.2);\n}\n.border-red-500\\/30 {\n  border-color: rgb(239 68 68 / 0.3);\n}\n.border-yellow-500\\/20 {\n  border-color: rgb(234 179 8 / 0.2);\n}\n.border-yellow-500\\/30 {\n  border-color: rgb(234 179 8 / 0.3);\n}\n.border-t-gray-600 {\n  --tw-border-opacity: 1;\n  border-top-color: rgb(75 85 99 / var(--tw-border-opacity, 1));\n}\n.border-t-transparent {\n  border-top-color: transparent;\n}\n.bg-accent {\n  --tw-bg-opacity: 1;\n  background-color: rgb(74 124 89 / var(--tw-bg-opacity, 1));\n}\n.bg-accent\\/10 {\n  background-color: rgb(74 124 89 / 0.1);\n}\n.bg-accent\\/20 {\n  background-color: rgb(74 124 89 / 0.2);\n}\n.bg-accent\\/50 {\n  background-color: rgb(74 124 89 / 0.5);\n}\n.bg-black\\/50 {\n  background-color: rgb(0 0 0 / 0.5);\n}\n.bg-blue-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(96 165 250 / var(--tw-bg-opacity, 1));\n}\n.bg-blue-500\\/20 {\n  background-color: rgb(59 130 246 / 0.2);\n}\n.bg-dark-bg {\n  --tw-bg-opacity: 1;\n  background-color: rgb(27 27 27 / var(--tw-bg-opacity, 1));\n}\n.bg-dark-bg\\/90 {\n  background-color: rgb(27 27 27 / 0.9);\n}\n.bg-dark-border {\n  --tw-bg-opacity: 1;\n  background-color: rgb(58 58 58 / var(--tw-bg-opacity, 1));\n}\n.bg-dark-surface {\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n}\n.bg-dark-surface-hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(51 51 51 / var(--tw-bg-opacity, 1));\n}\n.bg-dark-surface\\/75 {\n  background-color: rgb(42 42 42 / 0.75);\n}\n.bg-dark-surface\\/80 {\n  background-color: rgb(42 42 42 / 0.8);\n}\n.bg-dark-surface\\/95 {\n  background-color: rgb(42 42 42 / 0.95);\n}\n.bg-dark-text {\n  --tw-bg-opacity: 1;\n  background-color: rgb(229 229 229 / var(--tw-bg-opacity, 1));\n}\n.bg-easy {\n  --tw-bg-opacity: 1;\n  background-color: rgb(52 199 89 / var(--tw-bg-opacity, 1));\n}\n.bg-easy\\/20 {\n  background-color: rgb(52 199 89 / 0.2);\n}\n.bg-gray-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(156 163 175 / var(--tw-bg-opacity, 1));\n}\n.bg-gray-600 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(75 85 99 / var(--tw-bg-opacity, 1));\n}\n.bg-green-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(74 222 128 / var(--tw-bg-opacity, 1));\n}\n.bg-green-500\\/20 {\n  background-color: rgb(34 197 94 / 0.2);\n}\n.bg-medium\\/20 {\n  background-color: rgb(255 210 102 / 0.2);\n}\n.bg-orange-500\\/20 {\n  background-color: rgb(249 115 22 / 0.2);\n}\n.bg-red-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(248 113 113 / var(--tw-bg-opacity, 1));\n}\n.bg-red-500 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(239 68 68 / var(--tw-bg-opacity, 1));\n}\n.bg-red-500\\/10 {\n  background-color: rgb(239 68 68 / 0.1);\n}\n.bg-red-500\\/20 {\n  background-color: rgb(239 68 68 / 0.2);\n}\n.bg-transparent {\n  background-color: transparent;\n}\n.bg-white {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 255 255 / var(--tw-bg-opacity, 1));\n}\n.bg-yellow-400 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(250 204 21 / var(--tw-bg-opacity, 1));\n}\n.bg-yellow-500\\/10 {\n  background-color: rgb(234 179 8 / 0.1);\n}\n.bg-yellow-500\\/20 {\n  background-color: rgb(234 179 8 / 0.2);\n}\n.bg-gradient-to-l {\n  background-image: linear-gradient(to left, var(--tw-gradient-stops));\n}\n.bg-gradient-to-r {\n  background-image: linear-gradient(to right, var(--tw-gradient-stops));\n}\n.from-transparent {\n  --tw-gradient-from: transparent var(--tw-gradient-from-position);\n  --tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);\n}\n.via-medina-green {\n  --tw-gradient-to: rgb(45 90 71 / 0)  var(--tw-gradient-to-position);\n  --tw-gradient-stops: var(--tw-gradient-from), #2D5A47 var(--tw-gradient-via-position), var(--tw-gradient-to);\n}\n.to-transparent {\n  --tw-gradient-to: transparent var(--tw-gradient-to-position);\n}\n.p-1 {\n  padding: 0.25rem;\n}\n.p-2 {\n  padding: 0.5rem;\n}\n.p-3 {\n  padding: 0.75rem;\n}\n.p-4 {\n  padding: 1rem;\n}\n.p-5 {\n  padding: 1.25rem;\n}\n.p-6 {\n  padding: 1.5rem;\n}\n.p-8 {\n  padding: 2rem;\n}\n.px-2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n.px-3 {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.px-5 {\n  padding-left: 1.25rem;\n  padding-right: 1.25rem;\n}\n.px-6 {\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n}\n.px-8 {\n  padding-left: 2rem;\n  padding-right: 2rem;\n}\n.py-0\\.5 {\n  padding-top: 0.125rem;\n  padding-bottom: 0.125rem;\n}\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.py-10 {\n  padding-top: 2.5rem;\n  padding-bottom: 2.5rem;\n}\n.py-12 {\n  padding-top: 3rem;\n  padding-bottom: 3rem;\n}\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.py-3 {\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n}\n.py-4 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.py-8 {\n  padding-top: 2rem;\n  padding-bottom: 2rem;\n}\n.pl-10 {\n  padding-left: 2.5rem;\n}\n.pl-3 {\n  padding-left: 0.75rem;\n}\n.pt-3 {\n  padding-top: 0.75rem;\n}\n.pt-4 {\n  padding-top: 1rem;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.font-arabic {\n  font-family: Noto Sans Arabic, SF Pro Text, system-ui, sans-serif;\n}\n.font-body {\n  font-family: SF Pro Text, -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n}\n.font-mono {\n  font-family: SF Mono, Monaco, Consolas, monospace;\n}\n.text-2xl {\n  font-size: 1.5rem;\n  line-height: 2rem;\n}\n.text-3xl {\n  font-size: 1.875rem;\n  line-height: 2.25rem;\n}\n.text-4xl {\n  font-size: 2.25rem;\n  line-height: 2.5rem;\n}\n.text-6xl {\n  font-size: 3.75rem;\n  line-height: 1;\n}\n.text-\\[10px\\] {\n  font-size: 10px;\n}\n.text-base {\n  font-size: 1rem;\n  line-height: 1.5rem;\n}\n.text-lg {\n  font-size: 1.125rem;\n  line-height: 1.75rem;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}\n.text-xs {\n  font-size: 0.75rem;\n  line-height: 1rem;\n}\n.font-bold {\n  font-weight: 700;\n}\n.font-medium {\n  font-weight: 500;\n}\n.font-semibold {\n  font-weight: 600;\n}\n.uppercase {\n  text-transform: uppercase;\n}\n.leading-loose {\n  line-height: 2;\n}\n.leading-relaxed {\n  line-height: 1.625;\n}\n.text-accent {\n  --tw-text-opacity: 1;\n  color: rgb(74 124 89 / var(--tw-text-opacity, 1));\n}\n.text-blue-400 {\n  --tw-text-opacity: 1;\n  color: rgb(96 165 250 / var(--tw-text-opacity, 1));\n}\n.text-dark-bg {\n  --tw-text-opacity: 1;\n  color: rgb(27 27 27 / var(--tw-text-opacity, 1));\n}\n.text-dark-text {\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n}\n.text-dark-text-muted {\n  --tw-text-opacity: 1;\n  color: rgb(107 107 107 / var(--tw-text-opacity, 1));\n}\n.text-dark-text-secondary {\n  --tw-text-opacity: 1;\n  color: rgb(160 160 160 / var(--tw-text-opacity, 1));\n}\n.text-easy {\n  --tw-text-opacity: 1;\n  color: rgb(52 199 89 / var(--tw-text-opacity, 1));\n}\n.text-gray-400 {\n  --tw-text-opacity: 1;\n  color: rgb(156 163 175 / var(--tw-text-opacity, 1));\n}\n.text-gray-500 {\n  --tw-text-opacity: 1;\n  color: rgb(107 114 128 / var(--tw-text-opacity, 1));\n}\n.text-gray-900 {\n  --tw-text-opacity: 1;\n  color: rgb(17 24 39 / var(--tw-text-opacity, 1));\n}\n.text-green-400 {\n  --tw-text-opacity: 1;\n  color: rgb(74 222 128 / var(--tw-text-opacity, 1));\n}\n.text-green-500 {\n  --tw-text-opacity: 1;\n  color: rgb(34 197 94 / var(--tw-text-opacity, 1));\n}\n.text-hard {\n  --tw-text-opacity: 1;\n  color: rgb(255 94 87 / var(--tw-text-opacity, 1));\n}\n.text-medina-green {\n  --tw-text-opacity: 1;\n  color: rgb(45 90 71 / var(--tw-text-opacity, 1));\n}\n.text-medium {\n  --tw-text-opacity: 1;\n  color: rgb(255 210 102 / var(--tw-text-opacity, 1));\n}\n.text-orange-400 {\n  --tw-text-opacity: 1;\n  color: rgb(251 146 60 / var(--tw-text-opacity, 1));\n}\n.text-red-400 {\n  --tw-text-opacity: 1;\n  color: rgb(248 113 113 / var(--tw-text-opacity, 1));\n}\n.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity, 1));\n}\n.text-yellow-400 {\n  --tw-text-opacity: 1;\n  color: rgb(250 204 21 / var(--tw-text-opacity, 1));\n}\n.accent-accent {\n  accent-color: #4A7C59;\n}\n.opacity-0 {\n  opacity: 0;\n}\n.opacity-100 {\n  opacity: 1;\n}\n.opacity-30 {\n  opacity: 0.3;\n}\n.opacity-35 {\n  opacity: 0.35;\n}\n.opacity-50 {\n  opacity: 0.5;\n}\n.opacity-60 {\n  opacity: 0.6;\n}\n.opacity-80 {\n  opacity: 0.8;\n}\n.shadow {\n  --tw-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-2xl {\n  --tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n  --tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow-lg {\n  --tw-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.grayscale {\n  --tw-grayscale: grayscale(100%);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.backdrop-blur-sm {\n  --tw-backdrop-blur: blur(4px);\n  backdrop-filter: var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);\n}\n.transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-all {\n  transition-property: all;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-colors {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-opacity {\n  transition-property: opacity;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition-transform {\n  transition-property: transform;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.duration-200 {\n  transition-duration: 200ms;\n}\n.duration-300 {\n  transition-duration: 300ms;\n}\n.duration-500 {\n  transition-duration: 500ms;\n}\n.ease-out {\n  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);\n}\n.hover\\:scale-105:hover {\n  --tw-scale-x: 1.05;\n  --tw-scale-y: 1.05;\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n.hover\\:border-dark-text-secondary:hover {\n  --tw-border-opacity: 1;\n  border-color: rgb(160 160 160 / var(--tw-border-opacity, 1));\n}\n.hover\\:bg-dark-bg:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(27 27 27 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-dark-surface:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(42 42 42 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-dark-surface-hover:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(51 51 51 / var(--tw-bg-opacity, 1));\n}\n.hover\\:bg-gray-50:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(249 250 251 / var(--tw-bg-opacity, 1));\n}\n.hover\\:text-dark-text:hover {\n  --tw-text-opacity: 1;\n  color: rgb(229 229 229 / var(--tw-text-opacity, 1));\n}\n.hover\\:text-dark-text-secondary:hover {\n  --tw-text-opacity: 1;\n  color: rgb(160 160 160 / var(--tw-text-opacity, 1));\n}\n.hover\\:opacity-80:hover {\n  opacity: 0.8;\n}\n.hover\\:opacity-90:hover {\n  opacity: 0.9;\n}\n.focus\\:outline-none:focus {\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n.disabled\\:opacity-30:disabled {\n  opacity: 0.3;\n}\n.disabled\\:opacity-50:disabled {\n  opacity: 0.5;\n}\n@media (min-width: 768px) {\n\n  .md\\:flex {\n    display: flex;\n  }\n\n  .md\\:hidden {\n    display: none;\n  }\n\n  .md\\:grid-cols-2 {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n\n  .md\\:grid-cols-3 {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n\n  .md\\:grid-cols-4 {\n    grid-template-columns: repeat(4, minmax(0, 1fr));\n  }\n\n  .md\\:space-y-4 > :not([hidden]) ~ :not([hidden]) {\n    --tw-space-y-reverse: 0;\n    margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));\n    margin-bottom: calc(1rem * var(--tw-space-y-reverse));\n  }\n\n  .md\\:p-10 {\n    padding: 2.5rem;\n  }\n\n  .md\\:p-12 {\n    padding: 3rem;\n  }\n\n  .md\\:px-6 {\n    padding-left: 1.5rem;\n    padding-right: 1.5rem;\n  }\n\n  .md\\:py-12 {\n    padding-top: 3rem;\n    padding-bottom: 3rem;\n  }\n\n  .md\\:text-3xl {\n    font-size: 1.875rem;\n    line-height: 2.25rem;\n  }\n\n  .md\\:text-4xl {\n    font-size: 2.25rem;\n    line-height: 2.5rem;\n  }\n\n  .md\\:text-5xl {\n    font-size: 3rem;\n    line-height: 1;\n  }\n\n  .md\\:text-7xl {\n    font-size: 4.5rem;\n    line-height: 1;\n  }\n\n  .md\\:text-xl {\n    font-size: 1.25rem;\n    line-height: 1.75rem;\n  }\n}\n@media (min-width: 1024px) {\n\n  .lg\\:col-span-1 {\n    grid-column: span 1 / span 1;\n  }\n\n  .lg\\:col-span-3 {\n    grid-column: span 3 / span 3;\n  }\n\n  .lg\\:col-span-4 {\n    grid-column: span 4 / span 4;\n  }\n\n  .lg\\:grid-cols-3 {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n\n  .lg\\:grid-cols-4 {\n    grid-template-columns: repeat(4, minmax(0, 1fr));\n  }\n\n  .lg\\:text-4xl {\n    font-size: 2.25rem;\n    line-height: 2.5rem;\n  }\n}",""]);const s=o},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},888:(e,t,n)=>{e.exports=n(493)},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(551)},982:(e,t,n)=>{e.exports=n(463)}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={id:e,exports:{}};return n[e](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>n[e]);return o.default=()=>n,a.d(i,o),i},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nc=void 0;var i,o=a(540),s=a.t(o,2),c=a(338);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const u="popstate";function d(e,t){if(!1===e||null==e)throw new Error(t)}function h(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function p(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var y;function v(e,t,n){return void 0===n&&(n="/"),function(e,t,n,r){let a=O(("string"==typeof t?g(t):t).pathname||"/",n);if(null==a)return null;let i=b(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let e=0;null==o&&e<i.length;++e){let t=P(a);o=C(i[e],t,r)}return o}(e,t,n,!1)}function b(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let a=(e,a,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let s=D([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),b(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:I(s,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of w(e.path))a(e,t,n);else a(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return a?[i,""]:[i];let o=w(r.join("/")),s=[];return s.push(...o.map(e=>""===e?i:[i,e].join("/"))),a&&s.push(...o),s.map(t=>e.startsWith("/")&&""===t?"/":t)}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={})),new Set(["lazy","caseSensitive","path","id","index","children"]);const x=/^:[\w-]+$/,E=3,k=2,S=1,_=10,N=-2,T=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(T)&&(r+=N),t&&(r+=k),n.filter(e=>!T(e)).reduce((e,t)=>e+(x.test(t)?E:""===t?S:_),r)}function C(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,a={},i="/",o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l="/"===i?t:t.slice(i.length)||"/",u=A({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=A({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:D([i,u.pathname]),pathnameBase:M(D([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=D([i,u.pathnameBase]))}return o}function A(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:a}=t;if("*"===r){let e=s[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[r]=a&&!c?void 0:(c||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:o,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}const D=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;const F=["post","put","patch","delete"],U=(new Set(F),["get",...F]);function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}new Set(U),new Set([301,302,303,307,308]),new Set([307,308]),Symbol("deferred");const z=o.createContext(null),B=o.createContext(null),$=o.createContext(null),q=o.createContext(null),G=o.createContext({outlet:null,matches:[],isDataRoute:!1}),W=o.createContext(null);function H(){return null!=o.useContext(q)}function K(){return H()||d(!1),o.useContext(q).location}function Q(e){o.useContext($).static||o.useLayoutEffect(e)}function Y(){let{isDataRoute:e}=o.useContext(G);return e?function(){let{router:e}=function(){let e=o.useContext(z);return e||d(!1),e}(ne.UseNavigateStable),t=ae(re.UseNavigateStable),n=o.useRef(!1);Q(()=>{n.current=!0});let r=o.useCallback(function(r,a){void 0===a&&(a={}),n.current&&("number"==typeof r?e.navigate(r):e.navigate(r,V({fromRouteId:t},a)))},[e,t]);return r}():function(){H()||d(!1);let e=o.useContext(z),{basename:t,future:n,navigator:r}=o.useContext($),{matches:a}=o.useContext(G),{pathname:i}=K(),s=JSON.stringify(function(e,t){let n=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}(a,n.v7_relativeSplatPath)),c=o.useRef(!1);Q(()=>{c.current=!0});let u=o.useCallback(function(n,a){if(void 0===a&&(a={}),!c.current)return;if("number"==typeof n)return void r.go(n);let o=function(e,t,n,r){let a;void 0===r&&(r=!1),"string"==typeof e?a=g(e):(a=l({},e),d(!a.pathname||!a.pathname.includes("?"),R("?","pathname","search",a)),d(!a.pathname||!a.pathname.includes("#"),R("#","pathname","hash",a)),d(!a.search||!a.search.includes("#"),R("#","search","hash",a)));let i,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:a=""}="string"==typeof e?g(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:L(r),hash:j(a)}}(a,i),u=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!h||(c.pathname+="/"),c}(n,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:D([t,o.pathname])),(a.replace?r.replace:r.push)(o,a.state,a)},[t,r,s,i,e]);return u}()}function X(e,t,n,r){H()||d(!1);let{navigator:a}=o.useContext($),{matches:s}=o.useContext(G),c=s[s.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,f=K();if(t){var p;let e="string"==typeof t?g(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let m=h.pathname||"/",y=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:y}),w=function(e,t,n,r){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,c=null==(a=n)?void 0:a.errors;if(null!=c){let e=s.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||d(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:r}=n,a=t.route.loader&&void 0===e[t.route.id]&&(!r||void 0===r[t.route.id]);if(t.route.lazy||a){l=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight((e,r,a)=>{let i,d=!1,h=null,f=null;var p;n&&(i=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||Z,l&&(u<0&&0===a?(ie[p="route-fallback"]||(ie[p]=!0),d=!0,f=null):u===a&&(d=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,a+1)),g=()=>{let t;return t=i?h:d?f:r.route.Component?o.createElement(r.route.Component,null):r.route.element?r.route.element:e,o.createElement(te,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===a)?o.createElement(ee,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:D([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,n,r);return t&&w?o.createElement(q.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},w):w}function J(){let e=function(){var e;let t=o.useContext(W),n=function(){let e=o.useContext(B);return e||d(!1),e}(re.UseRouteError),r=ae(re.UseRouteError);return void 0!==t?t:null==(e=n.errors)?void 0:e[r]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:r},n):null,null)}const Z=o.createElement(J,null);class ee extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(G.Provider,{value:this.props.routeContext},o.createElement(W.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function te(e){let{routeContext:t,match:n,children:r}=e,a=o.useContext(z);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(G.Provider,{value:t},r)}var ne=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ne||{}),re=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(re||{});function ae(e){let t=function(){let e=o.useContext(G);return e||d(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ie={};function oe(e){d(!1)}function se(e){let{basename:t="/",children:n=null,location:r,navigationType:a=i.Pop,navigator:s,static:c=!1,future:l}=e;H()&&d(!1);let u=t.replace(/^\/*/,"/"),h=o.useMemo(()=>({basename:u,navigator:s,static:c,future:V({v7_relativeSplatPath:!1},l)}),[u,l,s,c]);"string"==typeof r&&(r=g(r));let{pathname:f="/",search:p="",hash:m="",state:y=null,key:v="default"}=r,b=o.useMemo(()=>{let e=O(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:y,key:v},navigationType:a}},[u,f,p,m,y,v,a]);return null==b?null:o.createElement($.Provider,{value:h},o.createElement(q.Provider,{children:n,value:b}))}function ce(e){let{children:t,location:n}=e;return X(le(t),n)}function le(e,t){void 0===t&&(t=[]);let n=[];return o.Children.forEach(e,(e,r)=>{if(!o.isValidElement(e))return;let a=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,le(e.props.children,a));e.type!==oe&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=le(e.props.children,a)),n.push(i)}),n}s.startTransition,new Promise(()=>{}),o.Component;var ue=a(961),de=a.t(ue,2);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(e){}new Map;const he=s.startTransition;function fe(e){let{basename:t,children:n,future:r,window:a}=e,s=o.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),function(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,s=a.history,c=i.Pop,h=null,g=y();function y(){return(s.state||{idx:null}).idx}function v(){c=i.Pop;let e=y(),t=null==e?null:e-g;g=e,h&&h({action:c,location:w.location,delta:t})}function b(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"==typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,s.replaceState(l({},s.state,{idx:g}),""));let w={get action(){return c},get location(){return e(a,s)},listen(e){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(u,v),h=e,()=>{a.removeEventListener(u,v),h=null}},createHref:e=>t(a,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=i.Push;let r=p(w.location,e,t);n&&n(r,e),g=y()+1;let l=f(r,g),u=w.createHref(r);try{s.pushState(l,"",u)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;a.location.assign(u)}o&&h&&h({action:c,location:w.location,delta:1})},replace:function(e,t){c=i.Replace;let r=p(w.location,e,t);n&&n(r,e),g=y();let a=f(r,g),l=w.createHref(r);s.replaceState(a,"",l),o&&h&&h({action:c,location:w.location,delta:0})},go:e=>s.go(e)};return w}(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return p("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:m(t)},null,e)}({window:a,v5Compat:!0}));let c=s.current,[h,g]=o.useState({action:c.action,location:c.location}),{v7_startTransition:y}=r||{},v=o.useCallback(e=>{y&&he?he(()=>g(e)):g(e)},[g,y]);return o.useLayoutEffect(()=>c.listen(v),[c,v]),o.useEffect(()=>{return null==(e=r)||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),void(t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation));var e,t},[r]),o.createElement(se,{basename:t,children:n,location:h.location,navigationType:h.action,navigator:c,future:r})}var pe,me;de.flushSync,s.useId,"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"}(pe||(pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(me||(me={}));const ge=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296==(64512&a)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const a=e[t],i=t+1<e.length,o=i?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=a>>2,u=(3&a)<<4|o>>4;let d=(15&o)<<2|c>>6,h=63&c;s||(h=64,i||(d=64)),r.push(n[l],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ge(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){const i=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const a=n[e.charAt(t++)],i=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const s=t<e.length?n[e.charAt(t)]:64;if(++t,null==a||null==i||null==o||null==s)throw new ve;const c=a<<2|i>>4;if(r.push(c),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==s){const e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const be=function(e){return function(e){const t=ge(e);return ye.encodeByteArray(t,!0)}(e).replace(/\./g,"")},we=function(e){try{return ye.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};const xe=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==a.g)return a.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&we(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},Ee=e=>xe()?.emulatorHosts?.[e],ke=()=>xe()?.config,Se=e=>xe()?.[`_${e}`];class _e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ne(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Te(e){return(await fetch(e,{credentials:"include"})).ok}const Ie={};let Ce=!1;function Ae(e,t){if("undefined"==typeof window||"undefined"==typeof document||!Ne(window.location.host)||Ie[e]===t||Ie[e]||Ce)return;function n(e){return`__firebase__banner__${e}`}Ie[e]=t;const r="__firebase__banner",a=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ie))Ie[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),i=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),s=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),l=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(s,o);const n=function(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Ce=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(l,c),t.append(l,i,s,n),document.body.appendChild(t)}a?(i.innerText="Preview backend disconnected.",l.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(l.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',i.innerText="Preview backend running in this workspace."),i.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",i):i()}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Re(){return!function(){const e=xe()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(a.g.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function De(){try{return"object"==typeof indexedDB}catch(e){return!1}}function Me(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}class Le extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Le.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,je.prototype.create)}}class je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],i=a?function(e,t){return e.replace(Fe,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(a,n):"Error",o=`${this.serviceName}: ${i} (${r}).`;return new Le(r,o,n)}}const Fe=/\{\$([^}]+)}/g;function Ue(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const n=e[a],i=t[a];if(Ve(n)&&Ve(i)){if(!Ue(n,i))return!1}else if(n!==i)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function Ve(e){return null!==e&&"object"==typeof e}function ze(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Be(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function $e(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class qe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ge),void 0===r.error&&(r.error=Ge),void 0===r.complete&&(r.complete=Ge);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ge(){}function We(e,t=1e3,n=2){const r=t*Math.pow(n,e),a=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+a)}function He(e){return e&&e._delegate?e._delegate:e}class Ke{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qe="[DEFAULT]";class Ye{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new _e;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Qe})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e=Qe){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Qe){return this.instances.has(e)}getOptions(e=Qe){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const a=this.instances.get(n);return a&&e(a,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Qe?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}var r;return n||null}normalizeInstanceIdentifier(e=Qe){return this.component?this.component.multipleInstances?e:Qe:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ye(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Je=[];var Ze;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ze||(Ze={}));const et={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},tt=Ze.INFO,nt={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},rt=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),a=nt[t];if(!a)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[a](`[${r}]  ${e.name}:`,...n)};class at{constructor(e){this.name=e,this._logLevel=tt,this._logHandler=rt,this._userLogHandler=null,Je.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?et[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}let it,ot;const st=new WeakMap,ct=new WeakMap,lt=new WeakMap,ut=new WeakMap,dt=new WeakMap;let ht={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ct.get(e);if("objectStoreNames"===t)return e.objectStoreNames||lt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ft(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ot||(ot=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(mt(this),e),pt(st.get(this))}:function(...e){return pt(t.apply(mt(this),e))}:function(e,...n){const r=t.call(mt(this),e,...n);return lt.set(r,e.sort?e.sort():[e]),pt(r)}:(e instanceof IDBTransaction&&function(e){if(ct.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});ct.set(e,t)}(e),n=e,(it||(it=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>n instanceof e)?new Proxy(e,ht):e);var t,n}function pt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(pt(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&st.set(t,e)}).catch(()=>{}),dt.set(t,e),t}(e);if(ut.has(e))return ut.get(e);const t=ft(e);return t!==e&&(ut.set(e,t),dt.set(t,e)),t}const mt=e=>dt.get(e);function gt(e,t,{blocked:n,upgrade:r,blocking:a,terminated:i}={}){const o=indexedDB.open(e,t),s=pt(o);return r&&o.addEventListener("upgradeneeded",e=>{r(pt(o.result),e.oldVersion,e.newVersion,pt(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const yt=["get","getKey","getAll","getAllKeys","count"],vt=["put","add","delete","clear"],bt=new Map;function wt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(bt.get(t))return bt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!yt.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,a?"readwrite":"readonly");let o=i.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),a&&i.done]))[0]};return bt.set(t,i),i}var xt;xt=ht,ht={...xt,get:(e,t,n)=>wt(e,t)||xt.get(e,t,n),has:(e,t)=>!!wt(e,t)||xt.has(e,t)};class Et{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const kt="@firebase/app",St="0.14.4",_t=new at("@firebase/app"),Nt="@firebase/app-compat",Tt="@firebase/analytics-compat",It="@firebase/analytics",Ct="@firebase/app-check-compat",At="@firebase/app-check",Pt="@firebase/auth",Ot="@firebase/auth-compat",Rt="@firebase/database",Dt="@firebase/data-connect",Mt="@firebase/database-compat",Lt="@firebase/functions",jt="@firebase/functions-compat",Ft="@firebase/installations",Ut="@firebase/installations-compat",Vt="@firebase/messaging",zt="@firebase/messaging-compat",Bt="@firebase/performance",$t="@firebase/performance-compat",qt="@firebase/remote-config",Gt="@firebase/remote-config-compat",Wt="@firebase/storage",Ht="@firebase/storage-compat",Kt="@firebase/firestore",Qt="@firebase/ai",Yt="@firebase/firestore-compat",Xt="firebase",Jt="[DEFAULT]",Zt={[kt]:"fire-core",[Nt]:"fire-core-compat",[It]:"fire-analytics",[Tt]:"fire-analytics-compat",[At]:"fire-app-check",[Ct]:"fire-app-check-compat",[Pt]:"fire-auth",[Ot]:"fire-auth-compat",[Rt]:"fire-rtdb",[Dt]:"fire-data-connect",[Mt]:"fire-rtdb-compat",[Lt]:"fire-fn",[jt]:"fire-fn-compat",[Ft]:"fire-iid",[Ut]:"fire-iid-compat",[Vt]:"fire-fcm",[zt]:"fire-fcm-compat",[Bt]:"fire-perf",[$t]:"fire-perf-compat",[qt]:"fire-rc",[Gt]:"fire-rc-compat",[Wt]:"fire-gcs",[Ht]:"fire-gcs-compat",[Kt]:"fire-fst",[Yt]:"fire-fst-compat",[Qt]:"fire-vertex","fire-js":"fire-js",[Xt]:"fire-js-all"},en=new Map,tn=new Map,nn=new Map;function rn(e,t){try{e.container.addComponent(t)}catch(n){_t.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function an(e){const t=e.name;if(nn.has(t))return _t.debug(`There were multiple attempts to register component ${t}.`),!1;nn.set(t,e);for(const t of en.values())rn(t,e);for(const t of tn.values())rn(t,e);return!0}function on(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function sn(e){return null!=e&&void 0!==e.settings}const cn=new je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ln{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ke("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cn.create("app-deleted",{appName:this._name})}}const un="12.4.0";function dn(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r={name:Jt,automaticDataCollectionEnabled:!0,...t},a=r.name;if("string"!=typeof a||!a)throw cn.create("bad-app-name",{appName:String(a)});if(n||(n=ke()),!n)throw cn.create("no-options");const i=en.get(a);if(i){if(Ue(n,i.options)&&Ue(r,i.config))return i;throw cn.create("duplicate-app",{appName:a})}const o=new Xe(a);for(const e of nn.values())o.addComponent(e);const s=new ln(n,r,o);return en.set(a,s),s}function hn(e=Jt){const t=en.get(e);if(!t&&e===Jt&&ke())return dn();if(!t)throw cn.create("no-app",{appName:e});return t}function fn(e,t,n){let r=Zt[e]??e;n&&(r+=`-${n}`);const a=r.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const e=[`Unable to register library "${r}" with version "${t}":`];return a&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&i&&e.push("and"),i&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void _t.warn(e.join(" "))}an(new Ke(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const pn="firebase-heartbeat-store";let mn=null;function gn(){return mn||(mn=gt("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pn)}catch(e){console.warn(e)}}}).catch(e=>{throw cn.create("idb-open",{originalErrorMessage:e.message})})),mn}async function yn(e,t){try{const n=(await gn()).transaction(pn,"readwrite"),r=n.objectStore(pn);await r.put(t,vn(e)),await n.done}catch(e){if(e instanceof Le)_t.warn(e.message);else{const t=cn.create("idb-set",{originalErrorMessage:e?.message});_t.warn(t.message)}}}function vn(e){return`${e.name}!${e.options.appId}`}class bn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=wn();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_t.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=wn(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const a of e){const e=n.find(e=>e.agent===a.agent);if(e){if(e.dates.push(a.date),En(n)>t){e.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),En(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=be(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return _t.warn(e),""}}}function wn(){return(new Date).toISOString().substring(0,10)}class xn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!De()&&Me().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await gn()).transaction(pn),n=await t.objectStore(pn).get(vn(e));return await t.done,n}catch(e){if(e instanceof Le)_t.warn(e.message);else{const t=cn.create("idb-get",{originalErrorMessage:e?.message});_t.warn(t.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return yn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return yn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function En(e){return be(JSON.stringify({version:2,heartbeats:e})).length}an(new Ke("platform-logger",e=>new Et(e),"PRIVATE")),an(new Ke("heartbeat",e=>new bn(e),"PRIVATE")),fn(kt,St,""),fn(kt,St,"esm2020"),fn("fire-js","");const kn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Sn=new je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_n=new at("@firebase/auth");function Nn(e,...t){_n.logLevel<=Ze.ERROR&&_n.error(`Auth (${un}): ${e}`,...t)}function Tn(e,...t){throw Pn(e,...t)}function In(e,...t){return Pn(e,...t)}function Cn(e,t,n){const r={...kn(),[t]:n};return new je("auth","Firebase",r).create(t,{appName:e.name})}function An(e){return Cn(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pn(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Sn.create(e,...t)}function On(e,t,...n){if(!e)throw Pn(t,...n)}function Rn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Nn(t),new Error(t)}function Dn(e,t){e||Rn(t)}function Mn(){return"undefined"!=typeof self&&self.location?.href||""}function Ln(){return"undefined"!=typeof self&&self.location?.protocol||null}class jn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===Ln()||"https:"===Ln()||Oe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Fn(e,t){Dn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Un{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bn=new jn(3e4,6e4);function $n(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function qn(e,t,n,r,a={}){return Gn(e,a,async()=>{let a={},i={};r&&("GET"===t?i=r:a={body:JSON.stringify(r)});const o=ze({key:e.config.apiKey,...i}).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:s,...a};return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Ne(e.emulatorConfig.host)&&(c.credentials="include"),Un.fetch()(await Hn(e,e.config.apiHost,n,o),c)})}async function Gn(e,t,n){e._canInitEmulator=!1;const r={...Vn,...t};try{const t=new Qn(e),a=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw Yn(e,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const t=a.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Yn(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Yn(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Yn(e,"user-disabled",i);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Cn(e,s,o);Tn(e,s)}}catch(t){if(t instanceof Le)throw t;Tn(e,"network-request-failed",{message:String(t)})}}async function Wn(e,t,n,r,a={}){const i=await qn(e,t,n,r,a);return"mfaPendingCredential"in i&&Tn(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Hn(e,t,n,r){const a=`${t}${n}?${r}`,i=e,o=i.config.emulator?Fn(e.config,a):`${e.config.apiScheme}://${a}`;return zn.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())?i._getPersistence()._getFinalTarget(o).toString():o}function Kn(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(In(this.auth,"network-request-failed")),Bn.get())})}}function Yn(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=In(e,t,r);return a.customData._tokenResponse=n,a}function Xn(e){return void 0!==e&&void 0!==e.enterprise}class Jn{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Kn(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zn(e,t){return qn(e,"GET","/v2/recaptchaConfig",$n(e,t))}async function er(e,t){return qn(e,"POST","/v1/accounts:lookup",t)}function tr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function nr(e){return 1e3*Number(e)}function rr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Nn("JWT malformed, contained fewer than 3 sections"),null;try{const e=we(n);return e?JSON.parse(e):(Nn("Failed to decode base64 JWT payload"),null)}catch(e){return Nn("Caught error parsing JWT payload as JSON",e?.toString()),null}}function ar(e){const t=rr(e);return On(t,"internal-error"),On(void 0!==t.exp,"internal-error"),On(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ir(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof Le&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class or{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class sr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tr(this.lastLoginAt),this.creationTime=tr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cr(e){const t=e.auth,n=await e.getIdToken(),r=await ir(e,er(t,{idToken:n}));On(r?.users.length,t,"internal-error");const a=r.users[0];e._notifyReloadListener(a);const i=a.providerUserInfo?.length?lr(a.providerUserInfo):[],o=(s=e.providerData,c=i,[...s.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var s,c;const l=e.isAnonymous,u=!(e.email&&a.passwordHash||o?.length),d=!!l&&u,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new sr(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function lr(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}class ur{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){On(e.idToken,"internal-error"),On(void 0!==e.idToken,"internal-error"),On(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):ar(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){On(0!==e.length,"internal-error");const t=ar(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(On(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:a}=await async function(e,t){const n=await Gn(e,{},async()=>{const n=ze({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,i=await Hn(e,r,"/v1/token",`key=${a}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:o,body:n};return e.emulatorConfig&&Ne(e.emulatorConfig.host)&&(s.credentials="include"),Un.fetch()(i,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,i=new ur;return n&&(On("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(On("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),a&&(On("number"==typeof a,"internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ur,this.toJSON())}_performRefresh(){return Rn("not implemented")}}function dr(e,t){On("string"==typeof e||void 0===e,"internal-error",{appName:t})}class hr{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId="firebase",this.proactiveRefresh=new or(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new sr(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ir(this,this.stsTokenManager.getToken(this.auth,e));return On(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=He(e),r=await n.getIdToken(t),a=rr(r);On(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i="object"==typeof a.firebase?a.firebase:void 0,o=i?.sign_in_provider;return{claims:a,token:r,authTime:tr(nr(a.auth_time)),issuedAtTime:tr(nr(a.iat)),expirationTime:tr(nr(a.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=He(e);await cr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(On(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){On(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await cr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(An(this.auth));const e=await this.getIdToken();return await ir(this,async function(e,t){return qn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,i=t.photoURL??void 0,o=t.tenantId??void 0,s=t._redirectEventId??void 0,c=t.createdAt??void 0,l=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:f,stsTokenManager:p}=t;On(u&&p,e,"internal-error");const m=ur.fromJSON(this.name,p);On("string"==typeof u,e,"internal-error"),dr(n,e.name),dr(r,e.name),On("boolean"==typeof d,e,"internal-error"),On("boolean"==typeof h,e,"internal-error"),dr(a,e.name),dr(i,e.name),dr(o,e.name),dr(s,e.name),dr(c,e.name),dr(l,e.name);const g=new hr({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:m,createdAt:c,lastLoginAt:l});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),s&&(g._redirectEventId=s),g}static async _fromIdTokenResponse(e,t,n=!1){const r=new ur;r.updateFromServerResponse(t);const a=new hr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await cr(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];On(void 0!==r.localId,"internal-error");const a=void 0!==r.providerUserInfo?lr(r.providerUserInfo):[],i=!(r.email&&r.passwordHash||a?.length),o=new ur;o.updateFromIdToken(n);const s=new hr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new sr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||a?.length)};return Object.assign(s,c),s}}const fr=new Map;function pr(e){Dn(e instanceof Function,"Expected a class definition");let t=fr.get(e);return t?(Dn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fr.set(e,t),t)}class mr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mr.type="NONE";const gr=mr;function yr(e,t,n){return`firebase:${e}:${t}:${n}`}class vr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=yr(this.userKey,r.apiKey,a),this.fullPersistenceKey=yr("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"==typeof e){const t=await er(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new vr(pr(gr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let a=r[0]||pr(gr);const i=yr(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(i);if(t){let r;if("string"==typeof t){const n=await er(e,{idToken:t}).catch(()=>{});if(!n)break;r=await hr._fromGetAccountInfoResponse(e,n,t)}else r=hr._fromJSON(e,t);n!==a&&(o=r),a=n;break}}catch{}const s=r.filter(e=>e._shouldAllowMigration);return a._shouldAllowMigration&&s.length?(a=s[0],o&&await a._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==a)try{await e._remove(i)}catch{}})),new vr(a,e,n)):new vr(a,e,n)}}function br(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_r(t))return"Blackberry";if(Nr(t))return"Webos";if(xr(t))return"Safari";if((t.includes("chrome/")||Er(t))&&!t.includes("edge/"))return"Chrome";if(Sr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function wr(e=Pe()){return/firefox\//i.test(e)}function xr(e=Pe()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Er(e=Pe()){return/crios\//i.test(e)}function kr(e=Pe()){return/iemobile/i.test(e)}function Sr(e=Pe()){return/android/i.test(e)}function _r(e=Pe()){return/blackberry/i.test(e)}function Nr(e=Pe()){return/webos/i.test(e)}function Tr(e=Pe()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ir(e=Pe()){return Tr(e)||Sr(e)||Nr(e)||_r(e)||/windows phone/i.test(e)||kr(e)}function Cr(e,t=[]){let n;switch(e){case"Browser":n=br(Pe());break;case"Worker":n=`${br(Pe())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${un}/${r}`}class Ar{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e?.message})}}}class Pr{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Or{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dr(this),this.idTokenSubscription=new Dr(this),this.beforeStateQueue=new Ar(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await er(this,{idToken:e}),n=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(sn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,a=n?._redirectEventId,i=await this.tryRedirectSignIn(e);t&&t!==a||!i?.user||(n=i.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return On(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cr(e)}catch(e){if("auth/network-request-failed"!==e?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(An(this));const t=e?He(e):null;return t&&On(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&On(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(An(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(An(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return qn(e,"GET","/v2/passwordPolicy",$n(e,t))}(this),t=new Pr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qn(e,"POST","/v2/accounts:revokeToken",$n(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pr(e)||this._popupRedirectResolver;On(t,this,"argument-error"),this.redirectPersistenceManager=await vr.create(this,[pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a="function"==typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(On(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),"function"==typeof t){const a=e.addObserver(t,n,r);return()=>{i=!0,a()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return On(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e,...t){_n.logLevel<=Ze.WARN&&_n.warn(`Auth (${un}): ${e}`,...t)}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Rr(e){return He(e)}class Dr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e){const t=new qe(e,void 0);return t.subscribe.bind(t)}(e=>this.observer=e)}get next(){return On(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Mr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lr(e){return Mr.loadJS(e)}function jr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Fr{constructor(){this.enterprise=new Ur}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ur{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Vr="NO_RECAPTCHA";class zr{constructor(e){this.type="recaptcha-enterprise",this.auth=Rr(e)}async verify(e="verify",t=!1){function n(t,n,r){const a=window.grecaptcha;Xn(a)?a.enterprise.ready(()=>{a.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Vr)})}):r(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?(new Fr).execute("siteKey",{action:"verify"}):new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Zn(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Jn(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(a=>{if(!t&&Xn(window.grecaptcha))n(a,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Mr.recaptchaEnterpriseScript;0!==t.length&&(t+=a),Lr(t).then(()=>{n(a,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Br(e,t,n,r=!1,a=!1){const i=new zr(e);let o;if(a)o=Vr;else try{o=await i.verify(n)}catch(e){o=await i.verify(n,!0)}const s={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function $r(e,t,n,r,a){if("EMAIL_PASSWORD_PROVIDER"===a){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Br(e,t,n,"getOobCode"===n);return r(e,a)}return r(e,t).catch(async a=>{if("auth/missing-recaptcha-token"===a.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Br(e,t,n,"getOobCode"===n);return r(e,a)}return Promise.reject(a)})}if("PHONE_PROVIDER"===a){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const a=await Br(e,t,n);return r(e,a).catch(async a=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===a.code||"auth/invalid-app-credential"===a.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const a=await Br(e,t,n,!1,!0);return r(e,a)}return Promise.reject(a)})}{const a=await Br(e,t,n,!1,!0);return r(e,a)}}return Promise.reject(a+" provider is not supported.")}function qr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Gr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Wr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rn("not implemented")}_getIdTokenResponse(e){return Rn("not implemented")}_linkToIdToken(e,t){return Rn("not implemented")}_getReauthenticationResolver(e){return Rn("not implemented")}}async function Hr(e,t){return qn(e,"POST","/v1/accounts:signUp",t)}async function Kr(e,t){return Wn(e,"POST","/v1/accounts:signInWithPassword",$n(e,t))}class Qr extends Wr{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qr(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Qr(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return $r(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Kr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wn(e,"POST","/v1/accounts:signInWithEmailLink",$n(e,t))}(e,{email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return $r(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wn(e,"POST","/v1/accounts:signInWithEmailLink",$n(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yr(e,t){return Wn(e,"POST","/v1/accounts:signInWithIdp",$n(e,t))}class Xr extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...a}=t;if(!n||!r)return null;const i=new Xr(n,r);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){return Yr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Yr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ze(t)}return e}}async function Jr(e,t){return qn(e,"POST","/v1/accounts:sendVerificationCode",$n(e,t))}const Zr={USER_NOT_FOUND:"user-not-found"};class ea extends Wr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ea({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ea({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Wn(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Wn(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,t));if(n.temporaryProof)throw Yn(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return Wn(e,"POST","/v1/accounts:signInWithPhoneNumber",$n(e,{...t,operation:"REAUTH"}),Zr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}=e;return n||t||r||a?new ea({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}):null}}class ta{constructor(e){const t=Be($e(e)),n=t.apiKey??null,r=t.oobCode??null,a=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);On(n&&r&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=Be($e(e)).link,n=t?Be($e(t)).deep_link_id:null,r=Be($e(e)).deep_link_id;return(r?Be($e(r)).link:null)||r||n||t||e}(e);try{return new ta(t)}catch{return null}}}class na{constructor(){this.providerId=na.PROVIDER_ID}static credential(e,t){return Qr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ta.parseLink(t);return On(n,"argument-error"),Qr._fromEmailAndCode(e,n.code,n.tenantId)}}na.PROVIDER_ID="password",na.EMAIL_PASSWORD_SIGN_IN_METHOD="password",na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ra{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class aa extends ra{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ia extends aa{constructor(){super("facebook.com")}static credential(e){return Xr._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.FACEBOOK_SIGN_IN_METHOD="facebook.com",ia.PROVIDER_ID="facebook.com";class oa extends aa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xr._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return oa.credential(t,n)}catch{return null}}}oa.GOOGLE_SIGN_IN_METHOD="google.com",oa.PROVIDER_ID="google.com";class sa extends aa{constructor(){super("github.com")}static credential(e){return Xr._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return sa.credential(e.oauthAccessToken)}catch{return null}}}sa.GITHUB_SIGN_IN_METHOD="github.com",sa.PROVIDER_ID="github.com";class ca extends aa{constructor(){super("twitter.com")}static credential(e,t){return Xr._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ca.credential(t,n)}catch{return null}}}ca.TWITTER_SIGN_IN_METHOD="twitter.com",ca.PROVIDER_ID="twitter.com";class la{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const a=await hr._fromIdTokenResponse(e,n,r),i=ua(n);return new la({user:a,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ua(n);return new la({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ua(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class da extends Le{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,da.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new da(e,t,n,r)}}function ha(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw da._fromErrorAndOperation(e,n,t,r);throw n})}function fa(e,t,n,r){return He(e).onAuthStateChanged(t,n,r)}function pa(e){return He(e).signOut()}function ma(e,t){return qn(e,"POST","/v2/accounts/mfaEnrollment:start",$n(e,t))}new WeakMap;const ga="__sak";class ya{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ga,"1"),this.storage.removeItem(ga),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class va extends ya{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ir(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},a=this.storage.getItem(n);!function(){const e=Pe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||10!==document.documentMode||a===e.newValue||e.newValue===e.oldValue?r():setTimeout(r,10)}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}va.type="LOCAL";const ba=va;class wa extends ya{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wa.type="SESSION";const xa=wa;class Ea{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ea(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,i=this.handlersMap[r];if(!i?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,a)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ka(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Ea.receivers=[];class Sa{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,i;return new Promise((o,s)=>{const c=ka("",20);r.port1.start();const l=setTimeout(()=>{s(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),a=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(t.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function _a(){return window}function Na(){return void 0!==_a().WorkerGlobalScope&&"function"==typeof _a().importScripts}const Ta="firebaseLocalStorageDb",Ia="firebaseLocalStorage",Ca="fbase_key";class Aa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pa(e,t){return e.transaction([Ia],t?"readwrite":"readonly").objectStore(Ia)}function Oa(){const e=indexedDB.open(Ta,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ia,{keyPath:Ca})}catch(e){n(e)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Ia)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ta);return new Aa(e).toPromise()}(),t(await Oa()))})})}async function Ra(e,t,n){const r=Pa(e,!0).put({[Ca]:t,value:n});return new Aa(r).toPromise()}function Da(e,t){const n=Pa(e,!0).delete(t);return new Aa(n).toPromise()}class Ma{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Oa()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Na()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ea._getInstance(Na()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new Sa(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Oa();return await Ra(e,ga,"1"),await Da(e,ga),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ra(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Pa(e,!1).get(t),r=await new Aa(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Da(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Pa(e,!1).getAll();return new Aa(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ma.type="LOCAL";const La=Ma;function ja(e,t){return qn(e,"POST","/v2/accounts/mfaSignIn:start",$n(e,t))}jr("rcb"),new jn(3e4,6e4);const Fa="recaptcha";async function Ua(e,t,n){if(!e._getRecaptchaConfig())try{await async function(e){const t=Rr(e),n=await Zn(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Jn(n);null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new zr(t).verify()}(e)}catch(e){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){On("enroll"===t.type,e,"internal-error");const a=$r(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},"mfaSmsEnrollment",async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===Vr?(On(n?.type===Fa,e,"argument-error"),ma(e,await Va(e,t,n))):ma(e,t),"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{On("signin"===t.type,e,"internal-error");const a=r.multiFactorHint?.uid||r.multiFactorUid;On(a,e,"missing-multi-factor-info");const i=$r(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},"mfaSmsSignIn",async(e,t)=>t.phoneSignInInfo.captchaResponse===Vr?(On(n?.type===Fa,e,"argument-error"),ja(e,await Va(e,t,n))):ja(e,t),"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t=$r(e,{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},"sendVerificationCode",async(e,t)=>t.captchaResponse===Vr?(On(n?.type===Fa,e,"argument-error"),Jr(e,await Va(e,t,n))):Jr(e,t),"PHONE_PROVIDER");return(await t.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Va(e,t,n){On(n.type===Fa,e,"argument-error");const r=await n.verify();On("string"==typeof r,e,"argument-error");const a={...t};if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.captchaResponse,n=a.phoneEnrollmentInfo.clientType,i=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),a}if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.captchaResponse,t=a.phoneSignInInfo.clientType,n=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),a}return Object.assign(a,{recaptchaToken:r}),a}class za{constructor(e){this.providerId=za.PROVIDER_ID,this.auth=Rr(e)}verifyPhoneNumber(e,t){return Ua(this.auth,e,He(t))}static credential(e,t){return ea._fromVerification(e,t)}static credentialFromResult(e){const t=e;return za.credentialFromTaggedObject(t)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ea._fromTokenResponse(t,n):null}}function Ba(e,t){return t?pr(t):(On(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}za.PROVIDER_ID="phone",za.PHONE_SIGN_IN_METHOD="phone";class $a extends Wr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qa(e){return async function(e,t,n=!1){if(sn(e.app))return Promise.reject(An(e));const r="signIn",a=await ha(e,r,t),i=await la._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(i.user),i}(e.auth,new $a(e),e.bypassAuthState)}function Ga(e){const{auth:t,user:n}=e;return On(n,t,"internal-error"),async function(e,t,n=!1){const{auth:r}=e;if(sn(r.app))return Promise.reject(An(r));const a="reauthenticate";try{const i=await ir(e,ha(r,a,t,e),n);On(i.idToken,r,"internal-error");const o=rr(i.idToken);On(o,r,"internal-error");const{sub:s}=o;return On(e.uid===s,r,"user-mismatch"),la._forOperation(e,a,i)}catch(e){throw"auth/user-not-found"===e?.code&&Tn(r,"user-mismatch"),e}}(n,new $a(e),e.bypassAuthState)}async function Wa(e){const{auth:t,user:n}=e;return On(n,t,"internal-error"),async function(e,t,n=!1){const r=await ir(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return la._forOperation(e,"link",r)}(n,new $a(e),e.bypassAuthState)}class Ha{constructor(e,t,n,r,a=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:i,type:o}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qa;case"linkViaPopup":case"linkViaRedirect":return Wa;case"reauthViaPopup":case"reauthViaRedirect":return Ga;default:Tn(this.auth,"internal-error")}}resolve(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ka=new jn(2e3,1e4);async function Qa(e,t,n){if(sn(e.app))return Promise.reject(In(e,"operation-not-supported-in-this-environment"));const r=Rr(e);!function(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Tn(e,"argument-error"),Cn(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(e,t,ra);const a=Ba(r,n);return new Ya(r,"signInViaPopup",t,a).executeNotNull()}class Ya extends Ha{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return On(e,this.auth,"internal-error"),e}async onExecution(){Dn(1===this.filter.length,"Popup operations only handle one event");const e=ka();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(In(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ka.get())};e()}}Ya.currentPopupAction=null;const Xa=new Map;class Ja extends Ha{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Xa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return yr("pendingRedirect",e.config.apiKey,e.name)}(t),r=function(e){return pr(e._redirectPersistence)}(e);if(!await r._isAvailable())return!1;const a="true"===await r._get(n);return await r._remove(n),a}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Xa.set(this.auth._key(),e)}return this.bypassAuthState||Xa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Za(e,t){Xa.set(e._key(),t)}async function ei(e,t,n=!1){if(sn(e.app))return Promise.reject(An(e));const r=Rr(e),a=Ba(r,t),i=new Ja(r,a,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class ti{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ri(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ri(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(In(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ni(e))}saveEventToCache(e){this.cachedEventUids.add(ni(e)),this.lastProcessedEventTime=Date.now()}}function ni(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ri({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}const ai=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ii=/^https?/;function oi(e){const t=Mn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&a.hostname===r}if(!ii.test(n))return!1;if(ai.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const si=new jn(3e4,6e4);function ci(){const e=_a().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}function li(e){return new Promise((t,n)=>{function r(){ci(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ci(),n(In(e,"network-request-failed"))},timeout:si.get()})}if(_a().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!_a().gapi?.load){const t=jr("iframefcb");return _a()[t]=()=>{gapi.load?r():n(In(e,"network-request-failed"))},Lr(`${Mr.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw ui=null,e})}let ui=null;const di=new jn(5e3,15e3),hi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pi(e){const t=e.config;On(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Fn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:un},a=fi.get(e.config.apiHost);a&&(r.eid=a);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ze(r).slice(1)}`}const mi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}const yi=encodeURIComponent("fac");async function vi(e,t,n,r,a,i){On(e.config.authDomain,e,"auth-domain-config-required"),On(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:un,eventId:a};if(t instanceof ra){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))o[e]=t}if(t instanceof aa){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const s=o;for(const e of Object.keys(s))void 0===s[e]&&delete s[e];const c=await e._getAppCheckToken(),l=c?`#${yi}=${encodeURIComponent(c)}`:"";return`${function({config:e}){return e.emulator?Fn(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${ze(s).slice(1)}${l}`}const bi="webStorageSupport",wi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xa,this._completeRedirectFn=ei,this._overrideRedirectResult=Za}async _openPopup(e,t,n,r){return Dn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()"),function(e,t,n,r=500,a=600){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c={...mi,width:r.toString(),height:a.toString(),top:i,left:o},l=Pe().toLowerCase();n&&(s=Er(l)?"_blank":n),wr(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Pe()){return Tr(e)&&!!window.navigator?.standalone}(l)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new gi(null);const d=window.open(t||"",s,u);On(d,e,"popup-blocked");try{d.focus()}catch(e){}return new gi(d)}(e,await vi(e,t,n,Mn(),r),ka())}async _openRedirect(e,t,n,r){return await this._originValidation(e),a=await vi(e,t,n,Mn(),r),_a().location.href=a,new Promise(()=>{});var a}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Dn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await function(e){return ui=ui||li(e),ui}(e),n=_a().gapi;return On(n,e,"internal-error"),t.open({where:document.body,url:pi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const a=In(e,"network-request-failed"),i=_a().setTimeout(()=>{r(a)},di.get());function o(){_a().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(a)})}))}(e),n=new ti(e);return t.register("authEvent",t=>(On(t?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(bi,{type:bi},n=>{const r=n?.[0]?.[bi];void 0!==r&&t(!!r),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return qn(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(oi(e))return}catch{}Tn(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ir()||xr()||Tr()}};var xi="@firebase/auth",Ei="1.11.0";class ki{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){On(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Si=Se("authIdTokenMaxAge")||300;let _i=null;var Ni;Mr={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=In("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ni="Browser",an(new Ke("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;On(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const s={apiKey:i,authDomain:o,clientPlatform:Ni,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cr(Ni)},c=new Or(n,r,a,s);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(pr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),an(new Ke("auth-internal",e=>(e=>new ki(e))(Rr(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),fn(xi,Ei,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ni)),fn(xi,Ei,"esm2020"),fn("firebase","12.4.0","app");var Ti,Ii,Ci="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ai={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"==typeof t)for(var a=0;a<16;++a)r[a]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(a=0;a<16;++a)r[a]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],a=e.g[2];let i,o=e.g[3];i=t+(o^n&(a^o))+r[0]+3614090360&4294967295,i=o+(a^(t=n+(i<<7&4294967295|i>>>25))&(n^a))+r[1]+3905402710&4294967295,o=t+(i<<12&4294967295|i>>>20),i=a+(n^o&(t^n))+r[2]+606105819&4294967295,i=n+(t^(a=o+(i<<17&4294967295|i>>>15))&(o^t))+r[3]+3250441966&4294967295,i=t+(o^(n=a+(i<<22&4294967295|i>>>10))&(a^o))+r[4]+4118548399&4294967295,i=o+(a^(t=n+(i<<7&4294967295|i>>>25))&(n^a))+r[5]+1200080426&4294967295,o=t+(i<<12&4294967295|i>>>20),i=a+(n^o&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(a=o+(i<<17&4294967295|i>>>15))&(o^t))+r[7]+4249261313&4294967295,i=t+(o^(n=a+(i<<22&4294967295|i>>>10))&(a^o))+r[8]+1770035416&4294967295,i=o+(a^(t=n+(i<<7&4294967295|i>>>25))&(n^a))+r[9]+2336552879&4294967295,o=t+(i<<12&4294967295|i>>>20),i=a+(n^o&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(a=o+(i<<17&4294967295|i>>>15))&(o^t))+r[11]+2304563134&4294967295,i=t+(o^(n=a+(i<<22&4294967295|i>>>10))&(a^o))+r[12]+1804603682&4294967295,i=o+(a^(t=n+(i<<7&4294967295|i>>>25))&(n^a))+r[13]+4254626195&4294967295,o=t+(i<<12&4294967295|i>>>20),i=a+(n^o&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(a=o+(i<<17&4294967295|i>>>15))&(o^t))+r[15]+1236535329&4294967295,i=t+(a^o&((n=a+(i<<22&4294967295|i>>>10))^a))+r[1]+4129170786&4294967295,i=o+(n^a&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,o=t+(i<<9&4294967295|i>>>23),i=a+(t^n&(o^t))+r[11]+643717713&4294967295,i=n+(o^t&((a=o+(i<<14&4294967295|i>>>18))^o))+r[0]+3921069994&4294967295,i=t+(a^o&((n=a+(i<<20&4294967295|i>>>12))^a))+r[5]+3593408605&4294967295,i=o+(n^a&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,o=t+(i<<9&4294967295|i>>>23),i=a+(t^n&(o^t))+r[15]+3634488961&4294967295,i=n+(o^t&((a=o+(i<<14&4294967295|i>>>18))^o))+r[4]+3889429448&4294967295,i=t+(a^o&((n=a+(i<<20&4294967295|i>>>12))^a))+r[9]+568446438&4294967295,i=o+(n^a&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,o=t+(i<<9&4294967295|i>>>23),i=a+(t^n&(o^t))+r[3]+4107603335&4294967295,i=n+(o^t&((a=o+(i<<14&4294967295|i>>>18))^o))+r[8]+1163531501&4294967295,i=t+(a^o&((n=a+(i<<20&4294967295|i>>>12))^a))+r[13]+2850285829&4294967295,i=o+(n^a&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,o=t+(i<<9&4294967295|i>>>23),i=a+(t^n&(o^t))+r[7]+1735328473&4294967295,i=n+(o^t&((a=o+(i<<14&4294967295|i>>>18))^o))+r[12]+2368359562&4294967295,i=t+((n=a+(i<<20&4294967295|i>>>12))^a^o)+r[5]+4294588738&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^a)+r[8]+2272392833&4294967295,o=t+(i<<11&4294967295|i>>>21),i=a+(o^t^n)+r[11]+1839030562&4294967295,i=n+((a=o+(i<<16&4294967295|i>>>16))^o^t)+r[14]+4259657740&4294967295,i=t+((n=a+(i<<23&4294967295|i>>>9))^a^o)+r[1]+2763975236&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^a)+r[4]+1272893353&4294967295,o=t+(i<<11&4294967295|i>>>21),i=a+(o^t^n)+r[7]+4139469664&4294967295,i=n+((a=o+(i<<16&4294967295|i>>>16))^o^t)+r[10]+3200236656&4294967295,i=t+((n=a+(i<<23&4294967295|i>>>9))^a^o)+r[13]+681279174&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^a)+r[0]+3936430074&4294967295,o=t+(i<<11&4294967295|i>>>21),i=a+(o^t^n)+r[3]+3572445317&4294967295,i=n+((a=o+(i<<16&4294967295|i>>>16))^o^t)+r[6]+76029189&4294967295,i=t+((n=a+(i<<23&4294967295|i>>>9))^a^o)+r[9]+3654602809&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^a)+r[12]+3873151461&4294967295,o=t+(i<<11&4294967295|i>>>21),i=a+(o^t^n)+r[15]+530742520&4294967295,i=n+((a=o+(i<<16&4294967295|i>>>16))^o^t)+r[2]+3299628645&4294967295,i=t+(a^((n=a+(i<<23&4294967295|i>>>9))|~o))+r[0]+4096336452&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~a))+r[7]+1126891415&4294967295,o=t+(i<<10&4294967295|i>>>22),i=a+(t^(o|~n))+r[14]+2878612391&4294967295,i=n+(o^((a=o+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(a^((n=a+(i<<21&4294967295|i>>>11))|~o))+r[12]+1700485571&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~a))+r[3]+2399980690&4294967295,o=t+(i<<10&4294967295|i>>>22),i=a+(t^(o|~n))+r[10]+4293915773&4294967295,i=n+(o^((a=o+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(a^((n=a+(i<<21&4294967295|i>>>11))|~o))+r[8]+1873313359&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~a))+r[15]+4264355552&4294967295,o=t+(i<<10&4294967295|i>>>22),i=a+(t^(o|~n))+r[6]+2734768916&4294967295,i=n+(o^((a=o+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(a^((n=a+(i<<21&4294967295|i>>>11))|~o))+r[4]+4149444226&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~a))+r[11]+3174756917&4294967295,o=t+(i<<10&4294967295|i>>>22),i=a+(t^(o|~n))+r[2]+718787259&4294967295,i=n+(o^((a=o+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(a+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+a&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let a=e.length-1;a>=0;a--){const i=0|e[a];r&&i==t||(n[a]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,a=this.C;let i=this.h,o=0;for(;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(a[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,a),i=0;break}}else for(;o<t;)if(a[i++]=e[o++],i==this.blockSize){n(this,a),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var a={};function i(e){return-128<=e&&e<128?function(e){var t=a;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=function(e){return new r([0|e],e<0?-1:0)}(e)}(e):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return s;if(e<0)return h(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var s=i(0),c=i(1),l=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(c)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;r.l(e)<=0;)n=y(n),r=y(r);var a=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var l=i.add(r);l.l(e)<=0&&(a=a.add(n),i=l),r=v(r,1),n=v(n,1)}return t=f(e,a.j(t)),new m(a,t)}for(a=s;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),l=(i=o(n)).j(t);d(l)||l.l(e)>0;)l=(i=o(n-=r)).j(t);u(i)&&(i=c),a=a.add(i),e=f(e,l)}return new m(a,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const a=e.g.length-n,i=[];for(let r=0;r<a;r++)i[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const a=g(n,t).g;let i=(((n=f(n,a.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=a))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let a=0;for(let r=0;r<=t;r++){let t=a+(65535&this.i(r))+(65535&e.i(r)),i=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);a=i>>>16,t&=65535,i&=65535,n[r]=i<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(l)<0&&e.l(l)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var a=0;a<2*t;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(let t=0;t<e.g.length;t++){const r=this.i(a)>>>16,i=65535&this.i(a),o=e.i(t)>>>16,s=65535&e.i(t);n[2*a+2*t]+=i*s,p(n,2*a+2*t),n[2*a+2*t+1]+=r*s,p(n,2*a+2*t+1),n[2*a+2*t+1]+=i*o,p(n,2*a+2*t+1),n[2*a+2*t+2]+=r*o,p(n,2*a+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,Ii=Ai.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let a=s;for(let e=0;e<t.length;e+=8){var i=Math.min(8,t.length-e);const s=parseInt(t.substring(e,e+i),n);i<8?(i=o(Math.pow(n,i)),a=a.j(i).add(o(s))):(a=a.j(r),a=a.add(o(s)))}return a},Ti=Ai.Integer=r}).apply(void 0!==Ci?Ci:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Pi,Oi,Ri,Di,Mi,Li,ji,Fi,Ui="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vi={};(function(){var e,t=Object.defineProperty,n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ui&&Ui];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var a=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in a))break e;a=a[o]}(r=r(i=a[e=e[e.length-1]]))!=i&&null!=r&&t(a,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var a=a||{},i=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){return(c=s).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}var d="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let t=1;t<arguments.length;t++){const r=arguments[t];var n=typeof r;if("array"==(n="object"!=n?n:r?Array.isArray(r)?"array":n:"null")||"object"==n&&"number"==typeof r.length){n=e.length||0;const t=r.length||0;e.length=n+t;for(let a=0;a<t;a++)e[n+a]=r[a]}else e.push(r)}}function p(e){i.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(E)}};function E(){for(var e;e=m();){try{e.h.call(e.g)}catch(e){p(e)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function k(){this.u=this.u,this.C=this.C}function S(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},S.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(e){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){S.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,S),T.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var I="closure_listenable_"+(1e6*Math.random()|0),C=0;function A(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++C,this.da=this.fa=!1}function P(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function O(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function j(e,t){const n=t.type;if(n in e.g){var r,a=e.g[n],i=Array.prototype.indexOf.call(a,t,void 0);(r=i>=0)&&Array.prototype.splice.call(a,i,1),r&&(P(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let a=0;a<e.length;++a){const i=e[a];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return a}return-1}L.prototype.add=function(e,t,n,r,a){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const o=F(e,t,r,a);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,i,!!r,a)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,a){if(r&&r.once)return $(e,t,n,r,a);if(Array.isArray(t)){for(let i=0;i<t.length;i++)z(e,t[i],n,r,a);return null}return n=Y(n),e&&e[I]?e.J(t,n,o(r)?!!r.capture:!!r,a):B(e,t,n,!1,r,a)}function B(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");const s=o(a)?!!a.capture:!!a;let c=K(e);if(c||(e[U]=c=new L(e)),(n=c.add(t,n,r,s,i)).proxy)return n;if(r=function(){const e=H;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_||(a=s),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $(e,t,n,r,a){if(Array.isArray(t)){for(let i=0;i<t.length;i++)$(e,t[i],n,r,a);return null}return n=Y(n),e&&e[I]?e.K(t,n,o(r)?!!r.capture:!!r,a):B(e,t,n,!0,r,a)}function q(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)q(e,t[i],n,r,a);else r=o(r)?!!r.capture:!!r,n=Y(n),e&&e[I]?(e=e.i,(i=String(t).toString())in e.g&&(n=F(t=e.g[i],n,r,a))>-1&&(P(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--))):e&&(e=K(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,a)),(n=e>-1?t[e]:null)&&G(n))}function G(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[I])j(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=K(t))?(j(n,e),0==n.h&&(n.src=null,t[U]=null)):P(e)}}}function W(e){return e in V?V[e]:V[e]="on"+e}function H(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function K(e){return(e=e[U])instanceof L?e:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(e){return"function"==typeof e?e:(e[Q]||(e[Q]=function(t){return e.handleEvent(t)}),e[Q])}function X(){k.call(this),this.i=new L(this),this.M=this,this.G=null}function J(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new S(t,e);else if(t instanceof S)t.target=t.target||e;else{var a=t;M(t=new S(r,e),a)}let i,o;if(a=!0,n)for(o=n.length-1;o>=0;o--)i=t.g=n[o],a=Z(i,r,!0,t)&&a;if(i=t.g=e,a=Z(i,r,!0,t)&&a,a=Z(i,r,!1,t)&&a,n)for(o=0;o<n.length;o++)i=t.g=n[o],a=Z(i,r,!1,t)&&a}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let a=!0;for(let i=0;i<t.length;++i){const o=t[i];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&j(e.i,o),a=!1!==t.call(n,r)&&a}}return a&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!=typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,k),X.prototype[I]=!0,X.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)P(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends k{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){k.call(this),this.h=e,this.g={}}u(ne,k);var re=[];function ae(e){O(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ae(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=i.JSON.stringify,oe=i.JSON.parse,se=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function ce(){}function le(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){S.call(this,"d")}function he(){S.call(this,"c")}u(de,S),u(he,S);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){S.call(this,fe.Ia,e)}function ye(e){const t=me();J(t,new ge(t))}function ve(e,t){S.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();J(t,new ve(t,e))}function we(e,t){S.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ee(){this.g=!0}function ke(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var a=r[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(let e=1;e<r.length;e++)r[e]=""}}}return ie(i)}catch(e){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,S),fe.STAT_EVENT="statevent",u(ve,S),fe.Ja="timingevent",u(we,S),Ee.prototype.ua=function(){this.g=!1},Ee.prototype.info=function(){};var Se,_e={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ne={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Te(){}function Ie(e){return encodeURIComponent(String(e))}function Ce(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pe}function Pe(){this.i=null,this.g="",this.h=!1}u(Te,ce),Te.prototype.g=function(){return new XMLHttpRequest},Se=new Te;var Oe={},Re={};function De(e,t,n){e.M=1,e.A=it(et(t)),e.u=n,e.R=!0,Me(e,null)}function Me(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Pe,e.g=on(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(c(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var a="readystatechange";Array.isArray(a)||(a&&(re[0]=a.toString()),a=re);for(let e=0;e<a.length;e++){const i=z(n,a[e],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,a,i){e.info(function(){if(e.g)if(i){var o="",s=i.split("&");for(let e=0;e<s.length;e++){var c=s[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+c+"&":o+(e+"=redacted&")}}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Oe:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(c(e.aa,e),t)}function Ve(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ae(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function $e(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ke(n.h,e)))if(!e.L&&Ke(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),$t(n)}Yt(n),be(18)}}else n.xa=a[1],0<n.xa-n.K&&a[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(c(n.Va,n),6e3));He(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!N(t))for(a=n.Ba.g.parse(t),t=0;t<a.length;t++){let c=a[t];const u=c[0];if(!(u<=n.K))if(n.K=u,c=c[1],2==n.I)if("c"==c[0]){n.M=c[1],n.ba=c[2];const t=c[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const a=c[4];null!=a&&(n.za=a,n.j.info("SVER="+n.za));const u=c[5];null!=u&&"number"==typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Qe(i,i.h),i.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,at(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=an(r,r.L?r.ba:null,r.W),o.L){Ye(r.h,o);var s=o,l=r.O;l&&(s.H=l),s.D&&(Ve(s),Fe(s)),r.g=o}else Qt(r);n.i.length>0&&Gt(n)}else"stop"!=c[0]&&"close"!=c[0]||nn(n,7);else 3==n.I&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?nn(n,7):Bt(n):"noop"!=c[0]&&n.l&&n.l.qa(c),n.A=0)}ye()}catch(e){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const c=Ft(this.g),l=this.g.ya();if(this.g.ca(),!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=c||7==l||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,a=4==Ft(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(a&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,a,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,a=this.g;if((r=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}ke(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$e(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=je(this,n),t==Re){4==c&&(this.m=4,be(14),e=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}if(t==Oe){this.m=4,be(15),ke(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}ke(this.i,this.l,t,null),$e(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(s),s.P=!0,be(11))}}else ke(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else ke(this.i,this.l,n,null),$e(this,n);4==c&&Be(this),this.o&&!this.K&&(4==c?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(N(e[r]))continue;var n=Ce(e[r]);const a=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const i=t[a]||[];t[a]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(e){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,e=i.PerformanceNavigationTiming?(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function He(e){return e.h?1:e.g?e.g.size:0}function Ke(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qe(e,t){e.g?e.g.add(t):e.h=t}function Ye(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}Ge.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Je))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=st(t,ht)),e.i=new pt(t,e.l))}function at(e,t,n){e.i.set(t,n)}function it(e){return at(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function st(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(st(t,lt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(st(t,lt,!0),"@"),e.push(Ie(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(st(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",st(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var a=t.h.lastIndexOf("/");-1!=a&&(r=t.h.slice(0,a+1)+r)}if(".."==(a=r)||"."==a)r="";else if(-1!=a.indexOf("./")||-1!=a.indexOf("/.")){r=0==a.lastIndexOf("/",0),a=a.split("/");const e=[];for(let t=0;t<a.length;){const n=a[t++];"."==n?r&&t==a.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==a.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=a}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var lt=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let a,i=null;r>=0?(a=e[n].substring(0,r),i=e[n].substring(r+1)):a=e[n],t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"==typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,a){try{a&&(a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null),r(n)}catch(e){}}function kt(){this.g=new se}function St(e){this.i=e.Sb||null,this.h=e.ab||!1}function _t(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Nt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,It(e)}function It(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ct(e){let t="";return O(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function At(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ct(n),"string"==typeof e?null!=n&&Ie(n):at(e,t,n))}function Pt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const a=Ie(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=a;""!==n[t]&&(r+="="+Ie(n[t])),e.push(r)}}return this.i=e.join("&")},u(St,ce),St.prototype.g=function(){return new _t(this.i,this.h)},u(_t,X),(e=_t.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,It(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,It(this)),this.g&&(this.readyState=3,It(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):It(this),3==this.readyState&&Nt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Na=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_t.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Pt,X);var Ot=/^https?$/i,Rt=["POST","PUT"];function Dt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Mt(e),jt(e)}function Mt(e){e.A||(e.A=!0,J(e,"complete"),J(e,"error"))}function Lt(e){if(e.h&&void 0!==a)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(J(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const a=e.ca();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){let t=String(e.D).match(Je)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),r=!Ot.test(t?t.toLowerCase():"")}n=r}if(n)J(e,"complete"),J(e,"success");else{e.o=6;try{var o=Ft(e)>2?e.g.statusText:""}catch(e){o=""}e.l=o+" ["+e.ca()+"]",Mt(e)}}finally{jt(e)}}}function jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const n=e.g;e.g=null,t||J(e,"ready");try{n.onreadystatechange=null}catch(e){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Vt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Ee,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vt("baseRetryDelayMs",5e3,e),this.Za=Vt("retryDelaySeedMs",1e4,e),this.Ta=Vt("forwardChannelMaxRetries",2,e),this.va=Vt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Ba=new kt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(at(n,"SID",e.M),at(n,"RID",t),at(n,"TYPE","terminate"),Ht(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=it(et(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=on(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function $t(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function qt(e){$t(e),e.v&&(i.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"==typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Gt(e){if(!We(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Wt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);at(r,"SID",e.M),at(r,"RID",n),at(r,"AID",e.K),Ht(e,r),e.u&&e.o&&At(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Kt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Qe(e.h,n),De(n,r,t)}function Ht(e,t){e.H&&O(e.H,function(e,n){at(t,n,e)}),e.l&&O({},function(e,n){at(t,n,e)})}function Kt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?c(e.l.Ka,e.l,e):null;e:{var a=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=a[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let c=!0;for(let l=0;l<n;l++){var i=a[l].g;const n=a[l].map;if((i-=t)<0)t=Math.max(0,a[l].g-100),c=!1;else try{i="req"+i+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;o(n)&&(r=ie(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(t){throw e.push(i+"type="+encodeURIComponent("_badmap")),t}}catch(e){r&&r(n)}}if(c){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function Qt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Yt(e){return!(e.g||e.v||e.A>=3||(e.Y++,e.v=xe(c(e.Da,e),tn(e,e.A)),e.A++,0))}function Xt(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function Jt(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);at(t,"RID","rpc"),at(t,"SID",e.M),at(t,"AID",e.K),at(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&at(t,"TO",e.ia),at(t,"TYPE","xmlhttp"),Ht(e,t),e.u&&e.o&&At(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=it(et(t)),n.u=null,n.R=!0,Me(n,e)}function Zt(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Xt(e),e.g=null;var r=2}else{if(!Ke(e.h,t))return;n=t.G,Ye(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var a=e.D;J(r=me(),new we(r,n)),Gt(e)}else Qt(e);else if(3==(a=t.m)||0==a&&t.X>0||!(1==r&&function(e,t){return!(He(e.h)>=e.h.j-(e.m?1:0)||(e.m?(e.i=t.G.concat(e.i),0):1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta)||(e.m=xe(c(e.Ea,e,t),tn(e,e.D)),e.D++,0)))}(e,t)||2==r&&Yt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),a){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||tt(r,"https"),it(r),t?function(e,t){const n=new Ee;if(i.Image){const r=new Image;r.onload=l(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=l(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ee;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function an(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var a=i.location;r=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),a&&nt(e,a),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&at(r,n,t),at(r,"VER",e.ka),Ht(e,r),r}function on(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Pt(new St({ab:n})):new Pt(e.ma)).Fa(e.L),t}function sn(){}function cn(){}function ln(e,t){X.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!N(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=Pt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Se.g(),this.g.onreadystatechange=d(c(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){return void Dt(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),a=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(e){Dt(this,e)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,J(this,"complete"),J(this,"abort"),jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jt(this,!0)),Pt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=an(this,null,this.W),Gt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const a=new Ae(this,this.j,e);let i=this.o;if(this.U&&(i?(i=R(i),M(i,this.U)):i=this.U),null!==this.u||this.R||(a.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kt(this,a,t),at(n=et(this.J),"RID",e),at(n,"CVER",22),this.G&&at(n,"X-HTTP-Session-Id",this.G),Ht(this,n),i&&(this.R?t="headers="+Ie(Ct(i))+"&"+t:this.u&&At(n,this.u,i)),Qe(this.h,a),this.Ra&&at(n,"TYPE","init"),this.S?(at(n,"$req",t),at(n,"SID","null"),a.U=!0,De(a,n,null)):De(a,n,t),this.I=2}}else 3==this.I&&(e?Wt(this,e):0==this.i.length||We(this.h)||Wt(this))},e.Da=function(){if(this.v=null,Jt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(c(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),$t(this),Jt(this))},e.Va=function(){null!=this.C&&(this.C=null,$t(this),Yt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=sn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},cn.prototype.g=function(e,t){return new ln(e,t)},u(ln,X),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){Bt(this.g)},ln.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ie(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Gt(t)},ln.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,ln.Z.N.call(this)},u(un,de),u(dn,he),u(hn,sn),hn.prototype.ra=function(){J(this.g,"a")},hn.prototype.qa=function(e){J(this.g,new un(e))},hn.prototype.pa=function(e){J(this.g,new dn)},hn.prototype.oa=function(){J(this.g,"b")},cn.prototype.createWebChannel=cn.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Fi=Vi.createWebChannelTransport=function(){return new cn},ji=Vi.getStatEventTarget=function(){return me()},Li=Vi.Event=fe,Mi=Vi.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,Di=Vi.ErrorCode=_e,Ne.COMPLETE="complete",Ri=Vi.EventType=Ne,le.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,Oi=Vi.WebChannel=le,Vi.FetchXmlHttpFactory=St,Pt.prototype.listenOnce=Pt.prototype.K,Pt.prototype.getLastError=Pt.prototype.Ha,Pt.prototype.getLastErrorCode=Pt.prototype.ya,Pt.prototype.getStatus=Pt.prototype.ca,Pt.prototype.getResponseJson=Pt.prototype.La,Pt.prototype.getResponseText=Pt.prototype.la,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Fa,Pi=Vi.XhrIo=Pt}).apply(void 0!==Ui?Ui:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const zi="@firebase/firestore",Bi="4.9.2";class $i{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid"),$i.MOCK_USER=new $i("mock-user");let qi="12.3.0";const Gi=new at("@firebase/firestore");function Wi(){return Gi.logLevel}function Hi(e,...t){if(Gi.logLevel<=Ze.DEBUG){const n=t.map(Yi);Gi.debug(`Firestore (${qi}): ${e}`,...n)}}function Ki(e,...t){if(Gi.logLevel<=Ze.ERROR){const n=t.map(Yi);Gi.error(`Firestore (${qi}): ${e}`,...n)}}function Qi(e,...t){if(Gi.logLevel<=Ze.WARN){const n=t.map(Yi);Gi.warn(`Firestore (${qi}): ${e}`,...n)}}function Yi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Xi(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Ji(e,r,n)}function Ji(e,t,n){let r=`FIRESTORE (${qi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Ki(r),new Error(r)}function Zi(e,t,n,r){let a="Unexpected state";"string"==typeof n?a=n:r=n,e||Ji(t,a,r)}function eo(e,t){return e}const to={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class no extends Le{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ro{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ao{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class io{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($i.UNAUTHENTICATED))}shutdown(){}}class oo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class so{constructor(e){this.t=e,this.currentUser=$i.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Zi(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let a=new ro;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ro,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=a;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Hi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Hi("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ro)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Hi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Zi("string"==typeof t.accessToken,31837,{l:t}),new ao(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Zi(null===e||"string"==typeof e,2055,{h:e}),new $i(e)}}class co{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=$i.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lo{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new co(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($i.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ho{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Zi(void 0===this.o,3512);const n=e=>{null!=e.error&&Hi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Hi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Hi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Hi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new uo(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Zi("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new uo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function fo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}class po{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=fo(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function mo(e,t){return e<t?-1:e>t?1:0}function go(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),a=t.charAt(r);if(n!==a)return bo(n)===bo(a)?mo(n,a):bo(n)?1:-1}return mo(e.length,t.length)}const yo=55296,vo=57343;function bo(e){const t=e.charCodeAt(0);return t>=yo&&t<=vo}function wo(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const xo="__name__";class Eo{constructor(e,t,n){void 0===t?t=0:t>e.length&&Xi(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Xi(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Eo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Eo?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Eo.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return mo(e.length,t.length)}static compareSegments(e,t){const n=Eo.isNumericId(e),r=Eo.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Eo.extractNumericId(e).compare(Eo.extractNumericId(t)):go(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}}class ko extends Eo{construct(e,t,n){return new ko(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new no(to.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new ko(t)}static emptyPath(){return new ko([])}}const So=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _o extends Eo{construct(e,t,n){return new _o(e,t,n)}static isValidIdentifier(e){return So.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_o.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===xo}static keyField(){return new _o([xo])}static fromServerFormat(e){const t=[];let n="",r=0;const a=()=>{if(0===n.length)throw new no(to.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new no(to.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new no(to.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(a(),r++)}if(a(),i)throw new no(to.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _o(t)}static emptyPath(){return new _o([])}}class No{constructor(e){this.path=e}static fromPath(e){return new No(ko.fromString(e))}static fromName(e){return new No(ko.fromString(e).popFirst(5))}static empty(){return new No(ko.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ko.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ko.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new No(new ko(e.slice()))}}function To(e,t,n){if(!n)throw new no(to.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Io(e){if(!No.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Co(e){if(No.isDocumentKey(e))throw new no(to.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ao(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Po(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Xi(12329,{type:typeof e})}function Oo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new no(to.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Po(e);throw new no(to.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ro(e,t){const n={typeString:e};return t&&(n.value=t),n}function Do(e,t){if(!Ao(e))throw new no(to.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const a=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(a&&typeof o!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(void 0!==i&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new no(to.INVALID_ARGUMENT,n);return!0}const Mo=-62135596800,Lo=1e6;class jo{static now(){return jo.fromMillis(Date.now())}static fromDate(e){return jo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Lo);return new jo(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new no(to.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mo)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new no(to.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Lo}_compareTo(e){return this.seconds===e.seconds?mo(this.nanoseconds,e.nanoseconds):mo(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jo._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Do(e,jo._jsonSchema))return new jo(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mo;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jo._jsonSchemaVersion="firestore/timestamp/1.0",jo._jsonSchema={type:Ro("string",jo._jsonSchemaVersion),seconds:Ro("number"),nanoseconds:Ro("number")};class Fo{static fromTimestamp(e){return new Fo(e)}static min(){return new Fo(new jo(0,0))}static max(){return new Fo(new jo(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Uo(e){return new Vo(e.readTime,e.key,-1)}class Vo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vo(Fo.min(),No.empty(),-1)}static max(){return new Vo(Fo.max(),No.empty(),-1)}}function zo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=No.comparator(e.documentKey,t.documentKey),0!==n?n:mo(e.largestBatchId,t.largestBatchId))}class Bo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function $o(e){if(e.code!==to.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Hi("LocalStore","Unexpectedly lost primary lease")}class qo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xi(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qo((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof qo?t:qo.resolve(t)}catch(e){return qo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):qo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):qo.reject(t)}static resolve(e){return new qo((t,n)=>{t(e)})}static reject(e){return new qo((t,n)=>{n(e)})}static waitFor(e){return new qo((t,n)=>{let r=0,a=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++a,i&&a===r&&t()},e=>n(e))}),i=!0,a===r&&t()})}static or(e){let t=qo.resolve(!1);for(const n of e)t=t.next(e=>e?qo.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new qo((n,r)=>{const a=e.length,i=new Array(a);let o=0;for(let s=0;s<a;s++){const c=s;t(e[c]).next(e=>{i[c]=e,++o,o===a&&n(i)},e=>r(e))}})}static doWhile(e,t){return new qo((n,r)=>{const a=()=>{!0===e()?t().next(()=>{a()},r):n()};a()})}}function Go(e){return"IndexedDbTransactionError"===e.name}class Wo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wo.ce=-1;function Ho(e){return null==e}function Ko(e){return 0===e&&1/e==-1/0}function Qo(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Yo(e){return e+""}const Xo="owner",Jo="mutationQueues",Zo="mutations",es="documentMutations",ts="remoteDocumentGlobal",ns="targets",rs="targetDocuments",as="targetGlobal",is="collectionParents",os="clientMetadata",ss="bundles",cs="namedQueries";function ls(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function us(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ds(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class hs{constructor(e,t){this.comparator=e,this.root=t||ps.EMPTY}insert(e,t){return new hs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new hs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fs(this.root,e,this.comparator,!0)}}class fs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,t,n,r,a){this.key=e,this.value=t,this.color=null!=n?n:ps.RED,this.left=null!=r?r:ps.EMPTY,this.right=null!=a?a:ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,a){return new ps(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const a=n(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ps.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xi(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xi(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xi(27949);return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new class{constructor(){this.size=0}get key(){throw Xi(57766)}get value(){throw Xi(16141)}get color(){throw Xi(16727)}get left(){throw Xi(29726)}get right(){throw Xi(36894)}copy(e,t,n,r,a){return this}insert(e,t,n){return new ps(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ms{constructor(e){this.comparator=e,this.data=new hs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gs(this.data.getIterator())}getIteratorFrom(e){return new gs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ms))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ms(this.comparator);return t.data=e,t}}class gs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ys{constructor(e){this.fields=e,e.sort(_o.comparator)}static empty(){return new ys([])}unionWith(e){let t=new ms(_o.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class vs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new vs("Invalid base64 string: "+e):e}}(e);return new bs(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mo(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bs.EMPTY_BYTE_STRING=new bs("");const ws=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xs(e){if(Zi(!!e,39018),"string"==typeof e){let t=0;const n=ws.exec(e);if(Zi(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Es(e.seconds),nanos:Es(e.nanos)}}function Es(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ks(e){return"string"==typeof e?bs.fromBase64String(e):bs.fromUint8Array(e)}const Ss="server_timestamp",_s="__type__",Ns="__previous_value__",Ts="__local_write_time__";function Is(e){const t=(e?.mapValue?.fields||{})[_s]?.stringValue;return t===Ss}function Cs(e){const t=e.mapValue.fields[Ns];return Is(t)?Cs(t):t}function As(e){const t=xs(e.mapValue.fields[Ts].timestampValue);return new jo(t.seconds,t.nanos)}class Ps{constructor(e,t,n,r,a,i,o,s,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l}}const Os="(default)";class Rs{constructor(e,t){this.projectId=e,this.database=t||Os}static empty(){return new Rs("","")}get isDefaultDatabase(){return this.database===Os}isEqual(e){return e instanceof Rs&&e.projectId===this.projectId&&e.database===this.database}}const Ds="__type__",Ms="__max__",Ls={fields:{__type__:{stringValue:Ms}}},js="__vector__",Fs="value";function Us(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Is(e)?4:nc(e)?9007199254740991:ec(e)?10:11:Xi(28295,{value:e})}function Vs(e,t){if(e===t)return!0;const n=Us(e);if(n!==Us(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return As(e).isEqual(As(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xs(e.timestampValue),r=xs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ks(e.bytesValue).isEqual(ks(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Es(e.geoPointValue.latitude)===Es(t.geoPointValue.latitude)&&Es(e.geoPointValue.longitude)===Es(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Es(e.integerValue)===Es(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Es(e.doubleValue),r=Es(t.doubleValue);return n===r?Ko(n)===Ko(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wo(e.arrayValue.values||[],t.arrayValue.values||[],Vs);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ls(n)!==ls(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!Vs(n[e],r[e])))return!1;return!0}(e,t);default:return Xi(52216,{left:e})}}function zs(e,t){return void 0!==(e.values||[]).find(e=>Vs(e,t))}function Bs(e,t){if(e===t)return 0;const n=Us(e),r=Us(t);if(n!==r)return mo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return mo(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Es(e.integerValue||e.doubleValue),r=Es(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $s(e.timestampValue,t.timestampValue);case 4:return $s(As(e),As(t));case 5:return go(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ks(e),r=ks(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=mo(n[e],r[e]);if(0!==t)return t}return mo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=mo(Es(e.latitude),Es(t.latitude));return 0!==n?n:mo(Es(e.longitude),Es(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return qs(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},a=n[Fs]?.arrayValue,i=r[Fs]?.arrayValue,o=mo(a?.values?.length||0,i?.values?.length||0);return 0!==o?o:qs(a,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ls&&t===Ls)return 0;if(e===Ls)return 1;if(t===Ls)return-1;const n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(let e=0;e<r.length&&e<i.length;++e){const t=go(r[e],i[e]);if(0!==t)return t;const o=Bs(n[r[e]],a[i[e]]);if(0!==o)return o}return mo(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Xi(23264,{he:n})}}function $s(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return mo(e,t);const n=xs(e),r=xs(t),a=mo(n.seconds,r.seconds);return 0!==a?a:mo(n.nanos,r.nanos)}function qs(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Bs(n[e],r[e]);if(t)return t}return mo(n.length,r.length)}function Gs(e){return Ws(e)}function Ws(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xs(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ks(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return No.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ws(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const a of t)r?r=!1:n+=",",n+=`${a}:${Ws(e.fields[a])}`;return n+"}"}(e.mapValue):Xi(61005,{value:e})}function Hs(e){switch(Us(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Cs(e);return t?16+Hs(t):16;case 5:return 2*e.stringValue.length;case 6:return ks(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Hs(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return us(e.fields,(e,n)=>{t+=e.length+Hs(n)}),t}(e.mapValue);default:throw Xi(13486,{value:e})}}function Ks(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Qs(e){return!!e&&"integerValue"in e}function Ys(e){return!!e&&"arrayValue"in e}function Xs(e){return!!e&&"nullValue"in e}function Js(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zs(e){return!!e&&"mapValue"in e}function ec(e){const t=(e?.mapValue?.fields||{})[Ds]?.stringValue;return t===js}function tc(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return us(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tc(e.arrayValue.values[n]);return t}return{...e}}function nc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ms}class rc{constructor(e){this.value=e}static empty(){return new rc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(t)}setAll(e){let t=_o.emptyPath(),n={},r=[];e.forEach((e,a)=>{if(!t.isImmediateParentOf(a)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=a.popLast()}e?n[a.lastSegment()]=tc(e):r.push(a.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,r)}delete(e){const t=this.field(e.popLast());Zs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){us(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new rc(tc(this.value))}}function ac(e){const t=[];return us(e.fields,(e,n)=>{const r=new _o([e]);if(Zs(n)){const e=ac(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ys(t)}class ic{constructor(e,t,n,r,a,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new ic(e,0,Fo.min(),Fo.min(),Fo.min(),rc.empty(),0)}static newFoundDocument(e,t,n,r){return new ic(e,1,t,Fo.min(),n,r,0)}static newNoDocument(e,t){return new ic(e,2,t,Fo.min(),Fo.min(),rc.empty(),0)}static newUnknownDocument(e,t){return new ic(e,3,t,Fo.min(),Fo.min(),rc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ic&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ic(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oc{constructor(e,t){this.position=e,this.inclusive=t}}function sc(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const i=t[a],o=e.position[a];if(r=i.field.isKeyField()?No.comparator(No.fromName(o.referenceValue),n.key):Bs(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function cc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vs(e.position[n],t.position[n]))return!1;return!0}class lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function uc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dc{}class hc extends dc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new bc(e,t,n):"array-contains"===t?new kc(e,n):"in"===t?new Sc(e,n):"not-in"===t?new _c(e,n):"array-contains-any"===t?new Nc(e,n):new hc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new wc(e,n):new xc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Bs(t,this.value)):null!==t&&Us(this.value)===Us(t)&&this.matchesComparison(Bs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xi(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fc extends dc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fc(e,t)}matches(e){return pc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pc(e){return"and"===e.op}function mc(e){return function(e){for(const t of e.filters)if(t instanceof fc)return!1;return!0}(e)&&pc(e)}function gc(e){if(e instanceof hc)return e.field.canonicalString()+e.op.toString()+Gs(e.value);if(mc(e))return e.filters.map(e=>gc(e)).join(",");{const t=e.filters.map(e=>gc(e)).join(",");return`${e.op}(${t})`}}function yc(e,t){return e instanceof hc?function(e,t){return t instanceof hc&&e.op===t.op&&e.field.isEqual(t.field)&&Vs(e.value,t.value)}(e,t):e instanceof fc?function(e,t){return t instanceof fc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&yc(n,t.filters[r]),!0)}(e,t):void Xi(19439)}function vc(e){return e instanceof hc?function(e){return`${e.field.canonicalString()} ${e.op} ${Gs(e.value)}`}(e):e instanceof fc?function(e){return e.op.toString()+" {"+e.getFilters().map(vc).join(" ,")+"}"}(e):"Filter"}class bc extends hc{constructor(e,t,n){super(e,t,n),this.key=No.fromName(n.referenceValue)}matches(e){const t=No.comparator(e.key,this.key);return this.matchesComparison(t)}}class wc extends hc{constructor(e,t){super(e,"in",t),this.keys=Ec(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xc extends hc{constructor(e,t){super(e,"not-in",t),this.keys=Ec(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ec(e,t){return(t.arrayValue?.values||[]).map(e=>No.fromName(e.referenceValue))}class kc extends hc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ys(t)&&zs(t.arrayValue,this.value)}}class Sc extends hc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zs(this.value.arrayValue,t)}}class _c extends hc{constructor(e,t){super(e,"not-in",t)}matches(e){if(zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!zs(this.value.arrayValue,t)}}class Nc extends hc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ys(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zs(this.value.arrayValue,e))}}class Tc{constructor(e,t=null,n=[],r=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function Ic(e,t=null,n=[],r=[],a=null,i=null,o=null){return new Tc(e,t,n,r,a,i,o)}function Cc(e){const t=eo(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>gc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ho(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Gs(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Gs(e)).join(",")),t.Te=e}return t.Te}function Ac(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!yc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cc(e.startAt,t.startAt)&&cc(e.endAt,t.endAt)}function Pc(e){return No.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Oc{constructor(e,t=null,n=[],r=[],a=null,i="F",o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rc(e){return new Oc(e)}function Dc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mc(e){return null!==e.collectionGroup}function Lc(e){const t=eo(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ms(_o.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new lc(r,n))}),e.has(_o.keyField().canonicalString())||t.Ie.push(new lc(_o.keyField(),n))}return t.Ie}function jc(e){const t=eo(e);return t.Ee||(t.Ee=function(e,t){if("F"===e.limitType)return Ic(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new lc(e.field,t)});const n=e.endAt?new oc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new oc(e.startAt.position,e.startAt.inclusive):null;return Ic(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Lc(e))),t.Ee}function Fc(e,t){const n=e.filters.concat([t]);return new Oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Uc(e,t,n){return new Oc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vc(e,t){return Ac(jc(e),jc(t))&&e.limitType===t.limitType}function zc(e){return`${Cc(jc(e))}|lt:${e.limitType}`}function Bc(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>vc(e)).join(", ")}]`),Ho(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Gs(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Gs(e)).join(",")),`Target(${t})`}(jc(e))}; limitType=${e.limitType})`}function $c(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):No.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Lc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=sc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Lc(e),t)||e.endAt&&!function(e,t,n){const r=sc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Lc(e),t))}(e,t)}function qc(e){return(t,n)=>{let r=!1;for(const a of Lc(e)){const e=Gc(a,t,n);if(0!==e)return e;r=r||a.field.isKeyField()}return 0}}function Gc(e,t,n){const r=e.field.isKeyField()?No.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?Bs(r,a):Xi(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Xi(19790,{direction:e.dir})}}class Wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return ds(this.inner)}size(){return this.innerSize}}const Hc=new hs(No.comparator);function Kc(){return Hc}const Qc=new hs(No.comparator);function Yc(...e){let t=Qc;for(const n of e)t=t.insert(n.key,n);return t}function Xc(e){let t=Qc;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Jc(){return el()}function Zc(){return el()}function el(){return new Wc(e=>e.toString(),(e,t)=>e.isEqual(t))}const tl=new hs(No.comparator),nl=new ms(No.comparator);function rl(...e){let t=nl;for(const n of e)t=t.add(n);return t}const al=new ms(mo);function il(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ko(t)?"-0":t}}function ol(e){return{integerValue:""+e}}function sl(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ko(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?ol(t):il(e,t)}class cl{constructor(){this._=void 0}}function ll(e,t,n){return e instanceof hl?function(e,t){const n={fields:{[_s]:{stringValue:Ss},[Ts]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Is(t)&&(t=Cs(t)),t&&(n.fields[Ns]=t),{mapValue:n}}(n,t):e instanceof fl?pl(e,t):e instanceof ml?gl(e,t):function(e,t){const n=dl(e,t),r=vl(n)+vl(e.Ae);return Qs(n)&&Qs(e.Ae)?ol(r):il(e.serializer,r)}(e,t)}function ul(e,t,n){return e instanceof fl?pl(e,t):e instanceof ml?gl(e,t):n}function dl(e,t){return e instanceof yl?function(e){return Qs(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class hl extends cl{}class fl extends cl{constructor(e){super(),this.elements=e}}function pl(e,t){const n=bl(t);for(const t of e.elements)n.some(e=>Vs(e,t))||n.push(t);return{arrayValue:{values:n}}}class ml extends cl{constructor(e){super(),this.elements=e}}function gl(e,t){let n=bl(t);for(const t of e.elements)n=n.filter(e=>!Vs(e,t));return{arrayValue:{values:n}}}class yl extends cl{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function vl(e){return Es(e.integerValue||e.doubleValue)}function bl(e){return Ys(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class wl{constructor(e,t){this.version=e,this.transformResults=t}}class xl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xl}static exists(e){return new xl(void 0,e)}static updateTime(e){return new xl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function El(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class kl{}function Sl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Dl(e.key,xl.none()):new Cl(e.key,e.data,xl.none());{const n=e.data,r=rc.empty();let a=new ms(_o.comparator);for(let e of t.fields)if(!a.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),a=a.add(e)}return new Al(e.key,r,new ys(a.toArray()),xl.none())}}function _l(e,t,n){e instanceof Cl?function(e,t,n){const r=e.value.clone(),a=Ol(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Al?function(e,t,n){if(!El(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ol(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(Pl(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nl(e,t,n,r){return e instanceof Cl?function(e,t,n,r){if(!El(e.precondition,t))return n;const a=e.value.clone(),i=Rl(e.fieldTransforms,r,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof Al?function(e,t,n,r){if(!El(e.precondition,t))return n;const a=Rl(e.fieldTransforms,r,t),i=t.data;return i.setAll(Pl(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return El(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Tl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),a=dl(r.transform,e||null);null!=a&&(null===n&&(n=rc.empty()),n.set(r.field,a))}return n||null}function Il(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&wo(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof fl&&t instanceof fl||e instanceof ml&&t instanceof ml?wo(e.elements,t.elements,Vs):e instanceof yl&&t instanceof yl?Vs(e.Ae,t.Ae):e instanceof hl&&t instanceof hl}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Cl extends kl{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Al extends kl{constructor(e,t,n,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Pl(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ol(e,t,n){const r=new Map;Zi(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let a=0;a<n.length;a++){const i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,ul(o,s,n[a]))}return r}function Rl(e,t,n){const r=new Map;for(const a of e){const e=a.transform,i=n.data.field(a.field);r.set(a.field,ll(e,i,t))}return r}class Dl extends kl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ml extends kl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ll{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&_l(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zc();return this.mutations.forEach(r=>{const a=e.get(r.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=t.has(r.key)?null:o;const s=Sl(i,o);null!==s&&n.set(r.key,s),i.isValidDocument()||i.convertToNoDocument(Fo.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rl())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(e,t)=>Il(e,t))&&wo(this.baseMutations,e.baseMutations,(e,t)=>Il(e,t))}}class jl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Zi(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=tl;const a=e.mutations;for(let e=0;e<a.length;e++)r=r.insert(a[e].key,n[e].version);return new jl(e,t,n,r)}}class Fl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ul{constructor(e,t){this.count=e,this.unchangedNames=t}}var Vl,zl;function Bl(e){if(void 0===e)return Ki("GRPC error has no .code"),to.UNKNOWN;switch(e){case Vl.OK:return to.OK;case Vl.CANCELLED:return to.CANCELLED;case Vl.UNKNOWN:return to.UNKNOWN;case Vl.DEADLINE_EXCEEDED:return to.DEADLINE_EXCEEDED;case Vl.RESOURCE_EXHAUSTED:return to.RESOURCE_EXHAUSTED;case Vl.INTERNAL:return to.INTERNAL;case Vl.UNAVAILABLE:return to.UNAVAILABLE;case Vl.UNAUTHENTICATED:return to.UNAUTHENTICATED;case Vl.INVALID_ARGUMENT:return to.INVALID_ARGUMENT;case Vl.NOT_FOUND:return to.NOT_FOUND;case Vl.ALREADY_EXISTS:return to.ALREADY_EXISTS;case Vl.PERMISSION_DENIED:return to.PERMISSION_DENIED;case Vl.FAILED_PRECONDITION:return to.FAILED_PRECONDITION;case Vl.ABORTED:return to.ABORTED;case Vl.OUT_OF_RANGE:return to.OUT_OF_RANGE;case Vl.UNIMPLEMENTED:return to.UNIMPLEMENTED;case Vl.DATA_LOSS:return to.DATA_LOSS;default:return Xi(39323,{code:e})}}(zl=Vl||(Vl={}))[zl.OK=0]="OK",zl[zl.CANCELLED=1]="CANCELLED",zl[zl.UNKNOWN=2]="UNKNOWN",zl[zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zl[zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zl[zl.NOT_FOUND=5]="NOT_FOUND",zl[zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",zl[zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",zl[zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",zl[zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zl[zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zl[zl.ABORTED=10]="ABORTED",zl[zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",zl[zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",zl[zl.INTERNAL=13]="INTERNAL",zl[zl.UNAVAILABLE=14]="UNAVAILABLE",zl[zl.DATA_LOSS=15]="DATA_LOSS";const $l=new Ti([4294967295,4294967295],0);function ql(e){const t=(new TextEncoder).encode(e),n=new Ii;return n.update(t),new Uint8Array(n.digest())}function Gl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Ti([n,r],0),new Ti([a,i],0)]}class Wl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Hl(`Invalid padding: ${t}`);if(n<0)throw new Hl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Hl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Hl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ti.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ti.fromNumber(n)));return 1===r.compare($l)&&(r=new Ti([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=ql(e),[n,r]=Gl(t);for(let e=0;e<this.hashCount;e++){const t=this.ye(n,r,e);if(!this.we(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new Wl(a,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=ql(e),[n,r]=Gl(t);for(let e=0;e<this.hashCount;e++){const t=this.ye(n,r,e);this.Se(t)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Hl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kl{constructor(e,t,n,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Kl(Fo.min(),r,new hs(mo),Kc(),rl())}}class Ql{constructor(e,t,n,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ql(n,t,rl(),rl(),rl())}}class Yl{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Xl{constructor(e,t){this.targetId=e,this.Ce=t}}class Jl{constructor(e,t,n=bs.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Zl{constructor(){this.ve=0,this.Fe=nu(),this.Me=bs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rl(),t=rl(),n=rl();return this.Fe.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Xi(38017,{changeType:a})}}),new Ql(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=nu()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Zi(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eu{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kc(),this.Je=tu(),this.He=tu(),this.Ye=new hs(mo)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Xi(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(Pc(a))if(0===n){const e=new No(a.path);this.et(t,e,ic.newNoDocument(e,Fo.min()))}else Zi(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),a=n?this.ct(n,e,r):1;if(0!==a){this.it(t);const e=2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:a=0}=t;let i,o;try{i=ks(n).toUint8Array()}catch(e){if(e instanceof vs)return Qi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Wl(i,r,a)}catch(e){return Qi(e instanceof Hl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const a=this.Ge.ht(),i=`projects/${a.projectId}/databases/${a.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const a=this.ot(r);if(a){if(n.current&&Pc(a.target)){const t=new No(a.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ic.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=rl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Kl(e,t,this.Ye,this.je,n);return this.je=Kc(),this.Je=tu(),this.He=tu(),this.Ye=new hs(mo),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Zl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ms(mo),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ms(mo),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Hi("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function tu(){return new hs(No.comparator)}function nu(){return new hs(No.comparator)}const ru={asc:"ASCENDING",desc:"DESCENDING"},au={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iu={and:"AND",or:"OR"};class ou{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function su(e,t){return e.useProto3Json||Ho(t)?t:{value:t}}function cu(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function uu(e,t){return cu(e,t.toTimestamp())}function du(e){return Zi(!!e,49232),Fo.fromTimestamp(function(e){const t=xs(e);return new jo(t.seconds,t.nanos)}(e))}function hu(e,t){return fu(e,t).canonicalString()}function fu(e,t){const n=function(e){return new ko(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function pu(e){const t=ko.fromString(e);return Zi(Ou(t),10190,{key:t.toString()}),t}function mu(e,t){return hu(e.databaseId,t.path)}function gu(e,t){const n=pu(t);if(n.get(1)!==e.databaseId.projectId)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new no(to.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new No(bu(n))}function yu(e,t){return hu(e.databaseId,t)}function vu(e){return new ko(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bu(e){return Zi(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function wu(e,t,n){return{name:mu(e,t),fields:n.value.mapValue.fields}}function xu(e,t){return{documents:[yu(e,t.path)]}}function Eu(e,t){const n={structuredQuery:{}},r=t.path;let a;null!==t.collectionGroup?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yu(e,a);const i=function(e){if(0!==e.length)return Au(fc.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Iu(e.field),direction:_u(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=su(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:a}}function ku(e){let t=function(e){const t=pu(e);return 4===t.length?ko.emptyPath():bu(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){Zi(1===r,65062);const e=n.from[0];e.allDescendants?a=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Su(e);return t instanceof fc&&mc(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new lc(Cu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Ho(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new oc(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new oc(n,t)}(n.endAt)),function(e,t,n,r,a,i,o,s){return new Oc(e,t,n,r,a,i,o,s)}(t,a,o,i,s,"F",c,l)}function Su(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Cu(e.unaryFilter.field);return hc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Cu(e.unaryFilter.field);return hc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Cu(e.unaryFilter.field);return hc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cu(e.unaryFilter.field);return hc.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xi(61313);default:return Xi(60726)}}(e):void 0!==e.fieldFilter?function(e){return hc.create(Cu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xi(58110);default:return Xi(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fc.create(e.compositeFilter.filters.map(e=>Su(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Xi(1026)}}(e.compositeFilter.op))}(e):Xi(30097,{filter:e})}function _u(e){return ru[e]}function Nu(e){return au[e]}function Tu(e){return iu[e]}function Iu(e){return{fieldPath:e.canonicalString()}}function Cu(e){return _o.fromServerFormat(e.fieldPath)}function Au(e){return e instanceof hc?function(e){if("=="===e.op){if(Js(e.value))return{unaryFilter:{field:Iu(e.field),op:"IS_NAN"}};if(Xs(e.value))return{unaryFilter:{field:Iu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Js(e.value))return{unaryFilter:{field:Iu(e.field),op:"IS_NOT_NAN"}};if(Xs(e.value))return{unaryFilter:{field:Iu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iu(e.field),op:Nu(e.op),value:e.value}}}(e):e instanceof fc?function(e){const t=e.getFilters().map(e=>Au(e));return 1===t.length?t[0]:{compositeFilter:{op:Tu(e.op),filters:t}}}(e):Xi(54877,{filter:e})}function Pu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ou(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ru{constructor(e,t,n,r,a=Fo.min(),i=Fo.min(),o=bs.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(e){return new Ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Du{constructor(e){this.yt=e}}function Mu(e){const t=ku({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Uc(t,t.limit,"L"):t}class Lu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Es(e.integerValue));else if("doubleValue"in e){const n=Es(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ko(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=xs(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ks(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?nc(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ec(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Xi(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Fs,a=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Es(a)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),No.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Lu.Kt=new Lu;class ju{constructor(){this.Cn=new Fu}addToCollectionParentIndex(e,t){return this.Cn.add(t),qo.resolve()}getCollectionParents(e,t){return qo.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return qo.resolve()}deleteFieldIndex(e,t){return qo.resolve()}deleteAllFieldIndexes(e){return qo.resolve()}createTargetIndexes(e,t){return qo.resolve()}getDocumentsMatchingTarget(e,t){return qo.resolve(null)}getIndexType(e,t){return qo.resolve(0)}getFieldIndexes(e,t){return qo.resolve([])}getNextCollectionGroupToUpdate(e){return qo.resolve(null)}getMinOffset(e,t){return qo.resolve(Vo.min())}getMinOffsetFromCollectionGroup(e,t){return qo.resolve(Vo.min())}updateCollectionGroup(e,t,n){return qo.resolve()}updateIndexEntries(e,t){return qo.resolve()}}class Fu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ms(ko.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ms(ko.comparator)).toArray()}}new Uint8Array(0);const Uu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vu=41943040;class zu{static withCacheSize(e){return new zu(e,zu.DEFAULT_COLLECTION_PERCENTILE,zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}zu.DEFAULT_COLLECTION_PERCENTILE=10,zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zu.DEFAULT=new zu(Vu,zu.DEFAULT_COLLECTION_PERCENTILE,zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zu.DISABLED=new zu(-1,0,0);class Bu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bu(0)}static cr(){return new Bu(-1)}}const $u="LruGarbageCollector";function qu([e,t],[n,r]){const a=mo(e,n);return 0===a?mo(t,r):a}class Gu{constructor(e){this.Ir=e,this.buffer=new ms(qu),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();qu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Hi($u,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Go(e)?Hi($u,"Ignoring IndexedDB error during garbage collection: ",e):await $o(e)}await this.Vr(3e5)})}}class Hu{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return qo.resolve(Wo.ce);const n=new Gu(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Hi("LruGarbageCollector","Garbage collection skipped; disabled"),qo.resolve(Uu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Hi("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uu):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,a,i,o,s,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Hi("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(a=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),Wi()<=Ze.DEBUG&&Hi("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-l}ms\n\tDetermined least recently used ${r} in `+(o-i)+"ms\n"+`\tRemoved ${a} targets in `+(s-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-s)+"ms\n"+`Total Duration: ${c-l}ms`),qo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})))}}class Ku{constructor(){this.changes=new Wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ic.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Qu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Yu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Nl(n.mutation,e,ys.empty(),jo.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,rl()).next(()=>t))}getLocalViewOfDocuments(e,t,n=rl()){const r=Jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Yc();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Jc();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,rl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let a=Kc();const i=el(),o=el();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Al)?a=a.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Nl(o.mutation,t,o.mutation.getFieldMask(),jo.now())):i.set(t.key,ys.empty())}),this.recalculateAndSaveOverlays(e,a).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>o.set(e,new Qu(t,i.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=el();let r=new hs((e,t)=>e-t),a=rl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const a of e)a.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||ys.empty();o=a.applyToLocalView(i,o),n.set(e,o);const s=(r.get(a.batchId)||rl()).add(e);r=r.insert(a.batchId,s)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),s=r.key,c=r.value,l=Zc();c.forEach(e=>{if(!a.has(e)){const r=Sl(t.get(e),n.get(e));null!==r&&l.set(e,r),a=a.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,s,l))}return qo.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return No.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(a=>{const i=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):qo.resolve(Jc());let o=-1,s=a;return i.next(t=>qo.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),a.get(t)?qo.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,a)).next(()=>this.computeViews(e,s,t,rl())).next(e=>({batchId:o,changes:Xc(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new No(t)).next(e=>{let t=Yc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const a=t.collectionGroup;let i=Yc();return this.indexManager.getCollectionParents(e,a).next(o=>qo.forEach(o,o=>{const s=function(e,t){return new Oc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,r))).next(e=>{a.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ic.newInvalidDocument(r)))});let n=Yc();return e.forEach((e,r)=>{const i=a.get(e);void 0!==i&&Nl(i.mutation,r,ys.empty(),jo.now()),$c(t,r)&&(n=n.insert(e,r))}),n})}}class Xu{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return qo.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:du(e.createTime)}}(t)),qo.resolve()}getNamedQuery(e,t){return qo.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Mu(e.bundledQuery),readTime:du(e.readTime)}}(t)),qo.resolve()}}class Ju{constructor(){this.overlays=new hs(No.comparator),this.qr=new Map}getOverlay(e,t){return qo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Jc();return qo.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),qo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),qo.resolve()}getOverlaysForCollection(e,t,n){const r=Jc(),a=t.length+1,i=new No(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===a&&e.largestBatchId>n&&r.set(e.getKey(),e)}return qo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let a=new hs((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=a.get(e.largestBatchId);null===t&&(t=Jc(),a=a.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Jc(),s=a.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return qo.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Fl(t,n));let a=this.qr.get(t);void 0===a&&(a=rl(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}class Zu{constructor(){this.sessionToken=bs.EMPTY_BYTE_STRING}getSessionToken(e){return qo.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,qo.resolve()}}class ed{constructor(){this.Qr=new ms(td.$r),this.Ur=new ms(td.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new td(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new td(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new No(new ko([])),n=new td(t,e),r=new td(t,e+1),a=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),a.push(e.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new No(new ko([])),n=new td(t,e),r=new td(t,e+1);let a=rl();return this.Ur.forEachInRange([n,r],e=>{a=a.add(e.key)}),a}containsKey(e){const t=new td(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class td{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return No.comparator(e.key,t.key)||mo(e.Yr,t.Yr)}static Kr(e,t){return mo(e.Yr,t.Yr)||No.comparator(e.key,t.key)}}class nd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ms(td.$r)}checkEmpty(e){return qo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Ll(a,t,n,r);this.mutationQueue.push(i);for(const t of r)this.Zr=this.Zr.add(new td(t.key,a)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return qo.resolve(i)}lookupMutationBatch(e,t){return qo.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),a=r<0?0:r;return qo.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return qo.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return qo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new td(t,0),r=new td(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);a.push(t)}),qo.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ms(mo);return t.forEach(e=>{const t=new td(e,0),r=new td(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),qo.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let a=n;No.isDocumentKey(a)||(a=a.child(""));const i=new td(new No(a),0);let o=new ms(mo);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},i),qo.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Zi(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return qo.forEach(t.mutations,r=>{const a=new td(r.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new td(t,0),r=this.Zr.firstAfterOrEqual(n);return qo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,qo.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rd{constructor(e){this.ri=e,this.docs=new hs(No.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qo.resolve(n?n.document.mutableCopy():ic.newInvalidDocument(t))}getEntries(e,t){let n=Kc();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ic.newInvalidDocument(e))}),qo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let a=Kc();const i=t.path,o=new No(i.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){const{key:e,value:{document:o}}=s.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||zo(Uo(o),n)<=0||(r.has(o.key)||$c(t,o))&&(a=a.insert(o.key,o.mutableCopy()))}return qo.resolve(a)}getAllFromCollectionGroup(e,t,n,r){Xi(9500)}ii(e,t){return qo.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ad(this)}getSize(e){return qo.resolve(this.size)}}class ad extends Ku{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),qo.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class id{constructor(e){this.persistence=e,this.si=new Wc(e=>Cc(e),Ac),this.lastRemoteSnapshotVersion=Fo.min(),this.highestTargetId=0,this.oi=0,this._i=new ed,this.targetCount=0,this.ai=Bu.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),qo.resolve()}getLastRemoteSnapshotVersion(e){return qo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qo.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),qo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),qo.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,qo.resolve()}updateTargetData(e,t){return this.Pr(t),qo.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,qo.resolve()}removeTargets(e,t,n){let r=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),qo.waitFor(a).next(()=>r)}getTargetCount(e){return qo.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return qo.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),qo.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach(t=>{a.push(r.markPotentiallyOrphaned(e,t))}),qo.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),qo.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return qo.resolve(n)}containsKey(e,t){return qo.resolve(this._i.containsKey(t))}}class od{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wo(0),this.li=!1,this.li=!0,this.hi=new Zu,this.referenceDelegate=e(this),this.Pi=new id(this),this.indexManager=new ju,this.remoteDocumentCache=function(e){return new rd(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Du(t),this.Ii=new Xu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ju,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new nd(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Hi("MemoryPersistence","Starting transaction:",e);const r=new sd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return qo.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class sd extends Bo{constructor(e){super(),this.currentSequenceNumber=e}}class cd{constructor(e){this.persistence=e,this.Ri=new ed,this.Vi=null}static mi(e){return new cd(e)}get fi(){if(this.Vi)return this.Vi;throw Xi(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),qo.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),qo.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),qo.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qo.forEach(this.fi,n=>{const r=No.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Fo.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return qo.or([()=>qo.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class ld{constructor(e,t){this.persistence=e,this.pi=new Wc(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Yo(t)),t=Qo(e.get(n),t);return Yo(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Hu(e,t)}(this,t)}static mi(e,t){return new ld(e,t)}Ei(){}di(e){return qo.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return qo.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?qo.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,a.removeEntry(r,Fo.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),qo.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),qo.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),qo.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),qo.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hs(e.data.value)),t}br(e,t,n){return qo.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return qo.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ud{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=rl(),r=rl();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new ud(e,t.fromCache,n,r)}}class dd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class hd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Re()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Pe())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const a={result:null};return this.ys(e,t).next(e=>{a.result=e}).next(()=>{if(!a.result)return this.ws(e,t,r,n).next(e=>{a.result=e})}).next(()=>{if(a.result)return;const n=new dd;return this.Ss(e,t,n).next(r=>{if(a.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>a.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Wi()<=Ze.DEBUG&&Hi("QueryEngine","SDK will not create cache indexes for query:",Bc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),qo.resolve()):(Wi()<=Ze.DEBUG&&Hi("QueryEngine","Query:",Bc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Wi()<=Ze.DEBUG&&Hi("QueryEngine","The SDK decides to create cache indexes for query:",Bc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jc(t))):qo.resolve())}ys(e,t){if(Dc(t))return qo.resolve(null);let n=jc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Uc(t,null,"F"),n=jc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const a=rl(...r);return this.ps.getDocuments(e,a).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,a,n.readTime)?this.ys(e,Uc(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Dc(t)||r.isEqual(Fo.min())?qo.resolve(null):this.ps.getDocuments(e,n).next(a=>{const i=this.Ds(t,a);return this.Cs(t,i,n,r)?qo.resolve(null):(Wi()<=Ze.DEBUG&&Hi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bc(t)),this.vs(e,i,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Fo.fromTimestamp(1e9===r?new jo(n+1,0):new jo(n,r));return new Vo(a,No.empty(),t)}(r,-1)).next(e=>e))})}Ds(e,t){let n=new ms(qc(e));return t.forEach((t,r)=>{$c(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,n){return Wi()<=Ze.DEBUG&&Hi("QueryEngine","Using full collection scan to execute query:",Bc(t)),this.ps.getDocumentsMatchingQuery(e,t,Vo.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const fd="LocalStore";class pd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new hs(mo),this.xs=new Wc(e=>Cc(e),Ac),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yu(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function md(e,t){const n=eo(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(a=>(r=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const a=[],i=[];let o=rl();for(const e of r){a.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:a,addedBatchIds:i}))})})}function gd(e){const t=eo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function yd(e,t){const n=eo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function vd(e,t,n){const r=eo(e),a=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,a))}catch(e){if(!Go(e))throw e;Hi(fd,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(a.target)}function bd(e,t,n){const r=eo(e);let a=Fo.min(),i=rl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=eo(e),a=r.xs.get(n);return void 0!==a?qo.resolve(r.Ms.get(a)):r.Pi.getTargetData(t,n)}(r,e,jc(t)).next(t=>{if(t)return a=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?a:Fo.min(),n?i:rl())).next(e=>(function(e,t,n){let r=e.Os.get(t)||Fo.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,Qs:i})))}class wd{constructor(){this.activeTargetIds=al}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xd{constructor(){this.Mo=new wd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wd,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ed{Oo(e){}shutdown(){}}const kd="ConnectivityMonitor";class Sd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Hi(kd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Hi(kd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let _d=null;function Nd(){return null===_d?_d=268435456+Math.round(2147483648*Math.random()):_d++,"0x"+_d.toString(16)}const Td="RestConnection",Id={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Cd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Os?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,a){const i=Nd(),o=this.zo(e,t.toUriEncodedString());Hi(Td,`Sending RPC '${e}' ${i}:`,o,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,a);const{host:c}=new URL(o),l=Ne(c);return this.Jo(e,o,s,n,l).then(t=>(Hi(Td,`Received RPC '${e}' ${i}: `,t),t),t=>{throw Qi(Td,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,a,i){return this.Go(e,t,n,r,a)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+qi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Id[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Ad{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Pd="WebChannelConnection";class Od extends Cd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,a){const i=Nd();return new Promise((a,o)=>{const s=new Pi;s.setWithCredentials(!0),s.listenOnce(Ri.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case Di.NO_ERROR:const t=s.getResponseJson();Hi(Pd,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),a(t);break;case Di.TIMEOUT:Hi(Pd,`RPC '${e}' ${i} timed out`),o(new no(to.DEADLINE_EXCEEDED,"Request time out"));break;case Di.HTTP_ERROR:const n=s.getStatus();if(Hi(Pd,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(to).indexOf(t)>=0?t:to.UNKNOWN}(t.status);o(new no(e,t.message))}else o(new no(to.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new no(to.UNAVAILABLE,"Connection failed."));break;default:Xi(9055,{l_:e,streamId:i,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{Hi(Pd,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(r);Hi(Pd,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",c,n,15)})}T_(e,t,n){const r=Nd(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Fi(),o=ji(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=a.join("");Hi(Pd,`Creating RPC '${e}' stream ${r}: ${l}`,s);const u=i.createWebChannel(l,s);this.I_(u);let d=!1,h=!1;const f=new Ad({Yo:t=>{h?Hi(Pd,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Hi(Pd,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Hi(Pd,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Oi.EventType.OPEN,()=>{h||(Hi(Pd,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(u,Oi.EventType.CLOSE,()=>{h||(h=!0,Hi(Pd,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(u))}),p(u,Oi.EventType.ERROR,t=>{h||(h=!0,Qi(Pd,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new no(to.UNAVAILABLE,"The operation could not be completed")))}),p(u,Oi.EventType.MESSAGE,t=>{if(!h){const n=t.data[0];Zi(!!n,16349);const a=n,i=a?.error||a[0]?.error;if(i){Hi(Pd,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=Vl[e];if(void 0!==t)return Bl(t)}(t),a=i.message;void 0===n&&(n=to.INTERNAL,a="Unknown error status: "+t+" with message "+i.message),h=!0,f.a_(new no(n,a)),u.close()}else Hi(Pd,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(o,Li.STAT_EVENT,t=>{t.stat===Mi.PROXY?Hi(Pd,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Mi.NOPROXY&&Hi(Pd,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Rd(){return"undefined"!=typeof document?document:null}function Dd(e){return new ou(e,!0)}class Md{constructor(e,t,n=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Hi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ld="PersistentStream";class jd{constructor(e,t,n,r,a,i,o,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Md(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===to.RESOURCE_EXHAUSTED?(Ki(t.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===to.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.D_===t&&this.G_(e,n)},t=>{e(()=>{const e=new no(to.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Hi(Ld,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Hi(Ld,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fd extends jd{constructor(e,t,n,r,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Xi(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Zi(void 0===t||"string"==typeof t,58123),bs.fromBase64String(t||"")):(Zi(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){const t=void 0===e.code?to.UNKNOWN:Bl(e.code);return new no(t,e.message||"")}(o);n=new Jl(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=gu(e,r.document.name),i=du(r.document.updateTime),o=r.document.createTime?du(r.document.createTime):Fo.min(),s=new rc({mapValue:{fields:r.document.fields}}),c=ic.newFoundDocument(a,i,o,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Yl(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=gu(e,r.document),i=r.readTime?du(r.readTime):Fo.min(),o=ic.newNoDocument(a,i),s=r.removedTargetIds||[];n=new Yl([],s,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=gu(e,r.document),i=r.removedTargetIds||[];n=new Yl([],i,a,null)}else{if(!("filter"in t))return Xi(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:a}=e,i=new Ul(r,a),o=e.targetId;n=new Xl(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Fo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Fo.min():t.readTime?du(t.readTime):Fo.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=vu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pc(r)?{documents:xu(e,r)}:{query:Eu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=lu(e,t.resumeToken);const r=su(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Fo.min())>0){n.readTime=cu(e,t.snapshotVersion.toTimestamp());const r=su(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xi(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=vu(this.serializer),t.removeTarget=e,this.q_(t)}}class Ud extends jd{constructor(e,t,n,r,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Zi(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Zi(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Zi(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Zi(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?du(e.updateTime):du(t);return n.isEqual(Fo.min())&&(n=du(t)),new wl(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=du(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=vu(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof Cl)n={update:wu(e,t.key,t.value)};else if(t instanceof Dl)n={delete:mu(e,t.key)};else if(t instanceof Al)n={update:wu(e,t.key,t.data),updateMask:Pu(t.fieldMask)};else{if(!(t instanceof Ml))return Xi(16599,{Vt:t.type});n={verify:mu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof hl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof fl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ml)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Xi(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:uu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Xi(27497)}(e,t.precondition)),n}(this.serializer,e))};this.q_(t)}}class Vd{}class zd extends Vd{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,fu(t,n),r,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())})}Ho(e,t,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,fu(t,n),r,i,o,a)).catch(e=>{throw"FirebaseError"===e.name?(e.code===to.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new no(to.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Bd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(t),this.aa=!1):Hi("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const $d="RemoteStore";class qd{constructor(e,t,n,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Zd(this)&&(Hi($d,"Restarting streams for network reachability change."),await async function(e){const t=eo(e);t.Ea.add(4),await Wd(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Gd(t)}(this))})}),this.Ra=new Bd(n,r)}}async function Gd(e){if(Zd(e))for(const t of e.da)await t(!0)}async function Wd(e){for(const t of e.da)await t(!1)}function Hd(e,t){const n=eo(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Jd(n)?Xd(n):yh(n).O_()&&Qd(n,t))}function Kd(e,t){const n=eo(e),r=yh(n);n.Ia.delete(t),r.O_()&&Yd(n,t),0===n.Ia.size&&(r.O_()?r.L_():Zd(n)&&n.Ra.set("Unknown"))}function Qd(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}yh(e).Y_(t)}function Yd(e,t){e.Va.Ue(t),yh(e).Z_(t)}function Xd(e){e.Va=new eu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),yh(e).start(),e.Ra.ua()}function Jd(e){return Zd(e)&&!yh(e).x_()&&e.Ia.size>0}function Zd(e){return 0===eo(e).Ea.size}function eh(e){e.Va=void 0}async function th(e){e.Ra.set("Online")}async function nh(e){e.Ia.forEach((t,n)=>{Qd(e,t)})}async function rh(e,t){eh(e),Jd(e)?(e.Ra.ha(t),Xd(e)):e.Ra.set("Unknown")}async function ah(e,t,n){if(e.Ra.set("Online"),t instanceof Jl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Hi($d,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ih(e,n)}else if(t instanceof Yl?e.Va.Ze(t):t instanceof Xl?e.Va.st(t):e.Va.tt(t),!n.isEqual(Fo.min()))try{const t=await gd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const a=e.Ia.get(r);a&&e.Ia.set(r,a.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(bs.EMPTY_BYTE_STRING,r.snapshotVersion)),Yd(e,t);const a=new Ru(r.target,t,n,r.sequenceNumber);Qd(e,a)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Hi($d,"Failed to raise snapshot:",t),await ih(e,t)}}async function ih(e,t,n){if(!Go(t))throw t;e.Ea.add(1),await Wd(e),e.Ra.set("Offline"),n||(n=()=>gd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Hi($d,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Gd(e)})}function oh(e,t){return t().catch(n=>ih(e,n,t))}async function sh(e){const t=eo(e),n=vh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:-1;for(;ch(t);)try{const e=await yd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,lh(t,e)}catch(e){await ih(t,e)}uh(t)&&dh(t)}function ch(e){return Zd(e)&&e.Ta.length<10}function lh(e,t){e.Ta.push(t);const n=vh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function uh(e){return Zd(e)&&!vh(e).x_()&&e.Ta.length>0}function dh(e){vh(e).start()}async function hh(e){vh(e).ra()}async function fh(e){const t=vh(e);for(const n of e.Ta)t.ea(n.mutations)}async function ph(e,t,n){const r=e.Ta.shift(),a=jl.from(r,t,n);await oh(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await sh(e)}async function mh(e,t){t&&vh(e).X_&&await async function(e,t){if(function(e){return function(e){switch(e){case to.OK:return Xi(64938);case to.CANCELLED:case to.UNKNOWN:case to.DEADLINE_EXCEEDED:case to.RESOURCE_EXHAUSTED:case to.INTERNAL:case to.UNAVAILABLE:case to.UNAUTHENTICATED:return!1;case to.INVALID_ARGUMENT:case to.NOT_FOUND:case to.ALREADY_EXISTS:case to.PERMISSION_DENIED:case to.FAILED_PRECONDITION:case to.ABORTED:case to.OUT_OF_RANGE:case to.UNIMPLEMENTED:case to.DATA_LOSS:return!0;default:return Xi(15467,{code:e})}}(e)&&e!==to.ABORTED}(t.code)){const n=e.Ta.shift();vh(e).B_(),await oh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await sh(e)}}(e,t),uh(e)&&dh(e)}async function gh(e,t){const n=eo(e);n.asyncQueue.verifyOperationInProgress(),Hi($d,"RemoteStore received new credentials");const r=Zd(n);n.Ea.add(3),await Wd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Gd(n)}function yh(e){return e.ma||(e.ma=function(e,t,n){const r=eo(e);return r.sa(),new Fd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:th.bind(null,e),t_:nh.bind(null,e),r_:rh.bind(null,e),H_:ah.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Jd(e)?Xd(e):e.Ra.set("Unknown")):(await e.ma.stop(),eh(e))})),e.ma}function vh(e){return e.fa||(e.fa=function(e,t,n){const r=eo(e);return r.sa(),new Ud(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:hh.bind(null,e),r_:mh.bind(null,e),ta:fh.bind(null,e),na:ph.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await sh(e)):(await e.fa.stop(),e.Ta.length>0&&(Hi($d,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class bh{constructor(e,t,n,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=a,this.deferred=new ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,a){const i=Date.now()+n,o=new bh(e,t,i,r,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new no(to.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wh(e,t){if(Ki("AsyncQueue",`${t}: ${e}`),Go(e))return new no(to.UNAVAILABLE,`${t}: ${e}`);throw e}class xh{static emptySet(e){return new xh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||No.comparator(t.key,n.key):(e,t)=>No.comparator(e.key,t.key),this.keyedMap=Yc(),this.sortedSet=new hs(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new xh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Eh{constructor(){this.ga=new hs(No.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xi(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class kh{constructor(e,t,n,r,a,i,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,a){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new kh(e,t,xh.emptySet(t),i,n,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Sh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _h{constructor(){this.queries=Nh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=eo(e),r=n.queries;n.queries=Nh(),r.forEach((e,n)=>{for(const e of n.Sa)e.onError(t)})}(this,new no(to.ABORTED,"Firestore shutting down"))}}function Nh(){return new Wc(e=>zc(e),Vc)}async function Th(e,t){const n=eo(e);let r=3;const a=t.query;let i=n.queries.get(a);i?!i.ba()&&t.Da()&&(r=2):(i=new Sh,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(e){const n=wh(e,`Initialization of query '${Bc(t.query)}' failed`);return void t.onError(n)}n.queries.set(a,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Ph(n)}async function Ih(e,t){const n=eo(e),r=t.query;let a=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?a=t.Da()?0:1:!i.ba()&&t.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ch(e,t){const n=eo(e);let r=!1;for(const e of t){const t=e.query,a=n.queries.get(t);if(a){for(const t of a.Sa)t.Fa(e)&&(r=!0);a.wa=e}}r&&Ph(n)}function Ah(e,t,n){const r=eo(e),a=r.queries.get(t);if(a)for(const e of a.Sa)e.onError(n);r.queries.delete(t)}function Ph(e){e.Ca.forEach(e=>{e.next()})}var Oh,Rh;(Rh=Oh||(Oh={})).Ma="default",Rh.Cache="cache";class Dh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new kh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=kh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Oh.Cache}}class Mh{constructor(e){this.key=e}}class Lh{constructor(e){this.key=e}}class jh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rl(),this.mutatedKeys=rl(),this.eu=qc(e),this.tu=new xh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Eh,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=$c(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(l,u)||(n.track({type:2,doc:u}),f=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(s||c)&&(o=!0)),f&&(u?(i=i.add(u),a=h?a.add(e):a.delete(e)):(i=i.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),a=a.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:o,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xi(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,c=s!==this.Za;return this.Za=s,0!==i.length||c?{snapshot:new kh(this.query,e.tu,a,i,e.mutatedKeys,0===s,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Eh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new Lh(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Mh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=rl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return kh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const Fh="SyncEngine";class Uh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Vh{constructor(e){this.key=e,this.hu=!1}}class zh{constructor(e,t,n,r,a,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Wc(e=>zc(e),Vc),this.Iu=new Map,this.Eu=new Set,this.du=new hs(No.comparator),this.Au=new Map,this.Ru=new ed,this.Vu={},this.mu=new Map,this.fu=Bu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Bh(e,t,n=!0){const r=lf(e);let a;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await qh(r,t,n,!0),a}async function $h(e,t){const n=lf(e);await qh(n,t,!0,!1)}async function qh(e,t,n,r){const a=await function(e,t){const n=eo(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(a=>a?(r=a,qo.resolve(r)):n.Pi.allocateTargetId(e).next(a=>(r=new Ru(t,a,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}(e.localStore,jc(t)),i=a.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let s;return r&&(s=await async function(e,t,n,r,a){e.pu=(t,n,r)=>async function(e,t,n,r){let a=t.view.ru(n);a.Cs&&(a=await bd(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,a)));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(a,e.isPrimaryClient,i,o);return nf(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const i=await bd(e.localStore,t,!0),o=new jh(t,i.Qs),s=o.ru(i.documents),c=Ql.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,a),l=o.applyChanges(s,e.isPrimaryClient,c);nf(e,n,l.au);const u=new Uh(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}(e,t,i,"current"===o,a.resumeToken)),e.isPrimaryClient&&n&&Hd(e.remoteStore,a),s}async function Gh(e,t,n){const r=eo(e),a=r.Tu.get(t),i=r.Iu.get(a.targetId);if(i.length>1)return r.Iu.set(a.targetId,i.filter(e=>!Vc(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await vd(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Kd(r.remoteStore,a.targetId),ef(r,a.targetId)}).catch($o)):(ef(r,a.targetId),await vd(r.localStore,a.targetId,!0))}async function Wh(e,t){const n=eo(e),r=n.Tu.get(t),a=n.Iu.get(r.targetId);n.isPrimaryClient&&1===a.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kd(n.remoteStore,r.targetId))}async function Hh(e,t){const n=eo(e);try{const e=await function(e,t){const n=eo(e),r=t.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const o=[];t.targetChanges.forEach((i,s)=>{const c=a.get(s);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,s)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(bs.EMPTY_BYTE_STRING,Fo.min()).withLastLimboFreeSnapshotVersion(Fo.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),a=a.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,i)&&o.push(n.Pi.updateTargetData(e,l))});let s=Kc(),c=rl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(function(e,t,n){let r=rl(),a=rl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Kc();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(a=a.add(n)),i.isNoDocument()&&i.version.isEqual(Fo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Hi(fd,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{ks:r,qs:a}})}(e,i,t.documentUpdates).next(e=>{s=e.ks,c=e.qs})),!r.isEqual(Fo.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return qo.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,c)).next(()=>s)}).then(e=>(n.Ms=a,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Zi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Zi(r.hu,14607):e.removedDocuments.size>0&&(Zi(r.hu,42227),r.hu=!1))}),await of(n,e,t)}catch(e){await $o(e)}}function Kh(e,t,n){const r=eo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const a=r.view.va(t);a.snapshot&&e.push(a.snapshot)}),function(e,t){const n=eo(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.Sa)e.va(t)&&(r=!0)}),r&&Ph(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Qh(e,t,n){const r=eo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Au.get(t),i=a&&a.key;if(i){let e=new hs(No.comparator);e=e.insert(i,ic.newNoDocument(i,Fo.min()));const n=rl().add(i),a=new Kl(Fo.min(),new Map,new hs(mo),e,n);await Hh(r,a),r.du=r.du.remove(i),r.Au.delete(t),af(r)}else await vd(r.localStore,t,!1).then(()=>ef(r,t,n)).catch($o)}async function Yh(e,t){const n=eo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=eo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const a=n.batch,i=a.keys();let o=qo.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Zi(null!==i,48541),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,a))}(n,e,t,a).next(()=>a.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Zh(n,r,null),Jh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await of(n,e)}catch(e){await $o(e)}}async function Xh(e,t,n){const r=eo(e);try{const e=await function(e,t){const n=eo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Zi(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Zh(r,t,n),Jh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await of(r,e)}catch(n){await $o(n)}}function Jh(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Zh(e,t,n){const r=eo(e);let a=r.Vu[r.currentUser.toKey()];if(a){const e=a.get(t);e&&(n?e.reject(n):e.resolve(),a=a.remove(t)),r.Vu[r.currentUser.toKey()]=a}}function ef(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||tf(e,t)})}function tf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Kd(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),af(e))}function nf(e,t,n){for(const r of n)r instanceof Mh?(e.Ru.addReference(r.key,t),rf(e,r)):r instanceof Lh?(Hi(Fh,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||tf(e,r.key)):Xi(19791,{wu:r})}function rf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Hi(Fh,"New document in limbo: "+n),e.Eu.add(r),af(e))}function af(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new No(ko.fromString(t)),r=e.fu.next();e.Au.set(r,new Vh(n)),e.du=e.du.insert(n,r),Hd(e.remoteStore,new Ru(jc(Rc(n.path)),r,"TargetPurposeLimboResolution",Wo.ce))}}async function of(e,t,n){const r=eo(e),a=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{o.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?"current":"not-current")}if(e){a.push(e);const t=ud.As(s.targetId,e);i.push(t)}}))}),await Promise.all(o),r.Pu.H_(a),await async function(e,t){const n=eo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>qo.forEach(t,t=>qo.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>qo.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Go(e))throw e;Hi(fd,"Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ms.get(t),r=e.snapshotVersion,a=e.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(t,a)}}}(r.localStore,i))}async function sf(e,t){const n=eo(e);if(!n.currentUser.isEqual(t)){Hi(Fh,"User change. New user:",t.toKey());const e=await md(n.localStore,t);n.currentUser=t,function(e){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new no(to.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await of(n,e.Ls)}}function cf(e,t){const n=eo(e),r=n.Au.get(t);if(r&&r.hu)return rl().add(r.key);{let e=rl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function lf(e){const t=eo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Qh.bind(null,t),t.Pu.H_=Ch.bind(null,t.eventManager),t.Pu.yu=Ah.bind(null,t.eventManager),t}function uf(e){const t=eo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Yh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xh.bind(null,t),t}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return function(e,t,n,r){return new pd(e,t,n,r)}(this.persistence,new hd,e.initialUser,this.serializer)}Cu(e){return new od(cd.mi,this.serializer)}Du(e){return new xd}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class hf extends df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Zi(this.persistence.referenceDelegate instanceof ld,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Wu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?zu.withCacheSize(this.cacheSizeBytes):zu.DEFAULT;return new od(e=>ld.mi(e,t),this.serializer)}}class ff{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=sf.bind(null,this.syncEngine),await async function(e,t){const n=eo(e);t?(n.Ea.delete(2),await Gd(n)):t||(n.Ea.add(2),await Wd(n),n.Ra.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new _h}createDatastore(e){const t=Dd(e.databaseInfo.databaseId),n=function(e){return new Od(e)}(e.databaseInfo);return function(e,t,n,r){return new zd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,a){return new qd(e,t,n,r,a)}(this.localStore,this.datastore,e.asyncQueue,e=>Kh(this.syncEngine,e,0),Sd.v()?new Sd:new Ed)}createSyncEngine(e,t){return function(e,t,n,r,a,i,o){const s=new zh(e,t,n,r,a,i);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=eo(e);Hi($d,"RemoteStore shutting down."),t.Ea.add(5),await Wd(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ff.provider={build:()=>new ff};class pf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const mf="FirestoreClient";class gf{constructor(e,t,n,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=$i.UNAUTHENTICATED,this.clientId=po.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async e=>{Hi(mf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Hi(mf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=wh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yf(e,t){e.asyncQueue.verifyOperationInProgress(),Hi(mf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await md(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function vf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Hi(mf,"Using user provided OfflineComponentProvider");try{await yf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===to.FAILED_PRECONDITION||e.code===to.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Qi("Error using user provided cache. Falling back to memory cache: "+n),await yf(e,new df)}}else Hi(mf,"Using default OfflineComponentProvider"),await yf(e,new hf(void 0));return e._offlineComponents}(e);Hi(mf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>gh(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>gh(t.remoteStore,n)),e._onlineComponents=t}async function bf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Hi(mf,"Using user provided OnlineComponentProvider"),await vf(e,e._uninitializedComponentsProvider._online)):(Hi(mf,"Using default OnlineComponentProvider"),await vf(e,new ff))),e._onlineComponents}async function wf(e){const t=await bf(e),n=t.eventManager;return n.onListen=Bh.bind(null,t.syncEngine),n.onUnlisten=Gh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=$h.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Wh.bind(null,t.syncEngine),n}function xf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ef=new Map,kf="firestore.googleapis.com",Sf=!0;class _f{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new no(to.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kf,this.ssl=Sf}else this.host=e.host,this.ssl=e.ssl??Sf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Vu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new no(to.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new no(to.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")})(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xf(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new no(to.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new no(to.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new no(to.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _f({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new no(to.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new no(to.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _f(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new io;switch(e.type){case"firstParty":return new lo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new no(to.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ef.get(e);t&&(Hi("ComponentProvider","Removing Datastore"),Ef.delete(e),t.terminate())}(this),Promise.resolve()}}class Tf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Tf(this.firestore,e,this._query)}}class If{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new If(this.firestore,e,this._key)}toJSON(){return{type:If._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Do(t,If._jsonSchema))return new If(e,n||null,new No(ko.fromString(t.referencePath)))}}If._jsonSchemaVersion="firestore/documentReference/1.0",If._jsonSchema={type:Ro("string",If._jsonSchemaVersion),referencePath:Ro("string")};class Cf extends Tf{constructor(e,t,n){super(e,t,Rc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new If(this.firestore,null,new No(e))}withConverter(e){return new Cf(this.firestore,e,this._path)}}function Af(e,t,...n){if(e=He(e),To("collection","path",t),e instanceof Nf){const r=ko.fromString(t,...n);return Co(r),new Cf(e,null,r)}{if(!(e instanceof If||e instanceof Cf))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ko.fromString(t,...n));return Co(r),new Cf(e.firestore,null,r)}}function Pf(e,t,...n){if(e=He(e),1===arguments.length&&(t=po.newId()),To("doc","path",t),e instanceof Nf){const r=ko.fromString(t,...n);return Io(r),new If(e,null,new No(r))}{if(!(e instanceof If||e instanceof Cf))throw new no(to.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ko.fromString(t,...n));return Io(r),new If(e.firestore,e instanceof Cf?e.converter:null,new No(r))}}const Of="AsyncQueue";class Rf{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Md(this,"async_queue_retry"),this._c=()=>{const e=Rd();e&&Hi(Of,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Rd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new ro;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;Hi(Of,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",Df(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=bh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Xi(47125,{Pc:Df(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Df(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Mf extends Nf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Rf,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rf(e),this._firestoreClient=void 0,await e}}}function Lf(e){if(e._terminated)throw new no(to.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new Ps(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,xf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new gf(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class jf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jf(bs.fromBase64String(e))}catch(e){throw new no(to.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new jf(bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Do(e,jf._jsonSchema))return jf.fromBase64String(e.bytes)}}jf._jsonSchemaVersion="firestore/bytes/1.0",jf._jsonSchema={type:Ro("string",jf._jsonSchemaVersion),bytes:Ro("string")};class Ff{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new no(to.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _o(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uf{constructor(e){this._methodName=e}}class Vf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new no(to.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new no(to.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mo(this._lat,e._lat)||mo(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vf._jsonSchemaVersion}}static fromJSON(e){if(Do(e,Vf._jsonSchema))return new Vf(e.latitude,e.longitude)}}Vf._jsonSchemaVersion="firestore/geoPoint/1.0",Vf._jsonSchema={type:Ro("string",Vf._jsonSchemaVersion),latitude:Ro("number"),longitude:Ro("number")};class zf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:zf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Do(e,zf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new zf(e.vectorValues);throw new no(to.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zf._jsonSchemaVersion="firestore/vectorValue/1.0",zf._jsonSchema={type:Ro("string",zf._jsonSchemaVersion),vectorValues:Ro("object")};const Bf=/^__.*__$/;class $f{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cl(e,this.data,t,this.fieldTransforms)}}class qf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Al(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xi(40011,{Ac:e})}}class Wf{constructor(e,t,n,r,a,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===a&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ap(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Gf(this.Ac)&&Bf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Hf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Dd(e)}Cc(e,t,n,r=!1){return new Wf({Ac:e,methodName:t,Dc:n,path:_o.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kf(e){const t=e._freezeSettings(),n=Dd(e._databaseId);return new Hf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qf(e,t,n,r,a,i={}){const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,a);ep("Data must be an object, but it was:",o,r);const s=Jf(r,o);let c,l;if(i.merge)c=new ys(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const a=tp(t,r,n);if(!o.contains(a))throw new no(to.INVALID_ARGUMENT,`Field '${a}' is specified in your field mask but missing from your input data.`);ip(e,a)||e.push(a)}c=new ys(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new $f(new rc(s),c,l)}class Yf extends Uf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yf}}function Xf(e,t){if(Zf(e=He(e)))return ep("Unsupported field value:",t,e),Jf(e,t);if(e instanceof Uf)return function(e,t){if(!Gf(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const a of e){let e=Xf(a,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=He(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=jo.fromDate(e);return{timestampValue:cu(t.serializer,n)}}if(e instanceof jo){const n=new jo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cu(t.serializer,n)}}if(e instanceof Vf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jf)return{bytesValue:lu(t.serializer,e._byteString)};if(e instanceof If){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:hu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof zf)return function(e,t){return{mapValue:{fields:{[Ds]:{stringValue:js},[Fs]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return il(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Po(e)}`)}(e,t)}function Jf(e,t){const n={};return ds(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):us(e,(e,r)=>{const a=Xf(r,t.mc(e));null!=a&&(n[e]=a)}),{mapValue:{fields:n}}}function Zf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof jo||e instanceof Vf||e instanceof jf||e instanceof If||e instanceof Uf||e instanceof zf)}function ep(e,t,n){if(!Zf(n)||!Ao(n)){const r=Po(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function tp(e,t,n){if((t=He(t))instanceof Ff)return t._internalPath;if("string"==typeof t)return rp(e,t);throw ap("Field path arguments must be of type string or ",e,!1,void 0,n)}const np=new RegExp("[~\\*/\\[\\]]");function rp(e,t,n){if(t.search(np)>=0)throw ap(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ff(...t.split("."))._internalPath}catch(r){throw ap(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ap(e,t,n,r,a){const i=r&&!r.isEmpty(),o=void 0!==a;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${a}`),c+=")"),new no(to.INVALID_ARGUMENT,s+e+c)}function ip(e,t){return e.some(e=>e.isEqual(t))}class op{constructor(e,t,n,r,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new If(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sp extends op{data(){return super.data()}}function cp(e,t){return"string"==typeof t?rp(e,t):t instanceof Ff?t._internalPath:t._delegate._internalPath}class lp{}class up extends lp{}function dp(e,t,...n){let r=[];t instanceof lp&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof pp).length,n=e.filter(e=>e instanceof hp).length;if(t>1||t>0&&n>0)throw new no(to.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const t of r)e=t._apply(e);return e}class hp extends up{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new hp(e,t,n)}_apply(e){const t=this._parse(e);return bp(e._query,t),new Tf(e.firestore,e.converter,Fc(e._query,t))}_parse(e){const t=Kf(e.firestore),n=function(e,t,n,r,a,i,o){let s;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new no(to.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){vp(o,i);const t=[];for(const n of o)t.push(yp(r,e,n));s={arrayValue:{values:t}}}else s=yp(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||vp(o,i),s=function(e,t,n,r=!1){return Xf(n,e.Cc(r?4:3,t))}(n,"where",o,"in"===i||"not-in"===i);return hc.create(a,i,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function fp(e,t,n){const r=t,a=cp("where",e);return hp._create(a,r,n)}class pp extends lp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)bp(n,e),n=Fc(n,e)}(e._query,t),new Tf(e.firestore,e.converter,Fc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mp extends up{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new no(to.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new no(to.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lc(t,n)}(e._query,this._field,this._direction);return new Tf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Oc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function gp(e,t="asc"){const n=t,r=cp("orderBy",e);return mp._create(r,n)}function yp(e,t,n){if("string"==typeof(n=He(n))){if(""===n)throw new no(to.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mc(t)&&-1!==n.indexOf("/"))throw new no(to.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ko.fromString(n));if(!No.isDocumentKey(r))throw new no(to.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ks(e,new No(r))}if(n instanceof If)return Ks(e,n._key);throw new no(to.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Po(n)}.`)}function vp(e,t){if(!Array.isArray(e)||0===e.length)throw new no(to.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new no(to.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new no(to.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class wp{convertValue(e,t="none"){switch(Us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Es(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xi(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return us(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[Fs].arrayValue?.values?.map(e=>Es(e.doubleValue));return new zf(t)}convertGeoPoint(e){return new Vf(Es(e.latitude),Es(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Cs(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(As(e));default:return null}}convertTimestamp(e){const t=xs(e);return new jo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ko.fromString(e);Zi(Ou(n),9688,{name:e});const r=new Rs(n.get(1),n.get(3)),a=new No(n.popFirst(5));return r.isEqual(t)||Ki(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function xp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Ep{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kp extends op{constructor(e,t,n,r,a,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(cp("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new no(to.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=kp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}kp._jsonSchemaVersion="firestore/documentSnapshot/1.0",kp._jsonSchema={type:Ro("string",kp._jsonSchemaVersion),bundleSource:Ro("string","DocumentSnapshot"),bundleName:Ro("string"),bundle:Ro("string")};class Sp extends kp{data(e={}){return super.data(e)}}class _p{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ep(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Sp(this._firestore,this._userDataWriter,n.key,n,new Ep(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new no(to.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Sp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ep(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Sp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ep(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let a=-1,i=-1;return 0!==t.type&&(a=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Np(t.type),doc:r,oldIndex:a,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new no(to.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_p._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=po.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Np(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xi(61501,{type:e})}}function Tp(e){e=Oo(e,If);const t=Oo(e.firestore,Mf);return function(e,t,n={}){const r=new ro;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,a){const i=new pf({next:s=>{i.Nu(),t.enqueueAndForget(()=>Ih(e,o));const c=s.docs.has(n);!c&&s.fromCache?a.reject(new no(to.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&s.fromCache&&r&&"server"===r.source?a.reject(new no(to.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(s)},error:e=>a.reject(e)}),o=new Dh(Rc(n.path),i,{includeMetadataChanges:!0,qa:!0});return Th(e,o)}(await wf(e),e.asyncQueue,t,n,r)),r.promise}(Lf(t),e._key).then(n=>function(e,t,n){const r=n.docs.get(t._key),a=new Ip(e);return new kp(e,a,t._key,r,new Ep(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n))}_p._jsonSchemaVersion="firestore/querySnapshot/1.0",_p._jsonSchema={type:Ro("string",_p._jsonSchemaVersion),bundleSource:Ro("string","QuerySnapshot"),bundleName:Ro("string"),bundle:Ro("string")};class Ip extends wp{constructor(e){super(),this.firestore=e}convertBytes(e){return new jf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new If(this.firestore,null,t)}}function Cp(e){e=Oo(e,Tf);const t=Oo(e.firestore,Mf),n=Lf(t),r=new Ip(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new no(to.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),function(e,t,n={}){const r=new ro;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,a){const i=new pf({next:n=>{i.Nu(),t.enqueueAndForget(()=>Ih(e,o)),n.fromCache&&"server"===r.source?a.reject(new no(to.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:e=>a.reject(e)}),o=new Dh(n,i,{includeMetadataChanges:!0,qa:!0});return Th(e,o)}(await wf(e),e.asyncQueue,t,n,r)),r.promise}(n,e._query).then(n=>new _p(t,r,e,n))}function Ap(e,t,n){e=Oo(e,If);const r=Oo(e.firestore,Mf),a=xp(e.converter,t,n);return Rp(r,[Qf(Kf(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,xl.none())])}function Pp(e,t,n,...r){e=Oo(e,If);const a=Oo(e.firestore,Mf),i=Kf(a);let o;return o="string"==typeof(t=He(t))||t instanceof Ff?function(e,t,n,r,a,i){const o=e.Cc(1,t,n),s=[tp(t,r,n)],c=[a];if(i.length%2!=0)throw new no(to.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<i.length;e+=2)s.push(tp(t,i[e])),c.push(i[e+1]);const l=[],u=rc.empty();for(let e=s.length-1;e>=0;--e)if(!ip(l,s[e])){const t=s[e];let n=c[e];n=He(n);const r=o.yc(t);if(n instanceof Yf)l.push(t);else{const e=Xf(n,r);null!=e&&(l.push(t),u.set(t,e))}}const d=new ys(l);return new qf(u,d,o.fieldTransforms)}(i,"updateDoc",e._key,t,n,r):function(e,t,n,r){const a=e.Cc(1,t,n);ep("Data must be an object, but it was:",a,r);const i=[],o=rc.empty();us(r,(e,r)=>{const s=rp(t,e,n);r=He(r);const c=a.yc(s);if(r instanceof Yf)i.push(s);else{const e=Xf(r,c);null!=e&&(i.push(s),o.set(s,e))}});const s=new ys(i);return new qf(o,s,a.fieldTransforms)}(i,"updateDoc",e._key,t),Rp(a,[o.toMutation(e._key,xl.exists(!0))])}function Op(e,t){const n=Oo(e.firestore,Mf),r=Pf(e),a=xp(e.converter,t);return Rp(n,[Qf(Kf(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,xl.exists(!1))]).then(()=>r)}function Rp(e,t){return function(e,t){const n=new ro;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=uf(e);try{const e=await function(e,t){const n=eo(e),r=jo.now(),a=t.reduce((e,t)=>e.add(t.key),rl());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=Kc(),c=rl();return n.Ns.getEntries(e,a).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(a=>{i=a;const o=[];for(const e of t){const t=Tl(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Al(e.key,t,ac(t.value.mapValue),xl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Xc(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new hs(mo)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await of(r,e.changes),await sh(r.remoteStore)}catch(e){const t=wh(e,"Failed to persist write");n.reject(t)}}(await function(e){return bf(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(Lf(e),t)}new WeakMap,function(e,t=!0){!function(e){qi=e}(un),an(new Ke("firestore",(e,{instanceIdentifier:n,options:r})=>{const a=e.getProvider("app").getImmediate(),i=new Mf(new so(e.getProvider("auth-internal")),new ho(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new no(to.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rs(e.options.projectId,t)}(a,n),a);return r={useFetchStreams:t,...r},i._setSettings(r),i},"PUBLIC").setMultipleInstances(!0)),fn(zi,Bi,e),fn(zi,Bi,"esm2020")}();const Dp="@firebase/installations",Mp="0.6.19",Lp=`w:${Mp}`,jp="FIS_v2",Fp=new je("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Up(e){return e instanceof Le&&e.code.includes("request-failed")}function Vp({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function zp(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Bp(e,t){const n=(await t.json()).error;return Fp.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function $p({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function qp(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Gp(e){return new Promise(t=>{setTimeout(t,e)})}const Wp=/^[cdef][\w-]{21}$/;function Hp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){var t;return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(e);return Wp.test(t)?t:""}catch{return""}}function Kp(e){return`${e.appName}!${e.appId}`}const Qp=new Map;function Yp(e,t){const n=Kp(e);Xp(n,t),function(e,t){const n=(!Jp&&"BroadcastChannel"in self&&(Jp=new BroadcastChannel("[Firebase] FID Change"),Jp.onmessage=e=>{Xp(e.data.key,e.data.fid)}),Jp);n&&n.postMessage({key:e,fid:t}),0===Qp.size&&Jp&&(Jp.close(),Jp=null)}(n,t)}function Xp(e,t){const n=Qp.get(e);if(n)for(const e of n)e(t)}let Jp=null;const Zp="firebase-installations-store";let em=null;function tm(){return em||(em=gt("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Zp)}})),em}async function nm(e,t){const n=Kp(e),r=(await tm()).transaction(Zp,"readwrite"),a=r.objectStore(Zp),i=await a.get(n);return await a.put(t,n),await r.done,i&&i.fid===t.fid||Yp(e,t.fid),t}async function rm(e){const t=Kp(e),n=(await tm()).transaction(Zp,"readwrite");await n.objectStore(Zp).delete(t),await n.done}async function am(e,t){const n=Kp(e),r=(await tm()).transaction(Zp,"readwrite"),a=r.objectStore(Zp),i=await a.get(n),o=t(i);return void 0===o?await a.delete(n):await a.put(o,n),await r.done,!o||i&&i.fid===o.fid||Yp(e,o.fid),o}async function im(e){let t;const n=await am(e.appConfig,n=>{const r=function(e){return cm(e||{fid:Hp(),registrationStatus:0})}(n),a=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Fp.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Vp(e),a=$p(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={fid:n,authVersion:jp,appId:e.appId,sdkVersion:Lp},s={method:"POST",headers:a,body:JSON.stringify(o)},c=await qp(()=>fetch(r,s));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:zp(e.authToken)}}throw await Bp("Create Installation",c)}(e,t);return nm(e.appConfig,n)}catch(n){throw Up(n)&&409===n.customData.serverCode?await rm(e.appConfig):await nm(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:om(e)}:{installationEntry:t}}(e,r);return t=a.registrationPromise,a.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function om(e){let t=await sm(e.appConfig);for(;1===t.registrationStatus;)await Gp(100),t=await sm(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await im(e);return n||t}return t}function sm(e){return am(e,e=>{if(!e)throw Fp.create("installation-not-found");return cm(e)})}function cm(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function lm({appConfig:e,heartbeatServiceProvider:t},n){const r=function(e,{fid:t}){return`${Vp(e)}/${t}/authTokens:generate`}(e,n),a=function(e,{refreshToken:t}){const n=$p(e);return n.append("Authorization",function(e){return`${jp} ${e}`}(t)),n}(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={installation:{sdkVersion:Lp,appId:e.appId}},s={method:"POST",headers:a,body:JSON.stringify(o)},c=await qp(()=>fetch(r,s));if(c.ok)return zp(await c.json());throw await Bp("Generate Auth Token",c)}async function um(e,t=!1){let n;const r=await am(e.appConfig,r=>{if(!hm(r))throw Fp.create("not-registered");const a=r.authToken;if(!t&&(2===(i=a).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(i)))return r;var i;if(1===a.requestStatus)return n=async function(e,t){let n=await dm(e.appConfig);for(;1===n.authToken.requestStatus;)await Gp(100),n=await dm(e.appConfig);const r=n.authToken;return 0===r.requestStatus?um(e,t):r}(e,t),r;{if(!navigator.onLine)throw Fp.create("app-offline");const t=function(e){return{...e,authToken:{requestStatus:1,requestTime:Date.now()}}}(r);return n=async function(e,t){try{const n=await lm(e,t),r={...t,authToken:n};return await nm(e.appConfig,r),n}catch(n){if(!Up(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n={...t,authToken:{requestStatus:0}};await nm(e.appConfig,n)}else await rm(e.appConfig);throw n}}(e,t),t}});return n?await n:r.authToken}function dm(e){return am(e,e=>{if(!hm(e))throw Fp.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?{...e,authToken:{requestStatus:0}}:e;var t})}function hm(e){return void 0!==e&&2===e.registrationStatus}function fm(e){return Fp.create("missing-app-config-values",{valueName:e})}const pm="installations";an(new Ke(pm,e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw fm("App Configuration");if(!e.name)throw fm("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw fm(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:on(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),an(new Ke("installations-internal",e=>{const t=on(e.getProvider("app").getImmediate(),pm).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await im(t);return r?r.catch(console.error):um(t).catch(console.error),n.fid}(t),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await im(e);t&&await t}(n),(await um(n,t)).token}(t,e)}},"PRIVATE")),fn(Dp,Mp),fn(Dp,Mp,"esm2020");const mm="analytics",gm="https://www.googletagmanager.com/gtag/js",ym=new at("@firebase/analytics"),vm=new je("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function bm(e){if(!e.startsWith(gm)){const t=vm.create("invalid-gtag-resource",{gtagURL:e});return ym.warn(t.message),""}return e}function wm(e){return Promise.all(e.map(e=>e.catch(e=>e)))}const xm=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Em(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function km(e,t=xm,n){const{appId:r,apiKey:a,measurementId:i}=e.options;if(!r)throw vm.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:r};throw vm.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new _m;return setTimeout(async()=>{s.abort()},void 0!==n?n:6e4),Sm({appId:r,apiKey:a,measurementId:i},o,s,t)}async function Sm(e,{throttleEndTimeMillis:t,backoffCount:n},r,a=xm){const{appId:i,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const a=Math.max(t-Date.now(),0),i=setTimeout(n,a);e.addEventListener(()=>{clearTimeout(i),r(vm.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(e){if(o)return ym.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:i,measurementId:o};throw e}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:Em(n)},a="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),i=await fetch(a,r);if(200!==i.status&&304!==i.status){let e="";try{const t=await i.json();t.error?.message&&(e=t.error.message)}catch(e){}throw vm.create("config-fetch-failed",{httpStatus:i.status,responseMessage:e})}return i.json()}(e);return a.deleteThrottleMetadata(i),t}catch(t){const s=t;if(!function(e){if(!(e instanceof Le&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(s)){if(a.deleteThrottleMetadata(i),o)return ym.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${s?.message}]`),{appId:i,measurementId:o};throw t}const c=503===Number(s?.customData?.httpStatus)?We(n,a.intervalMillis,30):We(n,a.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return a.setThrottleMetadata(i,l),ym.debug(`Calling attemptFetch again in ${c} millis`),Sm(e,l,r,a)}}class _m{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Nm,Tm;async function Im(e,t,n,r,a,i,o){const s=km(e);s.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ym.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>ym.error(e)),t.push(s);const c=async function(){if(!De())return ym.warn(vm.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Me()}catch(e){return ym.warn(vm.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[l,u]=await Promise.all([s,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(gm)&&n.src.includes(e))return n;return null})(i)||function(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",t)),n}(0,{createScriptURL:bm}),r=document.createElement("script"),a=`${gm}?l=${e}&id=${t}`;r.src=n?n?.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}(i,l.measurementId),Tm&&(a("consent","default",Tm),Tm=void 0),a("js",new Date);const d=o?.config??{};return d.origin="firebase",d.update=!0,null!=u&&(d.firebase_id=u),a("config",l.measurementId,d),Nm&&(a("set",Nm),Nm=void 0),l.measurementId}class Cm{constructor(e){this.app=e}_delete(){return delete Am[this.app.options.appId],Promise.resolve()}}let Am={},Pm=[];const Om={};let Rm,Dm,Mm="dataLayer",Lm=!1;function jm(e,t,n){!function(){const e=[];if(Oe()&&e.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=vm.create("invalid-analytics-context",{errorInfo:t});ym.warn(n.message)}}();const r=e.options.appId;if(!r)throw vm.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw vm.create("no-api-key");ym.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Am[r])throw vm.create("already-exists",{id:r});if(!Lm){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Mm);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,a){let i=function(...e){window[r].push(arguments)};return window[a]&&"function"==typeof window[a]&&(i=window[a]),window[a]=function(e,t,n,r){return async function(a,...i){try{if("event"===a){const[r,a]=i;await async function(e,t,n,r,a){try{let i=[];if(a&&a.send_to){let e=a.send_to;Array.isArray(e)||(e=[e]);const r=await wm(n);for(const n of e){const e=r.find(e=>e.measurementId===n),a=e&&t[e.appId];if(!a){i=[];break}i.push(a)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,a||{})}catch(e){ym.error(e)}}(e,t,n,r,a)}else if("config"===a){const[a,o]=i;await async function(e,t,n,r,a,i){const o=r[a];try{if(o)await t[o];else{const e=(await wm(n)).find(e=>e.measurementId===a);e&&await t[e.appId]}}catch(e){ym.error(e)}e("config",a,i)}(e,t,n,r,a,o)}else if("consent"===a){const[t,n]=i;e("consent",t,n)}else if("get"===a){const[t,n,r]=i;e("get",t,n,r)}else if("set"===a){const[t]=i;e("set",t)}else e(a,...i)}catch(e){ym.error(e)}}}(i,e,t,n),{gtagCore:i,wrappedGtag:window[a]}}(Am,Pm,Om,Mm,"gtag");Dm=e,Rm=t,Lm=!0}return Am[r]=Im(e,Pm,Om,t,Rm,Mm,n),new Cm(e)}const Fm="@firebase/analytics",Um="0.10.19";an(new Ke(mm,(e,{options:t})=>jm(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),an(new Ke("analytics-internal",function(e){try{const t=e.getProvider(mm).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=He(e),async function(e,t,n,r,a){if(a&&a.global)e("event",n,r);else{const a=await t;e("event",n,{...r,send_to:a})}}(Dm,Am[e.app.options.appId],t,n,r).catch(e=>ym.error(e))}(t,e,n,r),setUserProperties:(e,n)=>function(e,t,n){e=He(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t[`user_properties.${e}`]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(Dm,Am[e.app.options.appId],t,n).catch(e=>ym.error(e))}(t,e,n)}}catch(e){throw vm.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),fn(Fm,Um),fn(Fm,Um,"esm2020");var Vm=dn({apiKey:"AIzaSyAG4Fcgfv69fKkLiqW9GrE72UHnVdHGwF4",authDomain:"manzil-8c263.firebaseapp.com",projectId:"manzil-8c263",storageBucket:"manzil-8c263.firebasestorage.app",messagingSenderId:"926563312491",appId:"1:926563312491:web:278e5313ee45568d13e22e",measurementId:"G-63PT3V3LVQ"}),zm=function(e){const t="object"==typeof e?e:hn(),n="string"==typeof e?e:Os,r=on(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(()=>{const e=Ee("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),n]:[e.substring(0,t),n]})();e&&function(e,t,n,r={}){e=Oo(e,Nf);const a=Ne(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;a&&(Te(`https://${s}`),Ae("Firestore",!0)),i.host!==kf&&i.host!==s&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:s,ssl:a,emulatorOptions:r};if(!Ue(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=$i.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...e};return[be(JSON.stringify({alg:"none",type:"JWT"})),be(JSON.stringify(i)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new no(to.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new $i(a)}e._authCredentials=new oo(new ao(t,n))}}(r,...e)}return r}(Vm),Bm=function(e=hn()){const t=on(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=on(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Ue(n.getOptions(),t??{}))return e;Tn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:wi,persistence:[La,ba,xa]}),r=Se("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(a=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Si)return;const r=t?.token;_i!==r&&(_i=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){He(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e){He(e).onIdTokenChanged(e=>t(e),void 0,void 0)}(n)}}var a;const i=Ee("auth");return i&&function(e,t,n){const r=Rr(e);On(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!!n?.disableWarnings,i=qr(t),{host:o,port:s}=function(e){const t=qr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const e=a[1];return{host:e,port:Gr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Gr(t)}}}(t),c=null===s?"":`:${s}`,l={url:`${i}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator)return On(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void On(Ue(l,r.config.emulator)&&Ue(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Ne(o)?(Te(`${i}//${o}${c}`),Ae("Auth",!0)):a||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(n,`http://${i}`),n}(Vm);function $m(e){return $m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$m(e)}function qm(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Gm(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Gm(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Gm(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,Gm(d,"constructor",l),Gm(l,"constructor",c),c.displayName="GeneratorFunction",Gm(l,a,"GeneratorFunction"),Gm(d),Gm(d,a,"Generator"),Gm(d,r,function(){return this}),Gm(d,"toString",function(){return"[object Generator]"}),(qm=function(){return{w:i,m:h}})()}function Gm(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Gm=function(e,t,n,r){function i(t,n){Gm(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Gm(e,t,n,r)}function Wm(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Hm(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){Wm(i,r,a,o,s,"next",e)}function s(e){Wm(i,r,a,o,s,"throw",e)}o(void 0)})}}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ym(r.key),r)}}function Qm(e,t,n){return(t=Ym(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ym(e){var t=function(e){if("object"!=$m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=$m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$m(t)?t:t+""}!function(e=hn()){const t=on(e=He(e),mm);t.isInitialized()?t.getImmediate():function(e,t={}){const n=on(e,mm);if(n.isInitialized()){const e=n.getImmediate();if(Ue(t,n.getOptions()))return e;throw vm.create("already-initialized")}n.initialize({options:t})}(e)}(Vm);var Xm=new oa,Jm=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"initializeAuth",value:(a=Hm(qm().m(function e(){var t=this;return qm().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){t.authReady&&t.listenerRegistered||t.listenerRegistered||(fa(Bm,function(e){t.currentUser=e,t.authReady=!0,t.authListeners.forEach(function(t){return t(e)}),console.log(" Auth state changed:",e?"Signed in as ".concat(e.email):"Signed out")}),t.listenerRegistered=!0),e(t.currentUser)}))},e)})),function(){return a.apply(this,arguments)})},{key:"signInWithGoogle",value:(r=Hm(qm().m(function e(){var t,n;return qm().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log(" Signing in with Google..."),e.n=1,Qa(Bm,Xm);case 1:return t=e.v,console.log(" Google sign-in successful:",t.user.email),e.a(2,t.user);case 2:throw e.p=2,n=e.v,console.error(" Google sign-in failed:",n),n;case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"signOut",value:(n=Hm(qm().m(function e(){var t;return qm().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log(" Signing out..."),e.n=1,pa(Bm);case 1:console.log(" Sign-out successful"),e.n=3;break;case 2:throw e.p=2,t=e.v,console.error(" Sign-out failed:",t),t;case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"getCurrentUser",value:function(){return this.currentUser}},{key:"isAuthenticated",value:function(){return null!==this.currentUser}},{key:"getUserId",value:function(){if(!this.currentUser)throw new Error("User not authenticated");return this.currentUser.uid}},{key:"getUserEmail",value:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.email)||null}},{key:"getUserDisplayName",value:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.displayName)||null}},{key:"getUserPhotoURL",value:function(){var e;return(null===(e=this.currentUser)||void 0===e?void 0:e.photoURL)||null}},{key:"onAuthStateChanged",value:function(e){var t=this;return this.authListeners.push(e),function(){var n=t.authListeners.indexOf(e);n>-1&&t.authListeners.splice(n,1)}}}],t&&Km(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a}();function Zm(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return eg(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(eg(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,eg(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,eg(d,"constructor",l),eg(l,"constructor",c),c.displayName="GeneratorFunction",eg(l,a,"GeneratorFunction"),eg(d),eg(d,a,"Generator"),eg(d,r,function(){return this}),eg(d,"toString",function(){return"[object Generator]"}),(Zm=function(){return{w:i,m:h}})()}function eg(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}eg=function(e,t,n,r){function i(t,n){eg(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},eg(e,t,n,r)}function tg(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ng(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rg(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Qm(Jm,"currentUser",null),Qm(Jm,"authReady",!1),Qm(Jm,"listenerRegistered",!1),Qm(Jm,"authListeners",[]);const ag=function(){var e=Y(),t=K(),n=ng((0,o.useState)(!1),2),r=n[0],a=n[1],i=ng((0,o.useState)(!1),2),s=i[0],c=i[1],l=ng((0,o.useState)(!1),2),u=l[0],d=l[1],h=[{path:"/today",label:"Dashboard"},{path:"/library",label:"Library"},{path:"/progress",label:"Progress"},{path:"/settings",label:"Settings"}],f=function(e){return t.pathname===e},p=(0,o.useMemo)(function(){return Math.max(0,h.findIndex(function(e){return f(e.path)}))},[t.pathname]),m=function(){var t,n=(t=Zm().m(function t(){var n;return Zm().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,window.confirm("Sign out of Manzil?")){t.n=1;break}return t.a(2);case 1:return c(!0),t.n=2,Jm.signOut();case 2:e("/today"),t.n=4;break;case 3:t.p=3,n=t.v,console.error("Sign out error:",n);case 4:return t.p=4,c(!1),t.f(4);case 5:return t.a(2)}},t,null,[[0,3,4,5]])}),function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(e){tg(i,r,a,o,s,"next",e)}function s(e){tg(i,r,a,o,s,"throw",e)}o(void 0)})});return function(){return n.apply(this,arguments)}}(),g=Jm.getUserEmail(),y=Jm.getUserDisplayName(),v=(y||g||"U").charAt(0).toUpperCase();return o.createElement(o.Fragment,null,o.createElement("header",{className:"bg-dark-surface border-b border-dark-border px-6 py-3"},o.createElement("div",{className:"flex items-center justify-between"},o.createElement("div",{className:"flex items-center gap-3"},o.createElement("div",{className:"w-8 h-8 bg-accent rounded-xl flex items-center justify-center"},o.createElement("span",{className:"text-dark-text text-sm font-medium"},"")),o.createElement("div",null,o.createElement("h1",{className:"text-lg font-medium text-dark-text"},"Manzil"))),o.createElement("div",{className:"hidden md:flex items-center gap-3 relative"},o.createElement("button",{onClick:function(){return d(!u)},className:"w-8 h-8 rounded-full bg-dark-surface-hover text-dark-text flex items-center justify-center border border-dark-border","aria-label":"Profile menu"},o.createElement("span",{className:"text-sm"},v)),u&&o.createElement("div",{className:"absolute right-0 top-10 w-56 bg-dark-surface border border-dark-border rounded-xl shadow-lg p-3 z-40"},o.createElement("div",{className:"mb-2"},o.createElement("div",{className:"text-sm text-dark-text"},y||"User"),o.createElement("div",{className:"text-xs text-dark-text-secondary"},g||"")),o.createElement("button",{onClick:m,disabled:s,className:"w-full text-left px-3 py-2 text-sm text-dark-text-secondary hover:text-dark-text hover:bg-dark-surface-hover rounded-lg disabled:opacity-50"},s?"Signing out...":"Sign out"))),o.createElement("button",{onClick:function(){return a(!r)},className:"md:hidden w-8 h-8 bg-dark-surface-hover rounded-xl flex items-center justify-center text-dark-text-secondary hover:text-dark-text transition-colors"},o.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})))),o.createElement("div",{className:"hidden md:flex justify-center mt-3"},o.createElement("div",{className:"relative w-full max-w-xl bg-dark-surface-hover border border-dark-border rounded-2xl p-1"},o.createElement("div",{className:"absolute top-1 bottom-1 w-1/4 rounded-xl bg-accent/20 transition-transform duration-300",style:{transform:"translateX(".concat(100*(p>=0?p:0),"%)")}}),o.createElement("div",{className:"relative grid grid-cols-4 gap-1"},h.map(function(t,n){return o.createElement("button",{key:t.path,onClick:function(){return e(t.path)},className:"z-10 px-3 py-2 text-sm rounded-xl transition-colors ".concat(f(t.path)?"text-accent":"text-dark-text-secondary hover:text-dark-text")},t.label)}))))),r&&o.createElement("div",{className:"md:hidden fixed inset-0 z-50"},o.createElement("div",{className:"absolute inset-0 bg-black/50",onClick:function(){return a(!1)}}),o.createElement("div",{className:"absolute right-0 top-0 h-full w-64 bg-dark-surface border-l border-dark-border p-4"},o.createElement("div",{className:"flex items-center justify-between mb-6"},o.createElement("div",{className:"flex items-center gap-2"},o.createElement("div",{className:"w-6 h-6 bg-accent rounded-xl flex items-center justify-center"},o.createElement("span",{className:"text-dark-text text-xs font-medium"},"")),o.createElement("h2",{className:"text-base font-medium text-dark-text"},"Manzil")),o.createElement("button",{onClick:function(){return a(!1)},className:"w-6 h-6 bg-dark-surface-hover rounded-xl flex items-center justify-center text-dark-text-secondary hover:text-dark-text transition-colors"},o.createElement("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),o.createElement("nav",{className:"space-y-1"},h.map(function(t){return o.createElement("button",{key:t.path,onClick:function(){e(t.path),a(!1)},className:"w-full text-left px-3 py-2 text-sm transition-colors duration-200 rounded-lg ".concat(f(t.path)?"bg-accent text-dark-text":"text-dark-text-secondary hover:text-dark-text hover:bg-dark-surface-hover")},t.label)}),o.createElement("div",{className:"pt-4 mt-4 border-t border-dark-border"},o.createElement("div",{className:"px-3 py-2 text-sm text-dark-text-secondary"},o.createElement("div",{className:"text-dark-text"},y||"User"),o.createElement("div",{className:"text-xs"},g)),o.createElement("button",{onClick:function(){m(),a(!1)},disabled:s,className:"w-full text-left px-3 py-2 text-sm text-dark-text-secondary hover:text-dark-text hover:bg-dark-surface-hover transition-colors duration-200 rounded-lg disabled:opacity-50"},s?"Signing out...":"Sign out"))))))};function ig(e){return ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(e)}function og(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sg(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cg(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return lg(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(lg(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,lg(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,lg(d,"constructor",l),lg(l,"constructor",c),c.displayName="GeneratorFunction",lg(l,a,"GeneratorFunction"),lg(d),lg(d,a,"Generator"),lg(d,r,function(){return this}),lg(d,"toString",function(){return"[object Generator]"}),(cg=function(){return{w:i,m:h}})()}function lg(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}lg=function(e,t,n,r){function i(t,n){lg(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},lg(e,t,n,r)}function ug(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ug(Object(n),!0).forEach(function(t){hg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ug(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hg(e,t,n){return(t=gg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fg(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function pg(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){fg(i,r,a,o,s,"next",e)}function s(e){fg(i,r,a,o,s,"throw",e)}o(void 0)})}}function mg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gg(r.key),r)}}function gg(e){var t=function(e){if("object"!=ig(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=ig(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ig(t)?t:t+""}var yg=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getCurrentUserId",value:function(){var e;console.log(" FirebaseService.getCurrentUserId - auth:",Bm),console.log(" FirebaseService.getCurrentUserId - auth.currentUser:",Bm.currentUser);var t=(null===(e=Bm.currentUser)||void 0===e?void 0:e.uid)||"anonymous";return console.log(" FirebaseService.getCurrentUserId - userId:",t),t}},{key:"getSurah",value:(L=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=Pf(zm,"surahs",t.toString()),e.n=1,Tp(n);case 1:return r=e.v,e.a(2,r.exists()?dg({id:parseInt(r.id)},r.data()):null);case 2:return e.p=2,a=e.v,console.error("Error getting surah:",a),e.a(2,null)}},e,null,[[0,2]])})),function(e){return L.apply(this,arguments)})},{key:"getAllSurahs",value:(M=pg(cg().m(function e(){var t,n,r;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=dp(Af(zm,"surahs"),gp("id")),e.n=1,Cp(t);case 1:return n=e.v,e.a(2,n.docs.map(function(e){return dg({id:parseInt(e.id)},e.data())}));case 2:return e.p=2,r=e.v,console.error("Error getting all surahs:",r),e.a(2,[])}},e,null,[[0,2]])})),function(){return M.apply(this,arguments)})},{key:"getAyah",value:(D=pg(cg().m(function e(t,n){var r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=Pf(zm,"surahs",t.toString(),"ayahs",n.toString()),e.n=1,Tp(r);case 1:return a=e.v,e.a(2,a.exists()?a.data():null);case 2:return e.p=2,i=e.v,console.error("Error getting ayah:",i),e.a(2,null)}},e,null,[[0,2]])})),function(e,t){return D.apply(this,arguments)})},{key:"getAyahs",value:(R=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=dp(Af(zm,"surahs",t.toString(),"ayahs"),gp("ayah")),e.n=1,Cp(n);case 1:return r=e.v,e.a(2,r.docs.map(function(e){return e.data()}));case 2:return e.p=2,a=e.v,console.error("Error getting ayahs:",a),e.a(2,[])}},e,null,[[0,2]])})),function(e){return R.apply(this,arguments)})},{key:"getRukus",value:(O=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=dp(Af(zm,"surahs",t.toString(),"rukus"),gp("rukuIndex")),e.n=1,Cp(n);case 1:return r=e.v,e.a(2,r.docs.map(function(e){return e.data()}));case 2:return e.p=2,a=e.v,console.error("Error getting rukus:",a),e.a(2,[])}},e,null,[[0,2]])})),function(e){return O.apply(this,arguments)})},{key:"getSajdahs",value:(P=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=dp(Af(zm,"surahs",t.toString(),"sajdah"),gp("ayah")),e.n=1,Cp(n);case 1:return r=e.v,e.a(2,r.docs.map(function(e){return e.data()}));case 2:return e.p=2,a=e.v,console.error("Error getting sajdahs:",a),e.a(2,[])}},e,null,[[0,2]])})),function(e){return P.apply(this,arguments)})},{key:"getUserProfile",value:(A=pg(cg().m(function e(){var t,n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=Pf(zm,"users",t),e.n=1,Tp(n);case 1:return r=e.v,e.a(2,r.exists()?dg({id:r.id,userId:t},r.data()):null);case 2:return e.p=2,a=e.v,console.error("Error getting user profile:",a),e.a(2,null)}},e,this,[[0,2]])})),function(){return A.apply(this,arguments)})},{key:"createUserProfile",value:(C=pg(cg().m(function e(t){var n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=this.getCurrentUserId(),console.log(" FirebaseService.createUserProfile - userId:",n),console.log(" FirebaseService.createUserProfile - profile:",t),r=Pf(zm,"users",n),console.log(" FirebaseService.createUserProfile - docRef:",r),a=dg(dg({},t),{},{createdAt:Date.now(),updatedAt:Date.now()}),console.log(" FirebaseService.createUserProfile - profileData:",a),e.n=1,Ap(r,a);case 1:console.log(" FirebaseService.createUserProfile - Success!"),e.n=3;break;case 2:throw e.p=2,i=e.v,console.error(" FirebaseService.createUserProfile - Error:",i),i;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return C.apply(this,arguments)})},{key:"updateUserProfile",value:(I=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=this.getCurrentUserId(),r=Pf(zm,"users",n),e.n=1,Pp(r,dg(dg({},t),{},{updatedAt:Date.now()}));case 1:e.n=3;break;case 2:throw e.p=2,a=e.v,console.error("Error updating user profile:",a),a;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return I.apply(this,arguments)})},{key:"markOnboardingCompleted",value:(T=pg(cg().m(function e(){var t,n,r;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=Pf(zm,"users",t),e.n=1,Pp(n,{hasCompletedOnboarding:!0,updatedAt:Date.now()});case 1:e.n=3;break;case 2:throw e.p=2,r=e.v,console.error("Error marking onboarding as completed:",r),r;case 3:return e.a(2)}},e,this,[[0,2]])})),function(){return T.apply(this,arguments)})},{key:"getUserSession",value:(N=pg(cg().m(function e(){var t,n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=dp(Af(zm,"users",t,"sessions"),fp("isActive","==",!0)),e.n=1,Cp(n);case 1:if(!(r=e.v).empty){e.n=2;break}return e.a(2,null);case 2:return a=r.docs[0],e.a(2,dg({id:a.id,userId:t},a.data()));case 3:return e.p=3,i=e.v,console.error("Error getting user session:",i),e.a(2,null)}},e,this,[[0,3]])})),function(){return N.apply(this,arguments)})},{key:"createUserSession",value:(_=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=this.getCurrentUserId(),e.n=1,Op(Af(zm,"users",n,"sessions"),dg(dg({},t),{},{createdAt:Date.now(),updatedAt:Date.now()}));case 1:return r=e.v,e.a(2,r.id);case 2:throw e.p=2,a=e.v,console.error("Error creating user session:",a),a;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return _.apply(this,arguments)})},{key:"updateUserSession",value:(S=pg(cg().m(function e(t,n){var r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=this.getCurrentUserId(),a=Pf(zm,"users",r,"sessions",t),e.n=1,Pp(a,dg(dg({},n),{},{updatedAt:Date.now()}));case 1:e.n=3;break;case 2:throw e.p=2,i=e.v,console.error("Error updating user session:",i),i;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e,t){return S.apply(this,arguments)})},{key:"createUserAttempt",value:(k=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=this.getCurrentUserId(),e.n=1,Op(Af(zm,"users",n,"attempts"),dg(dg({},t),{},{ts:Date.now()}));case 1:return r=e.v,e.a(2,r.id);case 2:throw e.p=2,a=e.v,console.error("Error creating user attempt:",a),a;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return k.apply(this,arguments)})},{key:"getUserAttempts",value:(E=pg(cg().m(function e(t,n){var r,a,i,o;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=this.getCurrentUserId(),a=dp(Af(zm,"users",r,"attempts"),gp("ts","desc")),void 0!==t&&(a=dp(a,fp("surahId","==",t))),void 0!==n&&(a=dp(a,fp("ayahId","==",n))),e.n=1,Cp(a);case 1:return i=e.v,e.a(2,i.docs.map(function(e){return dg({id:e.id,userId:r},e.data())}));case 2:return e.p=2,o=e.v,console.error("Error getting user attempts:",o),e.a(2,[])}},e,this,[[0,2]])})),function(e,t){return E.apply(this,arguments)})},{key:"getUserProgress",value:(x=pg(cg().m(function e(t,n){var r,a,i,o;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=this.getCurrentUserId(),a=dp(Af(zm,"users",r,"progress"),gp("updatedAt","desc")),void 0!==t&&(a=dp(a,fp("surahId","==",t))),void 0!==n&&(a=dp(a,fp("ayahId","==",n))),e.n=1,Cp(a);case 1:return i=e.v,e.a(2,i.docs.map(function(e){return dg({id:e.id,userId:r},e.data())}));case 2:return e.p=2,o=e.v,console.error("Error getting user progress:",o),e.a(2,[])}},e,this,[[0,2]])})),function(e,t){return x.apply(this,arguments)})},{key:"updateUserProgress",value:(w=pg(cg().m(function e(t,n){var r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=this.getCurrentUserId(),a=Pf(zm,"users",r,"progress",t),e.n=1,Pp(a,dg(dg({},n),{},{updatedAt:Date.now()}));case 1:e.n=3;break;case 2:throw e.p=2,i=e.v,console.error("Error updating user progress:",i),i;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e,t){return w.apply(this,arguments)})},{key:"getUserPlan",value:(b=pg(cg().m(function e(){var t,n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=dp(Af(zm,"users",t,"plans")),e.n=1,Cp(n);case 1:if(!(r=e.v).empty){e.n=2;break}return e.a(2,null);case 2:return a=r.docs[0],e.a(2,dg({id:a.id,userId:t},a.data()));case 3:return e.p=3,i=e.v,console.error("Error getting user plan:",i),e.a(2,null)}},e,this,[[0,3]])})),function(){return b.apply(this,arguments)})},{key:"createUserPlan",value:(v=pg(cg().m(function e(t){var n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=this.getCurrentUserId(),console.log(" FirebaseService.createUserPlan - userId:",n),console.log(" FirebaseService.createUserPlan - plan:",t),r=dg(dg({},t),{},{createdAt:Date.now(),updatedAt:Date.now()}),console.log(" FirebaseService.createUserPlan - planData:",r),e.n=1,Op(Af(zm,"users",n,"plans"),r);case 1:return a=e.v,console.log(" FirebaseService.createUserPlan - Success! docRef.id:",a.id),e.a(2,a.id);case 2:throw e.p=2,i=e.v,console.error(" FirebaseService.createUserPlan - Error:",i),i;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return v.apply(this,arguments)})},{key:"getUserProblemAreas",value:(y=pg(cg().m(function e(){var t,n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=dp(Af(zm,"users",t,"problemAreas"),gp("lastOccurred","desc")),e.n=1,Cp(n);case 1:return r=e.v,e.a(2,r.docs.map(function(e){return e.data()}));case 2:return e.p=2,a=e.v,console.error("Error getting user problem areas:",a),e.a(2,[])}},e,this,[[0,2]])})),function(){return y.apply(this,arguments)})},{key:"addProblemArea",value:(g=pg(cg().m(function e(t){var n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=this.getCurrentUserId(),r="".concat(t.surahId,"-").concat(t.ayahId,"-").concat(t.wordId||"all","-").concat(t.type),a=Pf(zm,"users",n,"problemAreas",r),e.n=1,Ap(a,dg(dg({},t),{},{lastOccurred:Date.now(),occurrenceCount:1}),{merge:!0});case 1:e.n=3;break;case 2:throw e.p=2,i=e.v,console.error("Error adding problem area:",i),i;case 3:return e.a(2)}},e,this,[[0,2]])})),function(e){return g.apply(this,arguments)})},{key:"getSurahWithAyahs",value:(m=pg(cg().m(function e(t){var n,r,a,i,o;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Promise.all([this.getSurah(t),this.getAyahs(t)]);case 1:return n=e.v,r=og(n,2),a=r[0],i=r[1],e.a(2,a?{surah:a,ayahs:i}:null);case 2:return e.p=2,o=e.v,console.error("Error getting surah with ayahs:",o),e.a(2,null)}},e,this,[[0,2]])})),function(e){return m.apply(this,arguments)})},{key:"getAyahWithWords",value:(p=pg(cg().m(function e(t,n){var r,a,i,o,s;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Promise.all([this.getAyah(t,n),this.getWords(t,n)]);case 1:return r=e.v,a=og(r,2),i=a[0],o=a[1],e.a(2,i?{ayah:i,words:o}:null);case 2:return e.p=2,s=e.v,console.error("Error getting ayah with words:",s),e.a(2,null)}},e,this,[[0,2]])})),function(e,t){return p.apply(this,arguments)})},{key:"createReference",value:function(e,t,n){var r="surah-".concat(e);return void 0!==t&&(r+="-ayah-".concat(t)),void 0!==n&&(r+="-word-".concat(n)),r}},{key:"parseReference",value:function(e){var t=e.split("-"),n={surahId:parseInt(t[1])};return"ayah"===t[2]&&t[3]&&(n.ayahId=parseInt(t[3])),"word"===t[4]&&t[5]&&(n.wordId=parseInt(t[5])),n}},{key:"hasCompletedOnboarding",value:(f=pg(cg().m(function e(){var t,n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=Pf(zm,"users",t),e.n=1,Tp(n);case 1:if((r=e.v).exists()){e.n=2;break}return e.a(2,!1);case 2:return a=r.data(),e.a(2,(null==a?void 0:a.hasCompletedOnboarding)||!1);case 3:return e.p=3,i=e.v,console.error("Error checking onboarding status:",i),e.a(2,!1)}},e,this,[[0,3]])})),function(){return f.apply(this,arguments)})},{key:"getCurrentPlan",value:(h=pg(cg().m(function e(){return cg().w(function(e){for(;;)if(0===e.n)return e.a(2,this.getUserPlan())},e,this)})),function(){return h.apply(this,arguments)})},{key:"getDueCards",value:(d=pg(cg().m(function e(){var t,n,r,a,i;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=Date.now(),r=dp(Af(zm,"users",t,"progress"),fp("dueAt","<=",n),gp("dueAt","asc")),e.n=1,Cp(r);case 1:return a=e.v,e.a(2,a.docs.map(function(e){return dg({id:e.id,userId:t},e.data())}));case 2:return e.p=2,i=e.v,console.error("Error getting due cards:",i),e.a(2,[])}},e,this,[[0,2]])})),function(){return d.apply(this,arguments)})},{key:"getLearningCards",value:(u=pg(cg().m(function e(){var t,n,r,a;return cg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=this.getCurrentUserId(),n=dp(Af(zm,"users",t,"progress"),fp("ease","==",0),gp("createdAt","asc")),e.n=1,Cp(n);case 1:return r=e.v,e.a(2,r.docs.map(function(e){return dg({id:e.id,userId:t},e.data())}));case 2:return e.p=2,a=e.v,console.error("Error getting learning cards:",a),e.a(2,[])}},e,this,[[0,2]])})),function(){return u.apply(this,arguments)})},{key:"createSession",value:(l=pg(cg().m(function e(t){return cg().w(function(e){for(;;)if(0===e.n)return e.a(2,this.createUserSession(t))},e,this)})),function(e){return l.apply(this,arguments)})},{key:"getCurrentSession",value:(c=pg(cg().m(function e(){return cg().w(function(e){for(;;)if(0===e.n)return e.a(2,this.getUserSession())},e,this)})),function(){return c.apply(this,arguments)})},{key:"updateSession",value:(s=pg(cg().m(function e(t,n){return cg().w(function(e){for(;;)if(0===e.n)return e.a(2,this.updateUserSession(t,n))},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"createCard",value:(o=pg(cg().m(function e(t){var n,r;return cg().w(function(e){for(;;)switch(e.n){case 0:return n=this.getCurrentUserId(),e.n=1,Op(Af(zm,"users",n,"progress"),dg(dg({},t),{},{createdAt:Date.now(),updatedAt:Date.now()}));case 1:return r=e.v,e.a(2,r.id)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"updateCard",value:(i=pg(cg().m(function e(t,n){var r,a;return cg().w(function(e){for(;;)switch(e.n){case 0:return r=this.getCurrentUserId(),a=Pf(zm,"users",r,"progress",t),e.n=1,Pp(a,dg(dg({},n),{},{updatedAt:Date.now()}));case 1:return e.a(2)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"getCardsBySurah",value:(a=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.n){case 0:return n=this.getCurrentUserId(),r=dp(Af(zm,"users",n,"progress"),fp("surah","==",t)),e.n=1,Cp(r);case 1:return a=e.v,e.a(2,a.docs.map(function(e){return dg({id:e.id,userId:n},e.data())}))}},e,this)})),function(e){return a.apply(this,arguments)})},{key:"getAttemptsByCard",value:(r=pg(cg().m(function e(t){var n,r,a;return cg().w(function(e){for(;;)switch(e.n){case 0:return n=this.getCurrentUserId(),r=dp(Af(zm,"users",n,"attempts"),fp("cardId","==",t),gp("ts","desc")),e.n=1,Cp(r);case 1:return a=e.v,e.a(2,a.docs.map(function(e){return dg({id:e.id,userId:n},e.data())}))}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"createAttempt",value:(n=pg(cg().m(function e(t){return cg().w(function(e){for(;;)if(0===e.n)return e.a(2,this.createUserAttempt(t))},e,this)})),function(e){return n.apply(this,arguments)})}],t&&mg(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a,i,o,s,c,l,u,d,h,f,p,m,g,y,v,b,w,x,E,k,S,_,N,T,I,C,A,P,O,R,D,M,L}();const vg=yg;function bg(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return wg(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(wg(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,wg(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,wg(d,"constructor",l),wg(l,"constructor",c),c.displayName="GeneratorFunction",wg(l,a,"GeneratorFunction"),wg(d),wg(d,a,"Generator"),wg(d,r,function(){return this}),wg(d,"toString",function(){return"[object Generator]"}),(bg=function(){return{w:i,m:h}})()}function wg(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}wg=function(e,t,n,r){function i(t,n){wg(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},wg(e,t,n,r)}function xg(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Eg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kg(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Sg=function(e){var t=e.onAuthSuccess,n=Eg(o.useState(!1),2),r=n[0],a=n[1],i=Eg(o.useState(null),2),s=i[0],c=i[1],l=function(){var e,n=(e=bg().m(function e(){var n;return bg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a(!0),c(null),e.n=1,Jm.signInWithGoogle();case 1:t(),e.n=3;break;case 2:e.p=2,n=e.v,console.error("Sign-in error:",n),c("Failed to sign in. Please try again.");case 3:return e.p=3,a(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){xg(i,r,a,o,s,"next",e)}function s(e){xg(i,r,a,o,s,"throw",e)}o(void 0)})});return function(){return n.apply(this,arguments)}}();return o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},o.createElement("div",{className:"max-w-md w-full"},o.createElement("div",{className:"text-center mb-8"},o.createElement("div",{className:"w-16 h-16 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-4"},o.createElement("span",{className:"text-dark-text text-2xl font-medium"},"")),o.createElement("h1",{className:"text-3xl font-semibold text-dark-text mb-2"},"Manzil"),o.createElement("p",{className:"text-dark-text-secondary"},"Quran memorization with spaced repetition")),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-8 border border-dark-border"},o.createElement("div",{className:"text-center mb-6"},o.createElement("h2",{className:"text-xl font-medium text-dark-text mb-2"},"Welcome Back"),o.createElement("p",{className:"text-dark-text-secondary text-sm"},"Sign in to continue your memorization journey")),o.createElement("button",{onClick:l,disabled:r,className:"w-full bg-white hover:bg-gray-50 text-gray-900 font-medium py-3 px-4 rounded-xl border border-gray-300 transition-colors duration-200 flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed"},r?o.createElement("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-gray-600 rounded-full animate-spin"}):o.createElement("svg",{className:"w-5 h-5",viewBox:"0 0 24 24"},o.createElement("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),o.createElement("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),o.createElement("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),o.createElement("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})),o.createElement("span",null,r?"Signing in...":"Continue with Google")),s&&o.createElement("div",{className:"mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-xl"},o.createElement("p",{className:"text-red-400 text-sm text-center"},s)),o.createElement("div",{className:"mt-6 text-center"},o.createElement("p",{className:"text-dark-text-muted text-xs"},"By signing in, you agree to our Terms of Service and Privacy Policy"))),o.createElement("div",{className:"mt-8 grid grid-cols-1 gap-4"},o.createElement("div",{className:"flex items-center gap-3 text-dark-text-secondary"},o.createElement("div",{className:"w-2 h-2 bg-accent rounded-full"}),o.createElement("span",{className:"text-sm"},"Spaced repetition for optimal retention")),o.createElement("div",{className:"flex items-center gap-3 text-dark-text-secondary"},o.createElement("div",{className:"w-2 h-2 bg-accent rounded-full"}),o.createElement("span",{className:"text-sm"},"Weak-first ordering for efficient learning")),o.createElement("div",{className:"flex items-center gap-3 text-dark-text-secondary"},o.createElement("div",{className:"w-2 h-2 bg-accent rounded-full"}),o.createElement("span",{className:"text-sm"},"Progress tracking and analytics")))))},_g=function(e){var t=e.data,n=e.onUpdate,r=e.onNext,a=function(e){n({intent:e})},i=void 0!==t.intent;return o.createElement("div",{className:"text-center"},o.createElement("div",{className:"w-20 h-20 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-6"},o.createElement("span",{className:"text-dark-text text-3xl font-medium"},"")),o.createElement("h1",{className:"text-3xl font-semibold text-dark-text mb-4"},"Welcome to ",o.createElement("span",{className:"text-accent"},"Manzil")),o.createElement("p",{className:"text-dark-text-secondary mb-8 text-lg"},"Let's help you start your journey to memorize the Qur'an."),o.createElement("div",{className:"space-y-4 mb-8"},o.createElement("button",{onClick:function(){return a("new")},className:"w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ".concat("new"===t.intent?"border-accent bg-accent/10 text-dark-text":"border-dark-border bg-dark-surface-hover text-dark-text-secondary hover:border-dark-text-secondary hover:text-dark-text")},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat("new"===t.intent?"border-accent bg-accent":"border-dark-border")},"new"===t.intent&&o.createElement("div",{className:"w-2 h-2 bg-dark-text rounded-full"})),o.createElement("div",null,o.createElement("div",{className:"font-medium text-lg"},"I'm starting fresh"),o.createElement("div",{className:"text-sm opacity-80"},"Begin memorizing from the beginning")))),o.createElement("button",{onClick:function(){return a("continuing")},className:"w-full p-6 rounded-xl border-2 transition-all duration-200 text-left ".concat("continuing"===t.intent?"border-accent bg-accent/10 text-dark-text":"border-dark-border bg-dark-surface-hover text-dark-text-secondary hover:border-dark-text-secondary hover:text-dark-text")},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat("continuing"===t.intent?"border-accent bg-accent":"border-dark-border")},"continuing"===t.intent&&o.createElement("div",{className:"w-2 h-2 bg-dark-text rounded-full"})),o.createElement("div",null,o.createElement("div",{className:"font-medium text-lg"},"I'm continuing"),o.createElement("div",{className:"text-sm opacity-80"},"Resume from a surah I already know"))))),o.createElement("button",{onClick:r,disabled:!i,className:"btn-primary text-lg px-8 py-4 disabled:opacity-50 disabled:cursor-not-allowed"},"Continue"))},Ng=function(e){e.data;var t=e.onUpdate,n=e.onNext,r=e.onPrev;return o.createElement("div",null,o.createElement("div",{className:"text-center mb-8"},o.createElement("h2",{className:"text-2xl font-semibold text-dark-text mb-2"},"Personal Preferences"),o.createElement("p",{className:"text-dark-text-secondary"},"Customize your memorization experience")),o.createElement("div",{className:"space-y-8"},o.createElement("div",{className:"text-center py-12"},o.createElement("div",{className:"w-16 h-16 bg-dark-surface-hover rounded-full flex items-center justify-center mx-auto mb-6"},o.createElement("svg",{className:"w-8 h-8 text-dark-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.createElement("h3",{className:"text-xl font-semibold text-dark-text mb-4"},"Preferences Coming Soon"),o.createElement("p",{className:"text-dark-text-secondary mb-6 max-w-md mx-auto"},"We're working on customizable preferences for reciter selection, tajwd colors, and interface language. For now, we'll use the default settings to get you started."),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 max-w-sm mx-auto"},o.createElement("div",{className:"text-sm text-dark-text-secondary"},o.createElement("div",{className:"font-medium text-dark-text mb-2"},"Default Settings:"),o.createElement("div",null," Reciter: Mishari Rashid Alafasy"),o.createElement("div",null," Tajwd Colors: Enabled"),o.createElement("div",null," Language: English"))))),o.createElement("div",{className:"flex justify-between mt-8"},o.createElement("button",{onClick:r,className:"btn-secondary px-6 py-3"},"Back"),o.createElement("button",{onClick:function(){t({preferences:{reciter:"mishari",tajwidColors:!0,language:"en"}}),n()},className:"btn-primary px-6 py-3"},"Continue")))},Tg=function(e){e.data;var t=e.onUpdate,n=e.onNext,r=e.onPrev;return o.createElement("div",null,o.createElement("div",{className:"text-center mb-8"},o.createElement("h2",{className:"text-2xl font-semibold text-dark-text mb-2"},"Starting Point"),o.createElement("p",{className:"text-dark-text-secondary"},"We'll start with Al-Ftiah (The Opening)")),o.createElement("div",{className:"space-y-8"},o.createElement("div",{className:"text-center py-12"},o.createElement("div",{className:"w-16 h-16 bg-dark-surface-hover rounded-full flex items-center justify-center mx-auto mb-6"},o.createElement("svg",{className:"w-8 h-8 text-dark-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.createElement("h3",{className:"text-xl font-semibold text-dark-text mb-4"},"Custom Starting Point Coming Soon"),o.createElement("p",{className:"text-dark-text-secondary mb-6 max-w-md mx-auto"},"We're working on allowing you to choose your own starting point. For now, we'll begin with Al-Ftiah to get you started with your memorization journey."),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 max-w-sm mx-auto"},o.createElement("div",{className:"text-sm text-dark-text-secondary"},o.createElement("div",{className:"font-medium text-dark-text mb-2"},"Starting Point:"),o.createElement("div",null," Surah: Al-Ftiah (The Opening)"),o.createElement("div",null," Starting from: yah 1"),o.createElement("div",null," Total yt: 7"))))),o.createElement("div",{className:"flex justify-between mt-8"},o.createElement("button",{onClick:r,className:"btn-secondary px-6 py-3"},"Back"),o.createElement("button",{onClick:function(){t({startingPoint:{surah:1,startAyah:1}}),n()},className:"btn-primary px-6 py-3"},"Continue")))},Ig=function(e){e.data;var t=e.onUpdate,n=e.onNext,r=e.onPrev;return o.createElement("div",null,o.createElement("div",{className:"text-center mb-8"},o.createElement("h2",{className:"text-2xl font-semibold text-dark-text mb-2"},"Daily Commitment"),o.createElement("p",{className:"text-dark-text-secondary"},"How much time can you give to Manzil each day?")),o.createElement("div",{className:"space-y-8"},o.createElement("div",{className:"text-center py-12"},o.createElement("div",{className:"w-16 h-16 bg-dark-surface-hover rounded-full flex items-center justify-center mx-auto mb-6"},o.createElement("svg",{className:"w-8 h-8 text-dark-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.createElement("h3",{className:"text-xl font-semibold text-dark-text mb-4"},"Custom Daily Commitment Coming Soon"),o.createElement("p",{className:"text-dark-text-secondary mb-6 max-w-md mx-auto"},"We're working on allowing you to customize your daily memorization goals. For now, we'll start with a manageable 4 yt per day to help you build the habit."),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 max-w-sm mx-auto"},o.createElement("div",{className:"text-sm text-dark-text-secondary"},o.createElement("div",{className:"font-medium text-dark-text mb-2"},"Daily Goal:"),o.createElement("div",null," New yt: 4 per day"),o.createElement("div",null," Estimated time: ~15 minutes"),o.createElement("div",null," Perfect for busy schedules"))))),o.createElement("div",{className:"flex justify-between"},o.createElement("button",{onClick:r,className:"btn-secondary px-6 py-3"},"Back"),o.createElement("button",{onClick:function(){t({dailyCommitment:{newPerDay:4,estimatedMinutes:15}}),n()},className:"btn-primary px-6 py-3"},"Continue")))},Cg=function(e){e.data;var t=e.onUpdate,n=e.onNext,r=e.onPrev;return o.createElement("div",null,o.createElement("div",{className:"text-center mb-8"},o.createElement("h2",{className:"text-2xl font-semibold text-dark-text mb-2"},"Review Settings"),o.createElement("p",{className:"text-dark-text-secondary"},"Choose how you'd like Manzil to review your memorization")),o.createElement("div",{className:"space-y-8"},o.createElement("div",{className:"text-center py-12"},o.createElement("div",{className:"w-16 h-16 bg-dark-surface-hover rounded-full flex items-center justify-center mx-auto mb-6"},o.createElement("svg",{className:"w-8 h-8 text-dark-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.createElement("h3",{className:"text-xl font-semibold text-dark-text mb-4"},"Review Settings Coming Soon"),o.createElement("p",{className:"text-dark-text-secondary mb-6 max-w-md mx-auto"},"We're working on customizable review settings and spaced repetition algorithms. For now, we'll use the recommended settings to optimize your memorization."),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 max-w-sm mx-auto"},o.createElement("div",{className:"text-sm text-dark-text-secondary"},o.createElement("div",{className:"font-medium text-dark-text mb-2"},"Review Settings:"),o.createElement("div",null," Focus Style: Weak-first (Recommended)"),o.createElement("div",null," Review Ratio: 1:3 (Balanced)"),o.createElement("div",null," Spaced Repetition: Enabled"))))),o.createElement("div",{className:"flex justify-between mt-8"},o.createElement("button",{onClick:r,className:"btn-secondary px-6 py-3"},"Back"),o.createElement("button",{onClick:function(){t({reviewSettings:{reviewStyle:"weak-first",ratioNewToReview:"1:3"}}),n()},className:"btn-primary px-6 py-3"},"Continue")))},Ag=function(e){var t,n,r=e.data,a=e.onComplete,i=e.onPrev,s=e.isLoading;return o.createElement("div",{className:"text-center"},o.createElement("div",{className:"w-20 h-20 bg-accent rounded-full flex items-center justify-center mx-auto mb-6"},o.createElement("svg",{className:"w-10 h-10 text-dark-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))),o.createElement("h2",{className:"text-3xl font-semibold text-dark-text mb-4"},"All Set!"),o.createElement("p",{className:"text-dark-text-secondary mb-8 text-lg"},"Your journey begins today. Here's your personalized plan:"),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-6 mb-8 text-left"},o.createElement("h3",{className:"font-semibold text-dark-text mb-4"},"Your Plan Summary"),o.createElement("div",{className:"space-y-3"},o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"text-dark-text-secondary"},"Starting Point:"),o.createElement("span",{className:"text-dark-text font-medium"},{1:"Al-Ftiah",2:"Al-Baqarah",78:"An-Naba'"}[n=r.startingPoint.surah]||"Surah ".concat(n),", yah ",r.startingPoint.startAyah)),o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"text-dark-text-secondary"},"Daily Goal:"),o.createElement("span",{className:"text-dark-text font-medium"},r.dailyCommitment.newPerDay," yt (",r.dailyCommitment.estimatedMinutes," min)")),o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"text-dark-text-secondary"},"Review Style:"),o.createElement("span",{className:"text-dark-text font-medium"},"weak-first"===r.reviewSettings.reviewStyle?"Weak-first":"Page-run")),o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"text-dark-text-secondary"},"Reciter:"),o.createElement("span",{className:"text-dark-text font-medium"},{mishari:"Mishari Rashid Alafasy",husary:"Mahmoud Khalil Al-Husary",afasy:"Abdul Rahman Al-Afasy"}[t=r.preferences.reciter]||t)),o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"text-dark-text-secondary"},"Tajwd Colors:"),o.createElement("span",{className:"text-dark-text font-medium"},r.preferences.tajwidColors?"Enabled":"Disabled")),o.createElement("div",{className:"flex justify-between"},o.createElement("span",{className:"text-dark-text-secondary"},"Language:"),o.createElement("span",{className:"text-dark-text font-medium"},"en"===r.preferences.language?"English":"ur"===r.preferences.language?"Urdu":"")))),o.createElement("div",{className:"bg-accent/10 border border-accent/20 rounded-xl p-6 mb-8"},o.createElement("div",{className:"text-dark-text font-medium mb-2"}," Ready to begin your memorization journey?"),o.createElement("div",{className:"text-dark-text-secondary text-sm"},"Your first session is ready with ",r.dailyCommitment.newPerDay," yt to memorize. Manzil will guide you through each step with spaced repetition.")),o.createElement("div",{className:"flex justify-between"},o.createElement("button",{onClick:i,disabled:s,className:"btn-secondary px-6 py-3 disabled:opacity-50"},"Back"),o.createElement("button",{onClick:a,disabled:s,className:"btn-primary px-8 py-3 text-lg disabled:opacity-50 disabled:cursor-not-allowed"},s?o.createElement("div",{className:"flex items-center gap-2"},o.createElement("div",{className:"w-4 h-4 border-2 border-dark-text border-t-transparent rounded-full animate-spin"}),"Setting up..."):"Start Session")))};function Pg(e){return Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(e)}function Og(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Rg(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Rg(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Rg(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,Rg(d,"constructor",l),Rg(l,"constructor",c),c.displayName="GeneratorFunction",Rg(l,a,"GeneratorFunction"),Rg(d),Rg(d,a,"Generator"),Rg(d,r,function(){return this}),Rg(d,"toString",function(){return"[object Generator]"}),(Og=function(){return{w:i,m:h}})()}function Rg(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Rg=function(e,t,n,r){function i(t,n){Rg(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Rg(e,t,n,r)}function Dg(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mg(Object(n),!0).forEach(function(t){jg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jg(e,t,n){return(t=function(e){var t=function(e){if("object"!=Pg(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Pg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pg(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ug(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ug(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Vg=function(){var e=Y(),t=Fg((0,o.useState)(1),2),n=t[0],r=t[1],a=Fg((0,o.useState)({}),2),i=a[0],s=a[1],c=Fg((0,o.useState)(!1),2),l=c[0],u=c[1],d=function(e){s(function(t){return Lg(Lg({},t),e)})},h=function(){n<6&&r(n+1)},f=function(){n>1&&r(n-1)},p=function(){var t,n=(t=Og().m(function t(){var n,r,a,o,s,c,l,d,h,f,p,m;return Og().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,u(!0),console.log(" Completing onboarding..."),console.log(" Onboarding data:",i),d=vg.getCurrentUserId(),console.log(" Current user ID:",d),h={id:"profile",userId:d,reciter:(null===(n=i.preferences)||void 0===n?void 0:n.reciter)||"mishari",tajwidColors:(null===(r=i.preferences)||void 0===r?void 0:r.tajwidColors)||!0,language:(null===(a=i.preferences)||void 0===a?void 0:a.language)||"en",baselineMsPerWord:420,hesitationThresholdMs:380,revealMode:"mushaf-progressive",voiceOnsetMinMs:120,maxWordsPerVoicedBlock:2,wordLengthWeight:{},hasCompletedOnboarding:!0,createdAt:Date.now(),updatedAt:Date.now()},console.log(" User profile to create:",h),console.log(" Creating user profile in Firebase..."),t.n=1,vg.createUserProfile(h);case 1:return console.log(" User profile created"),f={id:"plan",userId:d,surahId:(null===(o=i.startingPoint)||void 0===o?void 0:o.surah)||1,startAyahId:(null===(s=i.startingPoint)||void 0===s?void 0:s.startAyah)||1,newPerDay:(null===(c=i.dailyCommitment)||void 0===c?void 0:c.newPerDay)||4,ratioNewToReview:(null===(l=i.reviewSettings)||void 0===l?void 0:l.ratioNewToReview)||"1:3",targetDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],createdAt:Date.now(),updatedAt:Date.now()},console.log(" User plan to create:",f),console.log(" Creating user plan in Firebase..."),t.n=2,vg.createUserPlan(f);case 2:console.log(" User plan created"),p={preferences:i.preferences||{reciter:"mishari",tajwidColors:!0,language:"en"},startingPoint:i.startingPoint||{surah:1,startAyah:1},dailyCommitment:i.dailyCommitment||{newPerDay:4,estimatedMinutes:15},reviewSettings:i.reviewSettings||{reviewStyle:"weak-first",ratioNewToReview:"1:3"},completedAt:Date.now()},localStorage.setItem("manzil-onboarding-data",JSON.stringify(p)),console.log(" Onboarding completed successfully"),e("/today"),t.n=4;break;case 3:t.p=3,m=t.v,console.error(" Onboarding failed:",m),alert("Failed to complete onboarding. Please try again.");case 4:return t.p=4,u(!1),t.f(4);case 5:return t.a(2)}},t,null,[[0,3,4,5]])}),function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(e){Dg(i,r,a,o,s,"next",e)}function s(e){Dg(i,r,a,o,s,"throw",e)}o(void 0)})});return function(){return n.apply(this,arguments)}}();return o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},o.createElement("div",{className:"max-w-2xl w-full"},o.createElement("div",{className:"mb-8"},o.createElement("div",{className:"flex items-center justify-between mb-2"},o.createElement("span",{className:"text-sm text-dark-text-secondary"},"Step ",n," of ",6),o.createElement("span",{className:"text-sm text-dark-text-secondary"},Math.round(n/6*100),"%")),o.createElement("div",{className:"w-full bg-dark-surface rounded-full h-2"},o.createElement("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:"".concat(n/6*100,"%")}}))),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-8 border border-dark-border"},function(){switch(n){case 1:return o.createElement(_g,{data:i,onUpdate:d,onNext:h});case 2:return o.createElement(Ng,{data:i,onUpdate:d,onNext:h,onPrev:f});case 3:return o.createElement(Tg,{data:i,onUpdate:d,onNext:h,onPrev:f});case 4:return o.createElement(Ig,{data:i,onUpdate:d,onNext:h,onPrev:f});case 5:return o.createElement(Cg,{data:i,onUpdate:d,onNext:h,onPrev:f});case 6:return o.createElement(Ag,{data:i,onComplete:p,onPrev:f,isLoading:l});default:return null}}())))};function zg(e){return function(e){if(Array.isArray(e))return Qg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Kg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bg(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return $g(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($g(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,$g(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,$g(d,"constructor",l),$g(l,"constructor",c),c.displayName="GeneratorFunction",$g(l,a,"GeneratorFunction"),$g(d),$g(d,a,"Generator"),$g(d,r,function(){return this}),$g(d,"toString",function(){return"[object Generator]"}),(Bg=function(){return{w:i,m:h}})()}function $g(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}$g=function(e,t,n,r){function i(t,n){$g(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},$g(e,t,n,r)}function qg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kg(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Gg(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Wg(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){Gg(i,r,a,o,s,"next",e)}function s(e){Gg(i,r,a,o,s,"throw",e)}o(void 0)})}}function Hg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||Kg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kg(e,t){if(e){if("string"==typeof e)return Qg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qg(e,t):void 0}}function Qg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Yg=function(){var e,t=Y(),n=Hg((0,o.useState)(null),2),r=(n[0],n[1],Hg((0,o.useState)([]),2)),a=r[0],i=(r[1],Hg((0,o.useState)([]),2)),s=(i[0],i[1],Hg((0,o.useState)(!0),2)),c=s[0],l=s[1],u=Hg((0,o.useState)(!1),2),d=(u[0],u[1]),h=Hg((0,o.useState)(!1),2),f=h[0],p=h[1],m=Hg((0,o.useState)(!1),2),g=m[0],y=m[1],v=Hg((0,o.useState)(null),2),b=v[0],w=v[1],x=Hg((0,o.useState)("An-Nas"),2),E=x[0],k=x[1],S=Hg((0,o.useState)(!0),2),_=S[0],N=S[1],T=Hg((0,o.useState)([]),2),I=T[0],C=T[1],A=Hg((0,o.useState)(0),2),P=A[0],O=A[1];(0,o.useEffect)(function(){var e=function(){var e=Wg(Bg().m(function e(){var t,n,r,a,i,o,s,c,u,h,f,m,g,v,b,x,E,S,_,T,I,A,P,R,D,M,L;return Bg().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l(!0),console.log(" Initializing authentication..."),e.n=1,Jm.initializeAuth();case 1:if(!(t=e.v)){e.n=19;break}return console.log(" User authenticated:",t.email),p(!0),e.n=2,vg.hasCompletedOnboarding();case 2:if(e.v){e.n=3;break}console.log(" User needs onboarding"),y(!0),d(!0),e.n=18;break;case 3:if(console.log(" User has completed onboarding, loading session doc..."),!(r=null===(n=Bm.currentUser)||void 0===n?void 0:n.uid)){e.n=17;break}return a=Pf(zm,"users",r,"sessions","current-session"),e.n=4,Tp(a);case 4:if(!(i=e.v).exists()){e.n=17;break}return s=i.data(),w(s),c=(null==s?void 0:s.surahId)||114,u=Pf(zm,"surahs",String(c)),e.n=5,Tp(u);case 5:return(h=e.v).exists()?(f=h.data(),k(f.nameEn)):k("Error loading surah name"),m=!1,g=Af(Pf(zm,"users",r),"sessions"),e.n=6,Cp(dp(g,gp("createdAt","desc")));case 6:return e.v.forEach(function(e){if("current-session"!==e.id){var t=e.data();Number(null==t?void 0:t.surahId)===Number(c)&&(m=!0)}}),v=Array.isArray(null==s?void 0:s.reviewQueue)&&s.reviewQueue.length>0,N(!m&&!v),b=Af(Pf(zm,"surahs",String(c)),"ayahs"),e.n=7,Cp(dp(b,gp("ayah","asc")));case 7:x=e.v,E=x.docs.map(function(e){var t,n=e.data(),r=Number(null==n||null===(t=n.meta)||void 0===t?void 0:t.wordCount)||0;return{ayahId:Number(null==n?void 0:n.ayah),wordCount:r}}),S=((null==s||null===(o=s.nextUpPlan)||void 0===o?void 0:o.sequence)||[]).filter(function(e){return"learn"===e.kind}).map(function(e){return Number(e.ayahId)})[0]||1,_=30,T=45,I=0,A=[],P=qg(E),e.p=8,P.s();case 9:if((R=P.n()).done){e.n=13;break}if(!((D=R.value).ayahId<S)){e.n=10;break}return e.a(3,12);case 10:if(!(I>=_&&I+D.wordCount>T)){e.n=11;break}return e.a(3,13);case 11:if(A.push(D.ayahId),!((I+=D.wordCount)>=_&&I<=T)){e.n=12;break}return e.a(3,13);case 12:e.n=9;break;case 13:e.n=15;break;case 14:e.p=14,M=e.v,P.e(M);case 15:return e.p=15,P.f(),e.f(15);case 16:C(A),O(I);case 17:d(!0);case 18:e.n=20;break;case 19:console.log(" User not authenticated"),p(!1);case 20:e.n=22;break;case 21:e.p=21,L=e.v,console.error("Error initializing data:",L),p(!1);case 22:return e.p=22,l(!1),e.f(22);case 23:return e.a(2)}},e,null,[[8,14,15,16],[0,21,22,23]])}));return function(){return e.apply(this,arguments)}}();e()},[]);var R=E,D=_?[]:Array.from(new Set(((null==b?void 0:b.reviewQueue)||[]).map(function(e){return Number(e.ayahId)}).filter(function(e){return Number.isFinite(e)}))),M=D.length,L=I.length>0?I:((null==b||null===(e=b.nextUpPlan)||void 0===e?void 0:e.sequence)||[]).filter(function(e){return"learn"===e.kind}).map(function(e){return Number(e.ayahId)}).filter(function(e){return Number.isFinite(e)}),j=L.length,F=D.length>0?"".concat(Math.min.apply(Math,zg(D)),"-").concat(Math.max.apply(Math,zg(D))):"None",U=L.length>0?"".concat(Math.min.apply(Math,zg(L)),"-").concat(Math.max.apply(Math,zg(L))):"None",V=M>=20,z=a.sort(function(e,t){return e.ease-t.ease}).slice(0,3).map(function(e){return"yah ".concat(e.ayahId)}),B=Math.round((20*Number(M)+2.5*Number(P||0))/60),$=function(){var e=Wg(Bg().m(function e(){var n,r,a,i,o;return Bg().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,r=null===(n=Bm.currentUser)||void 0===n?void 0:n.uid){e.n=1;break}return e.a(2);case 1:return a={isActive:!0,startedAt:Date.now(),surahId:(null==b?void 0:b.surahId)||114,reviewQueue:D.map(function(e){return{surahId:114,ayahId:e}}),learnQueue:L.map(function(e){return{surahId:114,ayahId:e}}),plannedWordCount:P,createdAt:Date.now(),updatedAt:Date.now()},i=Af(Pf(zm,"users",r),"sessions"),e.n=2,Op(i,a);case 2:t("/session"),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error starting session:",o);case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Wg(Bg().m(function e(){return Bg().w(function(e){for(;;)switch(e.n){case 0:console.log(" Authentication successful, reloading data..."),window.location.reload();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return f||c?g&&!c?o.createElement(Vg,null):c?o.createElement("div",{className:"p-6"},o.createElement("div",{className:"max-w-6xl mx-auto"},o.createElement("div",{className:"text-center"},o.createElement("h1",{className:"text-2xl font-semibold text-dark-text mb-2"},"Loading..."),o.createElement("p",{className:"text-dark-text-secondary"},"Initializing your memorization data")))):o.createElement("div",{className:"p-6"},o.createElement("div",{className:"max-w-6xl mx-auto"},o.createElement("header",{className:"mb-6"},o.createElement("h1",{className:"text-2xl font-semibold text-dark-text flex items-center gap-2"},"Today ",_&&o.createElement("span",{className:"text-[10px] uppercase bg-accent/20 text-accent px-2 py-0.5 rounded"},"New")),o.createElement("p",{className:"text-dark-text-secondary"},R,"  Target: ","")),o.createElement("section",{className:"mb-6"},o.createElement("div",{className:"w-full rounded-2xl bg-dark-surface-hover p-6"},o.createElement("div",{className:"flex items-center justify-between mb-4"},o.createElement("div",null,o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"Today's Session"),o.createElement("div",{className:"text-xl font-medium text-dark-text"},V?"Consolidation Day":"Review  Learn  Memorize")),o.createElement("div",{className:"text-right"},o.createElement("div",{className:"text-sm text-dark-text-secondary"},"ETA"),o.createElement("div",{className:"text-lg font-medium text-accent"},"~",B,"m"))),o.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},o.createElement("div",{className:"bg-dark-surface rounded-xl p-3"},o.createElement("div",{className:"text-xs text-dark-text-secondary mb-1"},"Review Range"),o.createElement("div",{className:"text-sm font-medium text-dark-text"},"yt ",F)),o.createElement("div",{className:"bg-dark-surface rounded-xl p-3"},o.createElement("div",{className:"text-xs text-dark-text-secondary mb-1"},"Learning Range"),o.createElement("div",{className:"text-sm font-medium text-dark-text"},"yt ",U)),o.createElement("div",{className:"bg-dark-surface rounded-xl p-3"},o.createElement("div",{className:"text-xs text-dark-text-secondary mb-1"},"Session Type"),o.createElement("div",{className:"text-sm font-medium text-dark-text"},V?"Consolidation":"Mixed"))),o.createElement("div",{className:"flex items-center justify-between"},o.createElement("div",{className:"text-dark-text-secondary text-sm"},R,"  Review ",M,"  Learn ",j),o.createElement("button",{onClick:$,className:"px-4 py-2 rounded-lg bg-accent text-white hover:opacity-90 focus:outline-none"},"Start Session")),z.length>0&&o.createElement("div",{className:"mb-4"},o.createElement("div",{className:"text-xs text-dark-text-secondary mb-2"},"Priority Problem Areas"),o.createElement("div",{className:"flex flex-wrap gap-2"},z.map(function(e,t){return o.createElement("span",{key:t,className:"px-2 py-1 bg-red-500/20 text-red-400 text-xs rounded-lg border border-red-500/30"},e)}))))),o.createElement("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},o.createElement("div",{className:"rounded-2xl p-6 bg-dark-surface-hover hover:bg-dark-surface focus:outline-none"},o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"Due Review"),o.createElement("div",{className:"flex items-end gap-3"},o.createElement("div",{className:"text-4xl font-bold text-accent"},M),o.createElement("div",{className:"text-dark-text-secondary"},"items")),o.createElement("div",{className:"text-sm text-dark-text-secondary mt-2"},"Weak-first ordering  micro-drills")),o.createElement("div",{className:"rounded-2xl p-6 bg-dark-surface-hover hover:bg-dark-surface focus:outline-none"},o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"New Today"),o.createElement("div",{className:"flex items-end gap-3"},o.createElement("div",{className:"text-4xl font-bold text-accent"},j),o.createElement("div",{className:"text-dark-text-secondary"},"yt")),o.createElement("div",{className:"text-sm text-dark-text-secondary mt-2"},"Lead-in  shadow  mute  active recall"))),V&&o.createElement("section",{className:"mb-6"},o.createElement("div",{className:"rounded-xl border border-accent/40 bg-transparent p-4"},o.createElement("div",{className:"text-dark-text"},"Today is a consolidation day. Focus on strengthening weak areas before learning new yt."))),o.createElement("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},o.createElement("div",{className:"text-center p-4 bg-dark-surface-hover rounded-xl"},o.createElement("div",{className:"text-2xl font-bold text-accent mb-1"},M+j),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Total Items Today")),o.createElement("div",{className:"text-center p-4 bg-dark-surface-hover rounded-xl"},o.createElement("div",{className:"text-2xl font-bold text-accent mb-1"},"~",B,"m"),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Estimated Time")),o.createElement("div",{className:"text-center p-4 bg-dark-surface-hover rounded-xl"},o.createElement("div",{className:"text-2xl font-bold text-accent mb-1"},R),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Current Surah"))))):o.createElement(Sg,{onAuthSuccess:q})},Xg=function(){var e=Y();return o.createElement("div",{className:"px-6 py-10"},o.createElement("div",{className:"max-w-6xl mx-auto"},o.createElement("section",{className:"text-center mb-12"},o.createElement("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-2xl bg-accent/20 text-accent mb-4"},o.createElement("span",{className:"text-lg font-semibold"},"")),o.createElement("h1",{className:"text-3xl md:text-4xl font-semibold text-dark-text mb-3"},"Memorize Quran, beautifully and sustainably"),o.createElement("p",{className:"text-dark-text-secondary max-w-2xl mx-auto"},"Manzil is an iOSstyle memorization experience that guides you through learn  memorize  review with gentle automation. Clear goals, spaced repetition, and hands-free flow."),o.createElement("div",{className:"mt-6"},o.createElement("button",{onClick:function(){return e("/today")},className:"px-5 py-3 rounded-xl bg-accent text-white hover:opacity-90"},"Get Started"))),o.createElement("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-12"},[{title:"Learn",desc:"Segmented guidance and transliteration-friendly flow for first-time learning."},{title:"Memorize",desc:"Micro windows, timing cues, and instant problem area highlighting."},{title:"Review",desc:"Spaced repetition with weak-first ordering to keep you rock-solid."}].map(function(e){return o.createElement("div",{key:e.title,className:"rounded-2xl p-5 bg-dark-surface-hover border border-dark-border"},o.createElement("div",{className:"text-lg font-medium text-dark-text mb-2"},e.title),o.createElement("div",{className:"text-sm text-dark-text-secondary"},e.desc))})),o.createElement("section",{className:"rounded-2xl p-6 bg-dark-surface-hover border border-dark-border"},o.createElement("h2",{className:"text-xl font-medium text-dark-text mb-2"},"Our Mission"),o.createElement("p",{className:"text-dark-text-secondary"},"Make Quran memorization accessible and delightful. Manzil focuses on clarity, comfort, and momentum. We combine thoughtful UX with practical scheduling so you can build a lifelong relationship with the Book."))))},Jg=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>o,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},o=t=e(r,a,i);return i};var Zg=a(242);const{useDebugValue:ey}=o,{useSyncExternalStoreWithSelector:ty}=Zg;let ny=!1;const ry=e=>e,ay=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?Jg(e):Jg)(e):e,n=(e,n)=>function(e,t=ry,n){n&&!ny&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ny=!0);const r=ty(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ey(r),r}(t,e,n);return Object.assign(n,t),n};function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function oy(e){return function(e){if(Array.isArray(e))return sy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return sy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ly(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cy(Object(n),!0).forEach(function(t){uy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uy(e,t,n){return(t=function(e){var t=function(e){if("object"!=iy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=iy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==iy(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dy,hy={userId:"mvp-user-fallback",isActive:!1,queue:[],completedItems:[]},fy=(dy=function(e,t){return{currentPlan:null,session:hy,cards:[],attempts:[],setCurrentPlan:function(t){return e({currentPlan:t})},setSession:function(t){return e(function(e){return{session:ly(ly({},e.session),t)}})},addCard:function(t){return e(function(e){return{cards:[].concat(oy(e.cards),[t])}})},updateCard:function(t,n){return e(function(e){return{cards:e.cards.map(function(e){return e.id===t?ly(ly({},e),n):e})}})},addAttempt:function(t){return e(function(e){return{attempts:[].concat(oy(e.attempts),[t])}})},resetSession:function(){return e({session:hy})},loadOnboardingData:function(){try{var t=localStorage.getItem("manzil-onboarding-data");if(t){var n=JSON.parse(t),r={id:"plan-".concat(n.completedAt),userId:"mvp-user-fallback",surah:n.startingPoint.surah,startAyah:n.startingPoint.startAyah,newPerDay:n.dailyCommitment.newPerDay,ratioNewToReview:n.reviewSettings.ratioNewToReview,targetDate:new Date(Date.now()+31536e6).toISOString().split("T")[0],createdAt:n.completedAt,updatedAt:n.completedAt};e({currentPlan:r}),console.log(" Loaded onboarding data and created plan:",r)}}catch(e){console.error(" Error loading onboarding data:",e)}}}},dy?ay(dy):ay);function py(e){return py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(e)}function my(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return gy(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(gy(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,gy(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,gy(d,"constructor",l),gy(l,"constructor",c),c.displayName="GeneratorFunction",gy(l,a,"GeneratorFunction"),gy(d),gy(d,a,"Generator"),gy(d,r,function(){return this}),gy(d,"toString",function(){return"[object Generator]"}),(my=function(){return{w:i,m:h}})()}function gy(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}gy=function(e,t,n,r){function i(t,n){gy(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},gy(e,t,n,r)}function yy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yy(Object(n),!0).forEach(function(t){by(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function by(e,t,n){return(t=function(e){var t=function(e){if("object"!=py(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=py(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==py(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wy(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function xy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ey(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ey(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ey(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ky=function(e){var t=e.solved/e.total*100,n=2*Math.PI*12,r=n,a=n-t/100*n;return o.createElement("div",{className:"progress-circle"},o.createElement("svg",{viewBox:"0 0 32 32"},o.createElement("circle",{cx:"16",cy:"16",r:"12",fill:"none",strokeWidth:"3",className:"progress-circle-bg"}),o.createElement("circle",{cx:"16",cy:"16",r:"12",fill:"none",strokeWidth:"3",strokeDasharray:r,strokeDashoffset:a,className:"progress-circle-fill",strokeLinecap:"round"})))};const Sy=function(){var e=Y(),t=fy(),n=(t.setCurrentPlan,t.currentPlan),r=xy((0,o.useState)(null),2),a=(r[0],r[1],xy((0,o.useState)(""),2)),i=(a[0],a[1],xy((0,o.useState)(""),2)),s=i[0],c=i[1],l=xy((0,o.useState)("asc"),2),u=l[0],d=l[1],h=xy((0,o.useState)("all"),2),f=h[0],p=(h[1],xy((0,o.useState)([]),2)),m=p[0],g=p[1],y=xy((0,o.useState)(!0),2),v=y[0],b=y[1],w=xy((0,o.useState)(null),2),x=w[0],E=w[1],k=xy((0,o.useState)("details"),2),S=k[0],_=k[1];(0,o.useEffect)(function(){var e=function(){var e,t=(e=my().m(function e(){var t,n,r,a,i;return my().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,b(!0),t=Af(zm,"surahs"),n=dp(t,gp("id","asc")),e.n=1,Cp(n);case 1:r=e.v,a=r.docs.map(function(e){return vy({id:parseInt(e.id)},e.data())}),g(a),e.n=3;break;case 2:e.p=2,i=e.v,console.error("Error fetching surahs:",i);case 3:return e.p=3,b(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){wy(i,r,a,o,s,"next",e)}function s(e){wy(i,r,a,o,s,"throw",e)}o(void 0)})});return function(){return t.apply(this,arguments)}}();e()},[]);var N=m.length,T=function(e){return e>=100?"hard":e>=50?"medium":"easy"},I=m.filter(function(e){var t=e.nameEn.toLowerCase().includes(s.toLowerCase())||e.nameAr.includes(s),n="all"===f||T(e.ayahCount)===f;return t&&n}).sort(function(e,t){return"asc"===u?e.id-t.id:t.id-e.id}),C=function(t){var r;"read"===t?e("/mushaf/".concat(null==x?void 0:x.id)):x&&(r=x.id,(null==n?void 0:n.surah)===r)?e("/session"):_("plan-warning")};return v?o.createElement("div",{className:"p-6"},o.createElement("div",{className:"max-w-7xl mx-auto"},o.createElement("div",{className:"text-center"},o.createElement("h1",{className:"text-2xl font-semibold text-dark-text mb-2"},"Loading..."),o.createElement("p",{className:"text-dark-text-secondary"},"Fetching surahs from database")))):o.createElement("div",{className:"p-6"},o.createElement("div",{className:"max-w-7xl mx-auto"},o.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6"},o.createElement("div",{className:"lg:col-span-4"},o.createElement("div",{className:"card mb-6"},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"flex-1 relative"},o.createElement("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},o.createElement("svg",{className:"h-5 w-5 text-dark-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"}))),o.createElement("input",{type:"text",value:s,onChange:function(e){return c(e.target.value)},className:"search-bar pl-10",placeholder:"Search surahs..."})),o.createElement("button",{onClick:function(){return d("asc"===u?"desc":"asc")},className:"w-10 h-10 bg-dark-surface border border-dark-border rounded-lg flex items-center justify-center hover:bg-dark-surface-hover transition-colors"},o.createElement("svg",{className:"h-5 w-5 text-dark-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"}))),o.createElement("div",{className:"relative"},o.createElement("button",{className:"w-10 h-10 bg-dark-surface border border-dark-border rounded-lg flex items-center justify-center hover:bg-dark-surface-hover transition-colors"},o.createElement("svg",{className:"h-5 w-5 text-dark-text-secondary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.207A1 1 0 013 6.5V4z"})))),o.createElement("div",{className:"flex items-center gap-2"},o.createElement(ky,{solved:0,total:N}),o.createElement("span",{className:"text-sm text-dark-text-secondary"},0,"/",N," Memorized")))),o.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},I.map(function(e){return o.createElement("div",{key:e.id,onClick:function(){return function(e){E(e),_("details")}(e)},className:"surah-tile group cursor-pointer hover:scale-105 transition-transform ".concat("")},o.createElement("div",{className:"flex items-start justify-between mb-3"},o.createElement("div",{className:"flex items-center gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-sm font-semibold ".concat("bg-dark-surface-hover text-dark-text")},e.id),o.createElement("div",null,o.createElement("h3",{className:"font-semibold ".concat("text-dark-text")},e.nameEn),o.createElement("p",{className:"arabic-text text-lg ".concat("text-dark-text-secondary")},e.nameAr))),function(e){switch(e){case"easy":return o.createElement("span",{className:"difficulty-badge difficulty-easy"},"Easy");case"medium":return o.createElement("span",{className:"difficulty-badge difficulty-medium"},"Medium");case"hard":return o.createElement("span",{className:"difficulty-badge difficulty-hard"},"Hard");default:return null}}(T(e.ayahCount))),o.createElement("div",{className:"flex justify-between items-center text-sm ".concat("text-dark-text-muted")},o.createElement("span",null,e.ayahCount," verses"),!1))}))))),x&&o.createElement("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},o.createElement("div",{className:"bg-dark-surface rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},"details"===S&&o.createElement("div",{className:"p-6"},o.createElement("div",{className:"flex items-start justify-between mb-6"},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"w-12 h-12 bg-accent/20 text-accent rounded-xl flex items-center justify-center text-lg font-semibold"},x.id),o.createElement("div",null,o.createElement("h2",{className:"text-2xl font-semibold text-dark-text"},x.nameEn),o.createElement("p",{className:"text-lg text-dark-text-secondary"},x.nameAr))),o.createElement("button",{onClick:function(){E(null),_("details")},className:"w-8 h-8 bg-dark-surface-hover rounded-lg flex items-center justify-center text-dark-text-secondary hover:text-dark-text"},o.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),o.createElement("div",{className:"grid grid-cols-2 gap-4 mb-6"},o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4"},o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"Verses"),o.createElement("div",{className:"text-xl font-semibold text-dark-text"},x.ayahCount)),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4"},o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"Difficulty"),o.createElement("div",{className:"text-xl font-semibold text-dark-text"},T(x.ayahCount).charAt(0).toUpperCase()+T(x.ayahCount).slice(1))),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4"},o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"Revelation"),o.createElement("div",{className:"text-xl font-semibold text-dark-text"},x.revelationPlace)),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4"},o.createElement("div",{className:"text-sm text-dark-text-secondary mb-1"},"Manzil"),o.createElement("div",{className:"text-xl font-semibold text-dark-text"},x.manzil||""))),o.createElement("div",{className:"mb-6"},o.createElement("h3",{className:"text-lg font-semibold text-dark-text mb-3"},"About this Surah"),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4"},o.createElement("p",{className:"text-dark-text-secondary leading-relaxed"},x.nameEn," is a ",x.revelationPlace.toLowerCase()," surah with ",x.ayahCount," verses. It is considered a ",T(x.ayahCount)," difficulty surah for memorization.",x.hasAnySajdah&&" This surah contains verses that require prostration (sajdah)."))),o.createElement("div",{className:"flex justify-end"},o.createElement("button",{onClick:function(){_("mode")},className:"px-6 py-3 bg-accent text-white rounded-xl hover:opacity-90 transition-opacity"},"Start"))),"mode"===S&&o.createElement("div",{className:"p-6"},o.createElement("div",{className:"text-center mb-6"},o.createElement("h2",{className:"text-xl font-semibold text-dark-text mb-2"},"How would you like to engage with ",null==x?void 0:x.nameEn,"?"),o.createElement("p",{className:"text-dark-text-secondary"},"Choose your learning approach")),o.createElement("div",{className:"space-y-4 mb-6"},o.createElement("button",{onClick:function(){return C("read")},className:"w-full p-4 bg-dark-surface-hover rounded-xl text-left hover:bg-dark-surface transition-colors"},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"w-12 h-12 bg-blue-500/20 text-blue-400 rounded-xl flex items-center justify-center"},o.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),o.createElement("div",null,o.createElement("div",{className:"font-semibold text-dark-text"},"Read & Study"),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Browse the Mushaf and study the verses")))),o.createElement("button",{onClick:function(){return C("memorize")},className:"w-full p-4 bg-dark-surface-hover rounded-xl text-left hover:bg-dark-surface transition-colors"},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"w-12 h-12 bg-accent/20 text-accent rounded-xl flex items-center justify-center"},o.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"}))),o.createElement("div",null,o.createElement("div",{className:"font-semibold text-dark-text"},"Memorize"),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Start memorization sessions with spaced repetition"))))),o.createElement("div",{className:"flex justify-between"},o.createElement("button",{onClick:function(){return _("details")},className:"px-4 py-2 text-dark-text-secondary hover:text-dark-text"},"Back"))),"plan-warning"===S&&o.createElement("div",{className:"p-6"},o.createElement("div",{className:"text-center mb-6"},o.createElement("div",{className:"w-16 h-16 bg-yellow-500/20 text-yellow-400 rounded-2xl flex items-center justify-center mx-auto mb-4"},o.createElement("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}))),o.createElement("h2",{className:"text-xl font-semibold text-dark-text mb-2"},"Not in Your Current Plan"),o.createElement("p",{className:"text-dark-text-secondary"},null==x?void 0:x.nameEn," isn't part of your current memorization plan. Would you like to add it as an extra surah or start memorizing it anyway?")),o.createElement("div",{className:"space-y-3 mb-6"},o.createElement("button",{onClick:function(){x&&(console.log("Adding surah to plan:",x.id),e("/session"))},className:"w-full p-4 bg-accent text-white rounded-xl hover:opacity-90 transition-opacity"},"Add to Plan"),o.createElement("button",{onClick:function(){e("/session")},className:"w-full p-4 bg-dark-surface-hover text-dark-text rounded-xl hover:bg-dark-surface transition-colors"},"Start Anyway (Skip Plan)")),o.createElement("div",{className:"flex justify-between"},o.createElement("button",{onClick:function(){return _("mode")},className:"px-4 py-2 text-dark-text-secondary hover:text-dark-text"},"Back"))))))};function _y(e,t,n){var r={Perfect:5,Minor:4,Hesitant:3,Major:2,Forgot:1}[n],a=e;r>=4?a=Math.min(e+.1,2.6):r<=2&&(a=Math.max(e-.2,1.3));var i=t;return r>=4?i=Math.min(1.2*t,10):r<=2&&(i=Math.max(.8*t,.1)),{newEase:a,newStability:i,newInterval:r>=4?Math.max(t*a,1):3===r?Math.max(.5*t,.5):.1}}function Ny(e){return Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ny(e)}function Ty(e){return function(e){if(Array.isArray(e))return My(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Dy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iy(Object(n),!0).forEach(function(t){Ay(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ay(e,t,n){return(t=Uy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Py(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Oy(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Oy(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Oy(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,Oy(d,"constructor",l),Oy(l,"constructor",c),c.displayName="GeneratorFunction",Oy(l,a,"GeneratorFunction"),Oy(d),Oy(d,a,"Generator"),Oy(d,r,function(){return this}),Oy(d,"toString",function(){return"[object Generator]"}),(Py=function(){return{w:i,m:h}})()}function Oy(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Oy=function(e,t,n,r){function i(t,n){Oy(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Oy(e,t,n,r)}function Ry(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Dy(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Dy(e,t){if(e){if("string"==typeof e)return My(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?My(e,t):void 0}}function My(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ly(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function jy(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){Ly(i,r,a,o,s,"next",e)}function s(e){Ly(i,r,a,o,s,"throw",e)}o(void 0)})}}function Fy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uy(r.key),r)}}function Uy(e){var t=function(e){if("object"!=Ny(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Ny(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ny(t)?t:t+""}var Vy=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"calculateWeaknessScore",value:function(e,t){if(0===t.length)return 100;var n=t.slice(0,3),r=n.reduce(function(e,t){return e+{Perfect:5,Minor:4,Hesitant:3,Major:2,Forgot:1}[t.grade]},0)/n.length,a=n.reduce(function(e,t){return e+t.hesitations},0)/n.length,i=n.reduce(function(e,t){return e+t.rlMs},0)/n.length;return 20*(5-r)+10*a+Math.min(i/1e3,30)}},{key:"generateSessionQueue",value:(o=jy(Py().m(function e(){var t,n,r,a,i,o,s,c,l,u,d,h,f,p,m,g,y,v;return Py().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,vg.getDueCards();case 1:return t=e.v,e.n=2,vg.getLearningCards();case 2:return n=e.v,e.n=3,vg.getCurrentPlan();case 3:if(r=e.v){e.n=4;break}return console.log("No active plan found, creating default plan"),e.n=4,vg.createPlan({userId:vg.getCurrentUserId(),surah:78,startAyah:1,newPerDay:3,ratioNewToReview:"1:3",targetDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],createdAt:Date.now(),updatedAt:Date.now()});case 4:a=[],i=Ry(t),e.p=5,i.s();case 6:if((o=i.n()).done){e.n=9;break}return s=o.value,e.n=7,vg.getAttemptsByCard(s.id);case 7:c=e.v,this.calculateWeaknessScore(s,c),a.push({kind:"review",cardId:s.id,surah:s.surah,ayah:s.ayah});case 8:e.n=6;break;case 9:e.n=11;break;case 10:e.p=10,v=e.v,i.e(v);case 11:return e.p=11,i.f(),e.f(11);case 12:a.sort(function(e,t){return e.cardId&&t.cardId,0}),l=(null==r?void 0:r.newPerDay)||3,u=n.slice(0,l),d=Ry(u);try{for(d.s();!(h=d.n()).done;)f=h.value,a.push({kind:"learn",cardId:f.id,surah:f.surah,ayah:f.ayah}),a.push({kind:"memorize",cardId:f.id,surah:f.surah,ayah:f.ayah})}catch(e){d.e(e)}finally{d.f()}if(0!==a.length){e.n=15;break}return console.log("No cards found, creating sample cards for first session"),e.n=13,this.createSampleCards();case 13:return e.n=14,vg.getLearningCards();case 14:p=e.v,m=Ry(p.slice(0,3));try{for(m.s();!(g=m.n()).done;)y=g.value,a.push({kind:"learn",cardId:y.id,surah:y.surah,ayah:y.ayah}),a.push({kind:"memorize",cardId:y.id,surah:y.surah,ayah:y.ayah})}catch(e){m.e(e)}finally{m.f()}case 15:return e.a(2,a)}},e,this,[[5,10,11,12]])})),function(){return o.apply(this,arguments)})},{key:"createSampleCards",value:(i=jy(Py().m(function e(){var t,n,r,a,i;return Py().w(function(e){for(;;)switch(e.n){case 0:t=vg.getCurrentUserId(),n=[{userId:t,type:"ayah",surah:78,ayah:1,ease:2.5,stability:1,interval:0,dueAt:Date.now(),lastScore:0,historyCount:0,updatedAt:Date.now()},{userId:t,type:"ayah",surah:78,ayah:2,ease:2.5,stability:1,interval:0,dueAt:Date.now(),lastScore:0,historyCount:0,updatedAt:Date.now()},{userId:t,type:"ayah",surah:78,ayah:3,ease:2.5,stability:1,interval:0,dueAt:Date.now(),lastScore:0,historyCount:0,updatedAt:Date.now()}],r=0,a=n;case 1:if(!(r<a.length)){e.n=3;break}return i=a[r],e.n=2,vg.createCard(i);case 2:r++,e.n=1;break;case 3:console.log("Created sample cards for first session");case 4:return e.a(2)}},e)})),function(){return i.apply(this,arguments)})},{key:"startSession",value:(a=jy(Py().m(function e(){var t,n,r,a;return Py().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.generateSessionQueue();case 1:if(0!==(t=e.v).length){e.n=2;break}throw new Error("No items to review or learn today!");case 2:return n=vg.getCurrentUserId(),r={userId:n,isActive:!0,currentItem:t[0],queue:t.slice(1),completedItems:[],startTime:Date.now(),createdAt:Date.now()},e.n=3,vg.createSession(r);case 3:return a=e.v,e.a(2,Cy(Cy({},r),{},{id:a}))}},e,this)})),function(){return a.apply(this,arguments)})},{key:"completeCurrentItem",value:(r=jy(Py().m(function e(t,n,r){var a,i,o,s,c,l,u,d,h,f,p,m,g,y,v,b=arguments;return Py().w(function(e){for(;;)switch(e.n){case 0:return i=b.length>3&&void 0!==b[3]&&b[3],o=b.length>4?b[4]:void 0,s=b.length>5?b[5]:void 0,e.n=1,vg.getCurrentSession();case 1:if((c=e.v)&&c.currentItem&&c.id){e.n=2;break}throw new Error("No active session or current item to complete.");case 2:if(l=c.currentItem,u=null,!l.cardId){e.n=4;break}return e.n=3,vg.getCardsBySurah(l.surah).then(function(e){return e.find(function(e){return e.id===l.cardId})});case 3:if(!(d=e.v)){e.n=4;break}return h=_y(d.ease,d.stability,t),f=h.newEase,p=h.newStability,m=h.newInterval,g={Perfect:5,Minor:4,Hesitant:3,Major:2,Forgot:1},u=Cy(Cy({},d),{},{ease:f,stability:p,interval:m,dueAt:Date.now()+24*m*60*60*1e3,lastScore:g[t],historyCount:d.historyCount+1,updatedAt:Date.now()}),e.n=4,vg.updateCard(d.id,u);case 4:return e.n=5,vg.createAttempt({userId:vg.getCurrentUserId(),cardId:(null===(a=u)||void 0===a?void 0:a.id)||"",surah:l.surah,ayah:l.ayah,mode:"window"===l.kind?"memorize":l.kind,rlMs:n,hesitations:r,usedHint:i,grade:t,ts:Date.now(),trace:o,mistakes:s});case 5:return y=c.queue.shift(),v=Cy(Cy({},c),{},{currentItem:y,completedItems:[].concat(Ty(c.completedItems),[l]),isActive:!!y,endTime:y?void 0:Date.now()}),e.n=6,vg.updateSession(c.id,v);case 6:return e.a(2,v)}},e)})),function(e,t,n){return r.apply(this,arguments)})},{key:"getCurrentSession",value:(n=jy(Py().m(function e(){return Py().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,vg.getCurrentSession();case 1:return e.a(2,e.v)}},e)})),function(){return n.apply(this,arguments)})}],t&&Fy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a,i,o}();const zy=function(e){var t=e.problemAreas,n=e.onContinue,r=e.onSkip;return o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},o.createElement("div",{className:"max-w-2xl w-full"},o.createElement("div",{className:"text-center mb-8"},o.createElement("div",{className:"w-16 h-16 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-4"},o.createElement("span",{className:"text-dark-text text-2xl font-medium"},"")),o.createElement("h1",{className:"text-3xl font-semibold text-dark-text mb-2"},"Warm-Up"),o.createElement("p",{className:"text-dark-text-secondary"},"Let's strengthen your problem areas before we begin")),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-6 border border-dark-border mb-6"},o.createElement("h2",{className:"text-xl font-medium text-dark-text mb-4"},"Focus Areas for Today"),t.length>0?o.createElement("div",{className:"space-y-3"},t.map(function(e,t){return o.createElement("div",{key:t,className:"flex items-center gap-3 p-3 bg-red-500/10 border border-red-500/20 rounded-xl"},o.createElement("div",{className:"w-2 h-2 bg-red-400 rounded-full"}),o.createElement("span",{className:"text-dark-text font-medium"},e),o.createElement("span",{className:"text-red-400 text-sm"},"Needs attention"))})):o.createElement("div",{className:"text-center py-8"},o.createElement("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-3"},o.createElement("span",{className:"text-green-400 text-xl"},"")),o.createElement("p",{className:"text-dark-text-secondary"},"No specific problem areas identified"),o.createElement("p",{className:"text-sm text-dark-text-secondary"},"You're doing great!")),o.createElement("div",{className:"mt-6 p-4 bg-accent/10 border border-accent/20 rounded-xl"},o.createElement("h3",{className:"font-medium text-dark-text mb-2"},"Today's Strategy"),o.createElement("ul",{className:"text-sm text-dark-text-secondary space-y-1"},o.createElement("li",null," Start with the weakest yt to build confidence"),o.createElement("li",null," Focus on smooth recitation without hesitations"),o.createElement("li",null," Take your time - quality over speed"),o.createElement("li",null," We'll drill these areas until they're mastered")))),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 mb-6"},o.createElement("div",{className:"flex items-center gap-3 mb-2"},o.createElement("div",{className:"w-2 h-2 bg-accent rounded-full"}),o.createElement("span",{className:"text-dark-text font-medium"},"Session Flow")),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Review  Learn new yt  Memorization drills")),o.createElement("div",{className:"flex justify-between"},o.createElement("button",{onClick:r,className:"btn-secondary px-6 py-3"},"Skip Warm-up"),o.createElement("button",{onClick:n,className:"btn-primary px-8 py-3 text-lg"},"Let's Begin"))))};function By(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return $y(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):($y(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,$y(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,$y(d,"constructor",l),$y(l,"constructor",c),c.displayName="GeneratorFunction",$y(l,a,"GeneratorFunction"),$y(d),$y(d,a,"Generator"),$y(d,r,function(){return this}),$y(d,"toString",function(){return"[object Generator]"}),(By=function(){return{w:i,m:h}})()}function $y(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}$y=function(e,t,n,r){function i(t,n){$y(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},$y(e,t,n,r)}function qy(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Gy(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){qy(i,r,a,o,s,"next",e)}function s(e){qy(i,r,a,o,s,"throw",e)}o(void 0)})}}function Wy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hy(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hy(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Ky=function(e){var t,n=e.session,r=e.onComplete,a=e.onSessionComplete,i=Wy((0,o.useState)(null),2),s=i[0],c=i[1],l=Wy((0,o.useState)(!1),2),u=l[0],d=l[1],h=Wy((0,o.useState)(0),2),f=h[0],p=h[1],m=Wy((0,o.useState)(0),2),g=m[0],y=m[1],v=Wy((0,o.useState)(!1),2),b=v[0],w=v[1],x=Wy((0,o.useState)(!1),2),E=x[0],k=x[1];(0,o.useEffect)(function(){var e;null!==(e=n.currentItem)&&void 0!==e&&e.cardId&&S()},[n.currentItem]);var S=function(){var e=Gy(By().m(function e(){var t,r,a,i;return By().w(function(e){for(;;)switch(e.p=e.n){case 0:if(null!==(t=n.currentItem)&&void 0!==t&&t.cardId){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,vg.getCardsBySurah(n.currentItem.surah);case 2:r=e.v,a=r.find(function(e){return e.id===n.currentItem.cardId}),c(a),e.n=4;break;case 3:e.p=3,i=e.v,console.error("Error loading card:",i);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Gy(By().m(function e(t){var n,i,o,s;return By().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,k(!0),n=Date.now()-f,e.n=1,Vy.completeCurrentItem(t,n,g);case 1:return e.n=2,Vy.getCurrentSession();case 2:if(null!=(i=e.v)&&i.isActive){e.n=3;break}a(),e.n=6;break;case 3:if(c(null),w(!1),d(!1),y(0),null===(o=i.currentItem)||void 0===o||!o.cardId){e.n=5;break}return e.n=4,S();case 4:e.n=6;break;case 5:r();case 6:e.n=8;break;case 7:e.p=7,s=e.v,console.error("Error submitting grade:",s);case 8:return e.p=8,k(!1),e.f(8);case 9:return e.a(2)}},e,null,[[0,7,8,9]])}));return function(t){return e.apply(this,arguments)}}();return s?o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},o.createElement("div",{className:"max-w-4xl w-full"},o.createElement("div",{className:"text-center mb-8"},o.createElement("h1",{className:"text-2xl font-semibold text-dark-text mb-2"},"Review Session"),o.createElement("p",{className:"text-dark-text-secondary"},"Recite yah ",s.ayah," from ",null===(t=n.currentItem)||void 0===t?void 0:t.surah)),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-8 border border-dark-border mb-6"},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"text-3xl font-arabic text-dark-text mb-4 leading-relaxed"},s.textUthmani||" "," "),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"yah ",s.ayah,"  Surah ",s.surah))),!u&&!b&&o.createElement("div",{className:"text-center"},o.createElement("button",{onClick:function(){d(!0),p(Date.now()),y(0)},className:"btn-primary text-lg px-8 py-4"},"Start Recitation"),o.createElement("p",{className:"text-sm text-dark-text-secondary mt-4"},"Take your time and recite clearly")),u&&o.createElement("div",{className:"text-center"},o.createElement("div",{className:"bg-accent/10 border border-accent/20 rounded-xl p-6 mb-6"},o.createElement("div",{className:"text-dark-text font-medium mb-2"},"Reciting..."),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Hesitations: ",g)),o.createElement("div",{className:"flex justify-center gap-4"},o.createElement("button",{onClick:function(){y(function(e){return e+1})},className:"btn-secondary px-6 py-3"},"Record Hesitation"),o.createElement("button",{onClick:function(){d(!1),w(!0)},className:"btn-primary px-6 py-3"},"Finish Recitation"))),b&&o.createElement("div",{className:"bg-dark-surface rounded-2xl p-6 border border-dark-border"},o.createElement("h3",{className:"text-lg font-medium text-dark-text mb-4 text-center"},"How did you do?"),o.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3"},[{grade:"Perfect",label:"Perfect",color:"bg-green-500/20 text-green-400 border-green-500/30"},{grade:"Minor",label:"Minor",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},{grade:"Hesitant",label:"Hesitant",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},{grade:"Major",label:"Major",color:"bg-red-500/20 text-red-400 border-red-500/30"}].map(function(e){var t=e.grade,n=e.label,r=e.color;return o.createElement("button",{key:t,onClick:function(){return _(t)},disabled:E,className:"p-4 rounded-xl border-2 transition-all duration-200 ".concat(r," hover:opacity-80 disabled:opacity-50")},o.createElement("div",{className:"font-medium"},n),o.createElement("div",{className:"text-xs opacity-80"},"Perfect"===t&&"No mistakes","Minor"===t&&"Small errors","Hesitant"===t&&"Some hesitation","Major"===t&&"Many mistakes"))})),E&&o.createElement("div",{className:"text-center mt-4"},o.createElement("div",{className:"w-6 h-6 border-2 border-accent border-t-transparent rounded-full animate-spin mx-auto"}))))):o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center"},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"w-8 h-8 border-2 border-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.createElement("p",{className:"text-dark-text-secondary"},"Loading yah...")))};function Qy(e){return Qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qy(e)}function Yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xy(r.key),r)}}function Xy(e){var t=function(e){if("object"!=Qy(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=Qy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qy(t)?t:t+""}var Jy=/[a-zA-Z]+/g,Zy=new Set(["wa","fi","min","ila","ala","an","ma","bi","ka","li","hu","hatha","hathihi","dhalika","tilka"]),ev=new Set(["arrahman","arraheem","almalik","alqudus","assalam","almumin","almuhaymin","alaziz","aljabbar","almutakabbir"]),tv=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"tokenizeAyah",value:function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:420,r=[],a=0;null!==(t=Jy.exec(e));){var i=t[0].toLowerCase(),o=t.index;if(!(o<a)){var s=this.calculateExpectedDuration(i,n);r.push({text:i,index:o,length:i.length,isLigature:!1,expectedDuration:s}),a=o+i.length}}return r}},{key:"calculateExpectedDuration",value:function(e,t){var n=1;Zy.has(e)?n=.7:ev.has(e)?n=1.2:e.length<=2?n=.8:e.length>=6&&(n=1.1);var r=Math.max(.5,Math.min(1.5,e.length/4));return Math.round(t*n*r)}},{key:"splitIntoTokens",value:function(e){for(var t,n=[];null!==(t=Jy.exec(e));)n.push(t[0].toLowerCase());return n}},{key:"getWordCount",value:function(e){return this.splitIntoTokens(e).length}},{key:"isTransliteratedText",value:function(e){return Jy.test(e)}},{key:"validateTokens",value:function(e,t){var n=e.map(function(e){return e.text}).join(" "),r=this.splitIntoTokens(t),a=this.splitIntoTokens(n);return r.length===a.length}}],null&&Yy(e.prototype,null),t&&Yy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function nv(e){return nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(e)}function rv(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return av(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(av(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,av(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,av(d,"constructor",l),av(l,"constructor",c),c.displayName="GeneratorFunction",av(l,a,"GeneratorFunction"),av(d),av(d,a,"Generator"),av(d,r,function(){return this}),av(d,"toString",function(){return"[object Generator]"}),(rv=function(){return{w:i,m:h}})()}function av(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}av=function(e,t,n,r){function i(t,n){av(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},av(e,t,n,r)}function iv(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ov(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){iv(i,r,a,o,s,"next",e)}function s(e){iv(i,r,a,o,s,"throw",e)}o(void 0)})}}function sv(e,t){if(e){if("string"==typeof e)return cv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cv(e,t):void 0}}function cv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lv(Object(n),!0).forEach(function(t){dv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dv(e,t,n){return(t=function(e){var t=function(e){if("object"!=nv(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=nv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nv(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hv={voiceOnsetMinMs:120,silenceThresholdMs:450,noiseGateThreshold:.01,debounceMs:50},fv=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=uv(uv({},hv),n),a=(e=(0,o.useState)({isListening:!1,isVoiceDetected:!1,segments:[]}),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||sv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],s=a[1],c=(0,o.useRef)(null),l=(0,o.useRef)(null),u=(0,o.useRef)(null),d=(0,o.useRef)(null),h=(0,o.useRef)(null),f=(0,o.useRef)(0),p=(0,o.useRef)(null),m=(0,o.useRef)(0),g=(0,o.useRef)(null),y=(0,o.useCallback)(function(){if(l.current){var e=l.current.frequencyBinCount,t=new Uint8Array(e);l.current.getByteFrequencyData(t);for(var n=0,a=0;a<e;a++)n+=t[a]*t[a];var o=Math.sqrt(n/e)/255,c=Date.now(),u=o>r.noiseGateThreshold;s(function(e){var t=uv({},e);return u&&!e.isVoiceDetected?(f.current=c,p.current||(p.current={start:c,end:c,confidence:o}),t.isVoiceDetected=!0,t.currentSegment=p.current):!u&&e.isVoiceDetected?(p.current&&(p.current.end=c,p.current.end-p.current.start>=r.voiceOnsetMinMs&&(t.segments=[].concat(function(e){return function(e){if(Array.isArray(e))return cv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||sv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.segments),[p.current])),p.current=null),t.isVoiceDetected=!1,t.currentSegment=void 0,m.current=c):u&&e.isVoiceDetected?(f.current=c,p.current&&(p.current.end=c,p.current.confidence=Math.max(p.current.confidence,o),t.currentSegment=p.current)):u||e.isVoiceDetected||(m.current,r.silenceThresholdMs),t}),i.isListening&&(h.current=requestAnimationFrame(y))}},[r,i.isListening]),v=(0,o.useCallback)(ov(rv().m(function e(){var t,n;return rv().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});case 1:t=e.v,d.current=t,c.current=new(window.AudioContext||window.webkitAudioContext),l.current=c.current.createAnalyser(),l.current.fftSize=2048,l.current.smoothingTimeConstant=.8,u.current=c.current.createMediaStreamSource(t),u.current.connect(l.current),s(function(e){return uv(uv({},e),{},{isListening:!0,segments:[],isVoiceDetected:!1})}),h.current=requestAnimationFrame(y),e.n=3;break;case 2:throw e.p=2,n=e.v,console.error("Error accessing microphone:",n),new Error("Microphone access denied or unavailable");case 3:return e.a(2)}},e,null,[[0,2]])})),[y]),b=(0,o.useCallback)(function(){h.current&&(cancelAnimationFrame(h.current),h.current=null),d.current&&(d.current.getTracks().forEach(function(e){return e.stop()}),d.current=null),c.current&&(c.current.close(),c.current=null),l.current=null,u.current=null,p.current=null,s(function(e){return uv(uv({},e),{},{isListening:!1,isVoiceDetected:!1,currentSegment:void 0})})},[]),w=(0,o.useCallback)(function(){s(function(e){return uv(uv({},e),{},{segments:[]})})},[]),x=(0,o.useCallback)(function(){return p.current?Date.now()-p.current.start:0},[]),E=(0,o.useCallback)(function(){return i.isVoiceDetected?0:Date.now()-m.current},[i.isVoiceDetected]);return(0,o.useEffect)(function(){return function(){b(),g.current&&clearTimeout(g.current)}},[b]),{vadState:i,startListening:v,stopListening:b,clearSegments:w,getCurrentSegmentDuration:x,getSilenceDuration:E,isSupported:!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}};function pv(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return mv(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(mv(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,mv(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,mv(d,"constructor",l),mv(l,"constructor",c),c.displayName="GeneratorFunction",mv(l,a,"GeneratorFunction"),mv(d),mv(d,a,"Generator"),mv(d,r,function(){return this}),mv(d,"toString",function(){return"[object Generator]"}),(pv=function(){return{w:i,m:h}})()}function mv(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}mv=function(e,t,n,r){function i(t,n){mv(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},mv(e,t,n,r)}function gv(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function yv(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){gv(i,r,a,o,s,"next",e)}function s(e){gv(i,r,a,o,s,"throw",e)}o(void 0)})}}function vv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wv(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return xv(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(xv(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,xv(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,xv(d,"constructor",l),xv(l,"constructor",c),c.displayName="GeneratorFunction",xv(l,a,"GeneratorFunction"),xv(d),xv(d,a,"Generator"),xv(d,r,function(){return this}),xv(d,"toString",function(){return"[object Generator]"}),(wv=function(){return{w:i,m:h}})()}function xv(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}xv=function(e,t,n,r){function i(t,n){xv(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},xv(e,t,n,r)}function Ev(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function kv(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){Ev(i,r,a,o,s,"next",e)}function s(e){Ev(i,r,a,o,s,"throw",e)}o(void 0)})}}var Sv=null;function _v(){return Nv.apply(this,arguments)}function Nv(){return Nv=kv(wv().m(function e(){var t,n;return wv().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!Sv){e.n=1;break}return e.a(2,Sv);case 1:return e.p=1,e.n=2,fetch("/ayah-recitation-maher-al-mu-aiqly-murattal-hafs-948.json");case 2:if((t=e.v).ok){e.n=3;break}throw new Error("Failed to load recitation data");case 3:return e.n=4,t.json();case 4:return Sv=e.v,e.a(2,Sv);case 5:return e.p=5,n=e.v,console.error("Error loading recitation data:",n),e.a(2,{})}},e,null,[[1,5]])})),Nv.apply(this,arguments)}function Tv(e,t){return Iv.apply(this,arguments)}function Iv(){return(Iv=kv(wv().m(function e(t,n){var r,a;return wv().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_v();case 1:return r=e.v,a="".concat(t,":").concat(n),e.a(2,r[a]||null)}},e)}))).apply(this,arguments)}function Cv(e,t){return Av.apply(this,arguments)}function Av(){return(Av=kv(wv().m(function e(t,n){var r;return wv().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Tv(t,n);case 1:return r=e.v,e.a(2,(null==r?void 0:r.audio_url)||null)}},e)}))).apply(this,arguments)}function Pv(e,t){return Ov.apply(this,arguments)}function Ov(){return(Ov=kv(wv().m(function e(t,n){var r;return wv().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Tv(t,n);case 1:if((r=e.v)&&r.segments){e.n=2;break}return e.a(2,[]);case 2:return e.a(2,r.segments.map(function(e){return{word:e[0],startMs:e[1],endMs:e[2]}}))}},e)}))).apply(this,arguments)}function Rv(){return"SpeechRecognition"in window||"webkitSpeechRecognition"in window}function Dv(e){return e.replace(/[\u064B-\u065F\u0670]/g,"").replace(/[]/g,"").replace(//g,"").replace(/\s+/g," ").trim().toLowerCase()}function Mv(e,t){var n=Dv(e),r=Dv(t);if(console.log(" [Text Comparison]",{recognized:n,expected:r}),n===r)return 1;var a=function(e,t){for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var a=0;a<=e.length;a++)n[0][a]=a;for(var i=1;i<=t.length;i++)for(var o=1;o<=e.length;o++)t.charAt(i-1)===e.charAt(o-1)?n[i][o]=n[i-1][o-1]:n[i][o]=Math.min(n[i-1][o-1]+1,n[i][o-1]+1,n[i-1][o]+1);return n[t.length][e.length]}(n,r),i=Math.max(n.length,r.length),o=1-a/i;return console.log(" [Similarity Score]",{distance:a,maxLength:i,similarity:o.toFixed(2),percentage:"".concat((100*o).toFixed(0),"%")}),Math.max(0,o)}function Lv(e,t,n,r){if(!Rv())return console.error(" [Speech Recognition] Not supported in this browser"),null;var a=new(window.SpeechRecognition||window.webkitSpeechRecognition);return a.lang="ar-SA",a.continuous=!1,a.interimResults=!1,a.maxAlternatives=3,console.log(" [Speech Recognition] Created",{lang:a.lang,continuous:a.continuous,interimResults:a.interimResults,expectedText:e}),a.onstart=function(){console.log(" [Speech Recognition] Started listening")},a.onresult=function(n){for(var r=n.results[n.resultIndex],a=[],i={transcript:"",confidence:0,similarity:0},o=0;o<r.length;o++){var s=r[o];a.push(s.transcript);var c=Mv(s.transcript,e);console.log(" [Alternative ".concat(o+1,"]"),{transcript:s.transcript,confidence:s.confidence.toFixed(2),similarity:c.toFixed(2)}),c>i.similarity&&(i={transcript:s.transcript,confidence:s.confidence,similarity:c})}var l=function(e){return e<.3?(console.warn(" [Strict Validation] Below 30% match - NO POINTS"),{quality:"poor",progressIncrement:0}):e>=.95?{quality:"perfect",progressIncrement:40}:e>=.8?{quality:"good",progressIncrement:30}:e>=.6?{quality:"fair",progressIncrement:20}:{quality:"poor",progressIncrement:10}}(i.similarity);console.log(" [Best Match]",{transcript:i.transcript,confidence:i.confidence.toFixed(2),similarity:i.similarity.toFixed(2),quality:l.quality,progressIncrement:l.progressIncrement}),t(i.transcript,i.similarity,l)},a.onerror=function(e){console.error(" [Speech Recognition] Error:",e.error,e.message),n&&n(e.error)},a.onend=function(){console.log(" [Speech Recognition] Ended"),r&&r()},a}function jv(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Fv(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Fv(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Fv(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,Fv(d,"constructor",l),Fv(l,"constructor",c),c.displayName="GeneratorFunction",Fv(l,a,"GeneratorFunction"),Fv(d),Fv(d,a,"Generator"),Fv(d,r,function(){return this}),Fv(d,"toString",function(){return"[object Generator]"}),(jv=function(){return{w:i,m:h}})()}function Fv(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Fv=function(e,t,n,r){function i(t,n){Fv(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Fv(e,t,n,r)}function Uv(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Vv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Bv=function(e){var t=e.surah,n=e.ayah,r=e.ayahText,a=e.textTokens,i=e.baselineMsPerWord,s=e.hesitationThresholdMs,c=e.currentAyahIndex,l=e.totalAyahs,u=e.onAyahMastered,d=(e.onNeedsExtraPractice,Vv((0,o.useState)("ayah-intro"),2)),h=d[0],f=d[1],p=Vv((0,o.useState)(!0),2),m=(p[0],p[1],Vv((0,o.useState)(!1),2)),g=m[0],y=m[1],v=Vv((0,o.useState)(-1),2),b=v[0],w=v[1],x=Vv((0,o.useState)(0),2),E=(x[0],x[1]),k=Vv((0,o.useState)(0),2),S=k[0],_=k[1],N=Vv((0,o.useState)(!1),2),T=N[0],I=N[1],C=Vv((0,o.useState)(!1),2),A=C[0],P=C[1],O=Vv((0,o.useState)(""),2),R=O[0],D=O[1],M=Vv((0,o.useState)(!0),2),L=M[0],j=M[1],F=Vv((0,o.useState)(-1),2),U=F[0],V=F[1],z=Vv((0,o.useState)(null),2),B=z[0],$=z[1],q=Vv((0,o.useState)([]),2),G=q[0],W=q[1],H=Vv((0,o.useState)(1),2),K=H[0],Q=H[1],Y=Vv((0,o.useState)(!1),2),X=Y[0],J=Y[1],Z=Vv((0,o.useState)(!0),2),ee=Z[0],te=Z[1],ne=Vv((0,o.useState)(""),2),re=ne[0],ae=ne[1],ie=Vv((0,o.useState)(!1),2),oe=ie[0],se=ie[1],ce=(0,o.useRef)(null),le=(0,o.useRef)(null),ue=(0,o.useRef)(null);(0,o.useEffect)(function(){function e(){var r;return r=jv().m(function e(){var r,a;return jv().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Cv(t,n);case 1:return r=e.v,e.n=2,Pv(t,n);case 2:a=e.v,$(r),W(a);case 3:return e.a(2)}},e)}),e=function(){var e=this,t=arguments;return new Promise(function(n,a){var i=r.apply(e,t);function o(e){Uv(i,n,a,o,s,"next",e)}function s(e){Uv(i,n,a,o,s,"throw",e)}o(void 0)})},e.apply(this,arguments)}!function(){e.apply(this,arguments)}(),Rv()?console.log(" [Speech Recognition] Supported and enabled"):(console.warn(" [Speech Recognition] Not supported - falling back to VAD only"),te(!1))},[t,n]);var de=["Mashallah! ","You're doing great!","Keep it up! ","You're on a roll!","Excellent progress!","Beautiful recitation! "],he=fv(),fe=he.vadState,pe=he.startListening,me=he.stopListening,ge=(0,o.useCallback)(function(e,t){return e>=.95?"Perfect! ":e>=.8?"Great! ":e>=.6?"Good":e>=.3?"Keep trying":"Try again"},[]),ye=(0,o.useCallback)(function(e){ae(e),se(!0),setTimeout(function(){se(!1)},3e3)},[]),ve=(0,o.useCallback)(function(){console.log(" [Speech Recognition] Initializing...");var e=r;if(le.current=Lv(e,function(e,t,n){if(console.log(" [Speech Recognition Complete]",{transcript:e,similarity:t.toFixed(2),quality:n.quality,progressIncrement:n.progressIncrement}),y(!1),t<.3)return console.warn(" [STRICT] Below 30% match - NO POINTS",{similarity:(100*t).toFixed(0)+"%",message:"Recitation too different from expected yah"}),ye("Try again - recite the correct yah"),void setTimeout(function(){console.log(" [Auto-Loop] Playing audio again (no progress added)..."),j(!0),we()},800);var r=ge(t,n.quality);ye(r),_(function(e){var r=Math.min(e+n.progressIncrement,100);return console.log(" [Progress Update]",{similarity:(100*t).toFixed(0)+"%",previous:e,increment:n.progressIncrement,new:r,isComplete:r>=100}),r>=100?Ne():setTimeout(function(){console.log(" [Auto-Loop] Playing audio again..."),j(!0),we()},800),r})},function(e){console.error(" [Speech Recognition] Error:",e),y(!1),j(!0),"not-allowed"!==e&&"service-not-allowed"!==e||(console.warn(" [Fallback] Using VAD instead of speech recognition"),te(!1),pe())},function(){console.log(" [Speech Recognition] Session ended")}),le.current)try{le.current.start(),console.log(" [Speech Recognition] Started")}catch(e){console.error(" [Speech Recognition] Failed to start:",e),te(!1),pe()}},[r,we,pe,ge,ye]),be=(0,o.useCallback)(function(){console.log(" [Read-Recite Speech Recognition] Initializing continuous mode...");var e=r;if(ue.current=Lv(e,function(e,t,n){console.log(" [Read-Recite Recognition Complete]",{transcript:e,similarity:t.toFixed(2),quality:n.quality,progressIncrement:n.progressIncrement});var r=ge(t,n.quality);ye(r),_(function(e){var r=Math.min(e+n.progressIncrement,100);return console.log(" [Read-Recite Progress]",{similarity:(100*t).toFixed(0)+"%",previous:e,increment:n.progressIncrement,new:r}),r>=100?(ue.current&&ue.current.stop(),y(!1),Ne(),r):(g&&setTimeout(function(){if(ue.current)try{ue.current.start(),console.log(" [Read-Recite] Restarted immediately for next recitation")}catch(e){console.log(" [Read-Recite] Recognition already running or error:",e)}},100),r)})},function(e){console.error(" [Read-Recite Recognition] Error:",e),g&&"read-recite"===h&&setTimeout(function(){if(ue.current)try{ue.current.start(),console.log(" [Error Recovery] Restarted recognition")}catch(e){console.log(" Recognition restart failed")}},200)},function(){console.log(" [Read-Recite Recognition] Session ended naturally"),g&&"read-recite"===h&&setTimeout(function(){if(ue.current)try{ue.current.start(),console.log(" [Read-Recite] Auto-restarted after natural end")}catch(e){console.log(" Auto-restart failed:",e)}},50)}),ue.current)try{ue.current.start(),console.log(" [Read-Recite Recognition] Started")}catch(e){console.error(" [Read-Recite Recognition] Failed to start:",e)}},[r,g,h,ge,ye]),we=(0,o.useCallback)(function(){var e,r,a;console.log(" [Audio] Attempting to play",{hasAudioUrl:!!B,audioUrl:B,segmentCount:G.length,playbackSpeed:K,stage:h}),B?(ce.current&&(ce.current.pause(),ce.current.currentTime=0),I(!0),j(!1),V(-1),ce.current=(e=function(e){var t=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t>=r.startMs&&t<=r.endMs)return r.word-1}return-1}(G,e);t!==U&&(console.log(" [Word Highlight] Word ".concat(t+1," at ").concat(e.toFixed(0),"ms")),V(t))},r=function(){console.log(" [Audio Complete] Ended, auto-starting recording..."),I(!1),V(-1),"listen-shadow"===h&&(console.log(" [Auto-Record] Starting microphone..."),y(!0),ee?ve():pe().then(function(){console.log(" [Microphone] Successfully started listening (VAD fallback)")}).catch(function(e){console.error(" [Microphone] Failed to start:",e)}))},a=new Audio(B),e&&a.addEventListener("timeupdate",function(){e(1e3*a.currentTime)}),r&&a.addEventListener("ended",r),a),ce.current.playbackRate=K,console.log(" [Playback Speed] Set to ".concat(K,"x")),ce.current.play().then(function(){console.log(" [Audio] Playing successfully")}).catch(function(e){console.error(" [Audio] Playback failed:",e),I(!1),j(!0)})):console.warn(" [Audio] No audio URL available for",t,n)},[B,G,h,K,t,n]),xe=(0,o.useCallback)(function(){ce.current&&(ce.current.pause(),ce.current.currentTime=0),I(!1),V(-1),j(!0)},[]),Ee=(0,o.useCallback)(function(){console.log(" [Recall Speech Recognition] Initializing...");var e=Lv(r,function(e,t,n){console.log(" [Recall Recognition Complete]",{transcript:e,similarity:t.toFixed(2),quality:n.quality,progressIncrement:n.progressIncrement}),y(!1),j(!0),w(a.length-1);var r=ge(t,n.quality);ye(r),_(function(e){var r=Math.min(e+n.progressIncrement,100);return console.log(" [Recall Progress]",{similarity:(100*t).toFixed(0)+"%",previous:e,increment:n.progressIncrement,new:r}),r>=100&&Ne(),r})},function(e){console.error(" [Recall Recognition] Error:",e),y(!1),j(!0)},function(){console.log(" [Recall Recognition] Session ended")});if(e)try{e.start(),console.log(" [Recall Recognition] Started")}catch(e){console.error(" [Recall Recognition] Failed to start:",e)}},[r,a.length,ge,ye]),ke=function(e){var t=e.profile,n=e.textTokens,r=e.onComplete,a=vv((0,o.useState)(-1),2),i=a[0],s=a[1],c=vv((0,o.useState)(!1),2),l=c[0],u=c[1],d=vv((0,o.useState)(0),2),h=d[0],f=d[1],p=vv((0,o.useState)(),2),m=p[0],g=p[1],y=(0,o.useRef)([]),v=(0,o.useRef)([]),b=(0,o.useRef)(0),w=(0,o.useRef)(null),x=(0,o.useRef)(0),E={voiceOnsetMinMs:t.voiceOnsetMinMs,silenceThresholdMs:t.hesitationThresholdMs,noiseGateThreshold:.01,debounceMs:50},k=fv(E),S=k.vadState,_=k.startListening,N=k.stopListening,T=(k.clearSegments,k.getCurrentSegmentDuration),I=k.getSilenceDuration,C=(0,o.useCallback)(function(){var e=n.reduce(function(e,t){return e+t.expectedDuration},0);return h+e},[n,h]),A=(0,o.useCallback)(yv(pv().m(function e(){var t;return pv().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,_();case 1:u(!0),f(Date.now()),s(-1),y.current=[],v.current=[],b.current=0,x.current=C(),w.current&&clearTimeout(w.current),e.n=3;break;case 2:throw e.p=2,t=e.v,console.error("Failed to start recitation:",t),t;case 3:return e.a(2)}},e,null,[[0,2]])})),[_,C]),P=(0,o.useCallback)(function(){N(),u(!1);var e={words:y.current,boundary:{transitionPauseHigh:I()>t.hesitationThresholdMs,hintUsed:!1}};r(e,v.current)},[N,I,t.hesitationThresholdMs,r]),O=(0,o.useCallback)(function(e){if(l){for(var t=e-h,r=-1,a=0,o=0;o<n.length;o++)if(t<=(a+=n[o].expectedDuration)){r=o;break}if(r>=0&&r>i){s(r),g(e);var c={w:r,tStart:e-h,tEnd:e-h,matched:!0,latencyToWord:0===r?t:e-b.current,interPausePrev:0===r?0:e-b.current};y.current.push(c)}w.current&&(clearTimeout(w.current),w.current=null)}},[l,h,n,i]),R=(0,o.useCallback)(function(e){l&&(b.current=e,g(void 0),y.current.length>0&&(y.current[y.current.length-1].tEnd=e-h),w.current=setTimeout(function(){l&&I()>1200&&P()},1200))},[l,h,I,P]);return(0,o.useEffect)(function(){if(l)if(S.isVoiceDetected&&S.currentSegment)O(S.currentSegment.start);else if(!S.isVoiceDetected&&S.segments.length>0){var e=S.segments[S.segments.length-1];R(e.end)}},[S.isVoiceDetected,S.currentSegment,S.segments,l,O,R]),(0,o.useEffect)(function(){if(l&&m){var e=n[i];if(e){var r=T(),a=e.expectedDuration;if(r>a&&i<n.length-1){var o=i+1,c=m+a;if(Date.now()>=c+t.voiceOnsetMinMs){s(o);var u={w:o,tStart:c-h,tEnd:c-h,matched:!0,latencyToWord:t.voiceOnsetMinMs,interPausePrev:0};y.current.push(u)}}}}},[l,m,i,n,T,t.voiceOnsetMinMs,h]),(0,o.useEffect)(function(){l&&i>=n.length-1&&setTimeout(function(){l&&P()},500)},[l,i,n.length,P]),{controller:{revealIndex:i,isActive:l,startTime:h,currentWordStart:m,onVoicedBlockStart:O,onVoicedBlockEnd:R,onAttemptComplete:r},startRecitation:A,stopRecitation:P,vadState:S,isComplete:i>=n.length-1}}({profile:{baselineMsPerWord:i,hesitationThresholdMs:s,revealMode:"mushaf-progressive",voiceOnsetMinMs:120,maxWordsPerVoicedBlock:2,wordLengthWeight:{}},textTokens:a,onComplete:function(e,t){var n;E(function(e){return e+1}),y(!1),j(!0);var r=(null==e||null===(n=e.words)||void 0===n?void 0:n.filter(function(e){return e.latencyToWord>s}).length)||0,a=(null==t?void 0:t.length)||0,i=10;0===r&&0===a?i=40:r<=1&&a<=1?i=30:r<=2&&a<=2&&(i=20),_(function(e){var t=Math.min(e+i,100);return t>=100&&Ne(),t})}}),Se=(ke.controller,ke.startRecitation),_e=ke.stopRecitation,Ne=function(){D(de[Math.floor(Math.random()*de.length)]),P(!0),setTimeout(function(){P(!1),"listen-shadow"===h?(f("read-recite"),_(0),E(0),j(!0)):"read-recite"===h?(f("recall-memory"),w(-1),E(0),_(0),j(!0)):"recall-memory"===h&&u([])},2e3)},Te=(0,o.useCallback)(function(){console.log(" [SPACEBAR PRESSED]",{stage:h,audioPlaying:T,isReciting:g,isWaitingForSpace:L,showEncouragement:A,usingSpeechRecognition:ee}),A?console.log(" [Blocked] Encouragement showing"):"listen-shadow"===h?T?(console.log(" [Action] Restarting audio"),xe(),setTimeout(function(){return we()},100)):g?(console.log(" [Action] Stopping recording"),le.current&&le.current.stop(),me(),y(!1),j(!0)):(console.log(" [Action] Playing audio"),we()):"read-recite"===h?g?(console.log(" [Action] Stopping continuous recording"),ue.current&&ue.current.stop(),_e(),y(!1),j(!0),V(-1)):(console.log(" [Action] Starting continuous recording mode with speech recognition"),y(!0),j(!1),V(-1),ee?be():Se()):"recall-memory"===h&&(g?(console.log(" [Action] Stopping recall recording"),le.current&&le.current.stop(),me(),y(!1),j(!0),w(-1)):(console.log(" [Action] Starting recall recording with speech recognition"),w(-1),y(!0),j(!1),ee?Ee():pe()))},[h,L,A,T,g,we,xe,Se,_e,pe,me,ee]);(0,o.useEffect)(function(){var e=function(e){"Space"===e.code&&"ayah-intro"!==h&&(e.preventDefault(),Te())};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[Te,h]),(0,o.useEffect)(function(){if(console.log(" [VAD State]",{stage:h,isReciting:g,isListening:fe.isListening,isVoiceDetected:fe.isVoiceDetected,segmentCount:fe.segments.length,currentSegment:fe.currentSegment}),"listen-shadow"===h&&g&&fe.isListening){var e=fe.segments;if(console.log(" [Listen-Shadow Recording]",{totalSegments:e.length,isVoiceCurrentlyDetected:fe.isVoiceDetected,segments:e.map(function(e){return{duration:e.end-e.start,confidence:e.confidence}})}),e.length>0){var t=e[e.length-1],n=Date.now()-t.end;if(console.log(" [Silence Detection]",{timeSinceLastVoice:n,threshold:1e3,shouldComplete:n>1e3&&!fe.isVoiceDetected}),n>1e3&&!fe.isVoiceDetected){console.log(" [Recitation Complete] Stopping and evaluating..."),me(),y(!1);var r=e.length>0,i=e.reduce(function(e,t){return e+(t.end-t.start)},0),o=e.reduce(function(e,t){return e+t.confidence},0)/e.length;console.log(" [Quality Analysis]",{hasVocalized:r,segmentCount:e.length,totalVoiceDuration:"".concat(i,"ms"),avgConfidence:o,expectedWords:a.length});var s="poor",c=10;r&&i>500&&(e.length>=a.length&&o>.5?(s="perfect",c=40):e.length>=.75*a.length?(s="good",c=30):(s="fair",c=20)),console.log(" [Progress Increment]",{quality:s,progressIncrement:c,reason:"".concat(e.length," segments, ").concat(i,"ms voice, ").concat(o.toFixed(2)," confidence")}),_(function(e){var t=Math.min(e+c,100);return console.log(" [Progress Update]",{previous:e,increment:c,new:t,isComplete:t>=100}),t>=100&&Ne(),t}),setTimeout(function(){console.log(" [Auto-Loop] Playing audio again..."),j(!0),we()},800)}}}},[h,g,fe,me,we,a.length]);var Ie=function(){switch(h){case"ayah-intro":return"New yah";case"listen-shadow":return"Listen & Shadow";case"read-recite":return"Read & Recite";case"recall-memory":return"Recall from Memory"}};return o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},A&&o.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-dark-bg/90 backdrop-blur-sm"},o.createElement("div",{className:"text-center animate-fade-in"},o.createElement("div",{className:"text-6xl md:text-7xl font-bold text-accent mb-4 animate-pulse"},R),o.createElement("div",{className:"text-dark-text-secondary"},"Moving to next stage..."))),o.createElement("div",{className:"max-w-4xl w-full"},o.createElement("div",{className:"text-center mb-6"},o.createElement("div",{className:"inline-flex items-center gap-2 bg-dark-surface border border-dark-border rounded-full px-4 py-2 mb-3"},o.createElement("span",{className:"text-xs text-dark-text-secondary"},"yah ",c+1," of ",l),o.createElement("span",{className:"text-xs text-dark-text-muted"},""),o.createElement("span",{className:"text-xs text-dark-text-secondary"},t,":",n))),"ayah-intro"!==h&&o.createElement("div",{className:"text-center mb-6"},o.createElement("div",{className:"inline-flex items-center gap-2 mb-3"},o.createElement("div",{className:"w-3 h-3 rounded-full ".concat("listen-shadow"===h?"bg-accent":"read-recite"===h||"recall-memory"===h?"bg-easy":"bg-dark-border")}),o.createElement("div",{className:"h-0.5 w-8 bg-dark-border"}),o.createElement("div",{className:"w-3 h-3 rounded-full ".concat("read-recite"===h?"bg-accent":"recall-memory"===h?"bg-easy":"bg-dark-border")}),o.createElement("div",{className:"h-0.5 w-8 bg-dark-border"}),o.createElement("div",{className:"w-3 h-3 rounded-full ".concat("recall-memory"===h?"bg-accent":"bg-dark-border")})),o.createElement("h2",{className:"text-xl font-semibold text-dark-text mb-1"},Ie()),o.createElement("p",{className:"text-sm text-dark-text-secondary"},"listen-shadow"===h&&"As you recite, the progress will build","read-recite"===h&&"The better you recite, the more it will fill up","recall-memory"===h&&"Recite from memory as words appear")),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-8 md:p-12 border border-dark-border mb-6 min-h-[400px] relative flex flex-col justify-center"},"listen-shadow"===h&&o.createElement("div",{className:"absolute top-4 right-4"},o.createElement("button",{onClick:function(){return J(!X)},className:"p-2 text-dark-text-secondary hover:text-dark-text transition-colors bg-dark-bg rounded-lg border border-dark-border"},o.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))),X&&o.createElement("div",{className:"absolute right-0 top-full mt-2 bg-dark-surface border border-dark-border rounded-xl p-4 shadow-2xl z-10 w-64"},o.createElement("h4",{className:"text-sm font-semibold text-dark-text mb-3"},"Playback Speed"),o.createElement("div",{className:"space-y-3"},o.createElement("input",{type:"range",min:"0.5",max:"1.5",step:"0.1",value:K,onChange:function(e){return Q(parseFloat(e.target.value))},className:"w-full accent-accent"}),o.createElement("div",{className:"flex justify-between text-xs text-dark-text-secondary"},o.createElement("span",null,"0.5x (Slow)"),o.createElement("span",{className:"text-dark-text font-medium"},K.toFixed(1),"x"),o.createElement("span",null,"1.5x (Fast)")),o.createElement("div",{className:"flex gap-2"},o.createElement("button",{onClick:function(){return Q(.75)},className:"flex-1 px-2 py-1 text-xs bg-dark-surface-hover rounded hover:bg-dark-bg transition-colors text-dark-text-secondary"},"0.75x"),o.createElement("button",{onClick:function(){return Q(1)},className:"flex-1 px-2 py-1 text-xs bg-dark-surface-hover rounded hover:bg-dark-bg transition-colors text-dark-text-secondary"},"1.0x"),o.createElement("button",{onClick:function(){return Q(1.25)},className:"flex-1 px-2 py-1 text-xs bg-dark-surface-hover rounded hover:bg-dark-bg transition-colors text-dark-text-secondary"},"1.25x"))))),"ayah-intro"===h&&o.createElement("div",{className:"space-y-6"},o.createElement("div",{className:"text-center"},o.createElement("h2",{className:"text-2xl font-semibold text-dark-text mb-2"},Ie()),o.createElement("p",{className:"text-dark-text-secondary"},"Take a moment to familiarize yourself with this yah")),o.createElement("div",{className:"text-center my-8"},o.createElement("p",{className:"text-4xl md:text-5xl font-arabic text-dark-text leading-loose mb-4",dir:"rtl"},r),o.createElement("p",{className:"text-lg text-dark-text-secondary"},a.map(function(e){return e.text}).join(" "))),o.createElement("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto"},o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 border border-dark-border text-center"},o.createElement("div",{className:"text-2xl font-semibold text-dark-text mb-1"},a.length),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Words")),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 border border-dark-border text-center"},o.createElement("div",{className:"text-2xl font-semibold text-dark-text mb-1"},t,":",n),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"Reference"))),o.createElement("div",{className:"bg-dark-bg rounded-xl p-4 border border-dark-border max-w-lg mx-auto"},o.createElement("p",{className:"text-sm text-dark-text-secondary text-center"},"You'll master this yah through 3 stages: listening and repeating, reciting with text, and finally reciting from memory."))),"listen-shadow"===h&&o.createElement("div",{className:"flex-1 flex flex-col justify-center"},o.createElement("div",{className:"text-center mb-6"},o.createElement("p",{className:"text-3xl md:text-4xl font-arabic text-dark-text leading-loose mb-4",dir:"rtl"},r.split(" ").map(function(e,t){return o.createElement("span",{key:t,className:"inline-block ml-2 ".concat(U===t?"text-accent":""),style:{transition:"none"}},e)})),o.createElement("p",{className:"text-lg text-dark-text-secondary mb-6"},a.map(function(e){return e.text}).join(" ")),oe&&o.createElement("div",{className:"mb-4 animate-fade-in"},o.createElement("div",{className:"inline-block px-4 py-2 rounded-xl border ".concat(re.includes("Excellent")||re.includes("Perfect")?"bg-easy/20 border-easy text-easy":re.includes("Great")?"bg-accent/20 border-accent text-accent":"bg-medium/20 border-medium text-medium")},o.createElement("span",{className:"text-sm font-medium"},re))),o.createElement("div",{className:"mt-8"},o.createElement("div",{className:"h-10 flex items-center justify-center"},T&&o.createElement("div",{className:"inline-flex items-center gap-2 bg-dark-bg border border-dark-border rounded-xl px-4 py-2"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-blue-400 animate-pulse"}),o.createElement("span",{className:"text-sm text-dark-text-secondary"},"Playing recitation...")),g&&!T&&o.createElement("div",{className:"inline-flex items-center gap-2 bg-dark-bg border border-dark-border rounded-xl px-4 py-2"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),o.createElement("span",{className:"text-sm text-dark-text-secondary"},"Recording your recitation...")))))),"read-recite"===h&&o.createElement("div",{className:"space-y-6"},o.createElement("div",{className:"text-center mb-4"},g?o.createElement("div",{className:"inline-flex items-center gap-2"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.createElement("span",{className:"text-sm text-dark-text-secondary"},"Recording your recitation...")):o.createElement("div",{className:"inline-flex items-center gap-2"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-accent"}),o.createElement("span",{className:"text-sm text-dark-text-secondary"},"Press SPACE to recite"))),o.createElement("div",{className:"text-center mb-4"},o.createElement("p",{className:"text-3xl md:text-4xl font-arabic text-dark-text leading-loose mb-4",dir:"rtl"},r),o.createElement("p",{className:"text-lg text-dark-text-secondary"},a.map(function(e){return e.text}).join(" ")))),"recall-memory"===h&&o.createElement("div",{className:"flex-1 flex flex-col justify-center"},o.createElement("div",{className:"text-center mb-6"},o.createElement("p",{className:"text-3xl md:text-4xl font-arabic text-dark-text leading-loose mb-6",dir:"rtl"},r.split(" ").map(function(e,t){return o.createElement("span",{key:t,className:"inline-block ml-2 ".concat(t<=b?"opacity-100":"opacity-0"),style:{transition:"none"}},e)})),o.createElement("p",{className:"text-sm text-dark-text-secondary mb-6"},Math.max(0,b+1)," / ",a.length," words revealed"),oe&&o.createElement("div",{className:"fixed top-1/3 right-8 z-20 animate-slide-up"},o.createElement("div",{className:"px-3 py-2 rounded-lg border backdrop-blur-sm bg-dark-surface/80 border-dark-border"},o.createElement("span",{className:"text-sm text-dark-text-secondary"},re))),o.createElement("div",{className:"mt-8"},o.createElement("div",{className:"h-10 flex items-center justify-center"},g&&o.createElement("div",{className:"inline-flex items-center gap-2 bg-dark-bg border border-dark-border rounded-xl px-4 py-2"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),o.createElement("span",{className:"text-sm text-dark-text-secondary"},"Recording your recitation..."))))))),"ayah-intro"!==h&&o.createElement("div",{className:"mb-6"},o.createElement("div",{className:"max-w-2xl mx-auto"},o.createElement("div",{className:"h-3 bg-dark-surface-hover rounded-full overflow-hidden border border-dark-border"},o.createElement("div",{className:"h-full bg-accent transition-all duration-500 ease-out",style:{width:"".concat(S,"%")}})),o.createElement("div",{className:"flex justify-between items-center mt-2"},o.createElement("p",{className:"text-xs text-dark-text-muted"},"Stage Progress"),o.createElement("p",{className:"text-xs text-dark-text-secondary font-medium"},Math.round(S),"%")))),o.createElement("div",{className:"flex flex-col items-center gap-4"},"ayah-intro"===h&&o.createElement(o.Fragment,null,o.createElement("button",{onClick:function(){f("listen-shadow"),_(0),E(0),j(!0)},className:"btn-primary px-8 py-3"},"Start Learning"),o.createElement("button",{onClick:function(){u([])},className:"text-sm text-dark-text-muted hover:text-dark-text-secondary"},"Skip to next yah")),"ayah-intro"!==h&&!T&&!g&&o.createElement("div",{className:"text-center"},o.createElement("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-dark-surface-hover border border-dark-border rounded-xl"},o.createElement("kbd",{className:"px-2 py-1 text-xs font-semibold text-dark-text bg-dark-bg border border-dark-border rounded"},"SPACE"),o.createElement("span",{className:"text-sm text-dark-text-secondary"},"listen-shadow"===h&&"to play audio","read-recite"===h&&(g?"to stop recording":"to start reciting"),"recall-memory"===h&&"to recite from memory"))))))};function $v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const qv=function(e){var t,n,r=e.onStart,a=e.onSkip,i=(t=(0,o.useState)(0),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$v(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=i[0],c=i[1],l=[{title:"Welcome to Learn Mode",description:"Master new yt through a proven 3-step process",content:o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 border border-dark-border"},o.createElement("div",{className:"flex items-start gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center flex-shrink-0"},o.createElement("span",{className:"text-sm font-semibold text-dark-bg"},"1")),o.createElement("div",null,o.createElement("h4",{className:"font-semibold text-dark-text mb-1"},"Listen & Shadow"),o.createElement("p",{className:"text-sm text-dark-text-secondary"},"Listen to the recitation and repeat along until you feel comfortable")))),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 border border-dark-border"},o.createElement("div",{className:"flex items-start gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center flex-shrink-0"},o.createElement("span",{className:"text-sm font-semibold text-dark-bg"},"2")),o.createElement("div",null,o.createElement("h4",{className:"font-semibold text-dark-text mb-1"},"Read & Recite"),o.createElement("p",{className:"text-sm text-dark-text-secondary"},"Recite while looking at the Arabic text until you master it without hesitation")))),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 border border-dark-border"},o.createElement("div",{className:"flex items-start gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center flex-shrink-0"},o.createElement("span",{className:"text-sm font-semibold text-dark-bg"},"3")),o.createElement("div",null,o.createElement("h4",{className:"font-semibold text-dark-text mb-1"},"Recall from Memory"),o.createElement("p",{className:"text-sm text-dark-text-secondary"},"Recite from memory as words appear to confirm you've truly memorized it")))))},{title:"Step 1: Listen & Shadow",description:"Build familiarity through listening",content:o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-border"},o.createElement("div",{className:"text-center mb-4"},o.createElement("div",{className:"inline-flex items-center gap-3 bg-dark-surface px-6 py-3 rounded-full"},o.createElement("svg",{className:"w-6 h-6 text-accent",fill:"currentColor",viewBox:"0 0 20 20"},o.createElement("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})),o.createElement("span",{className:"text-dark-text-secondary text-sm"},"Click to play"))),o.createElement("p",{className:"text-2xl font-arabic text-dark-text text-center leading-loose"},"   "),o.createElement("p",{className:"text-center text-dark-text-secondary text-sm mt-2"},"qul huwa llhu aad")),o.createElement("div",{className:"space-y-2 text-sm text-dark-text-secondary"},o.createElement("p",null," Listen to the beautiful recitation"),o.createElement("p",null," Shadow along (whisper/speak quietly)"),o.createElement("p",null," Repeat as many times as you need"),o.createElement("p",null," Move on when you feel ready")))},{title:"Step 2: Read & Recite",description:"Master the pronunciation while reading",content:o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-border"},o.createElement("div",{className:"text-center mb-4"},o.createElement("div",{className:"inline-flex items-center gap-2 text-dark-text-secondary text-sm"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.createElement("span",null,"Recording"))),o.createElement("p",{className:"text-3xl font-arabic text-dark-text text-center leading-loose"},"   ")),o.createElement("div",{className:"space-y-2 text-sm text-dark-text-secondary"},o.createElement("p",null," Recite while looking at the Arabic text"),o.createElement("p",null," The system listens for hesitations"),o.createElement("p",null," Practice until you recite smoothly"),o.createElement("p",null," Transliteration available if needed")))},{title:"Step 3: Recall from Memory",description:"Prove you've truly memorized it",content:o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-border"},o.createElement("div",{className:"text-center mb-4"},o.createElement("div",{className:"inline-flex items-center gap-2 text-dark-text-secondary text-sm"},o.createElement("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),o.createElement("span",null,"Recite from memory"))),o.createElement("p",{className:"text-3xl font-arabic text-dark-text text-center leading-loose"},o.createElement("span",{className:"opacity-100"},""),o.createElement("span",{className:"opacity-100 ml-2"},""),o.createElement("span",{className:"opacity-30 ml-2"},""),o.createElement("span",{className:"opacity-30 ml-2"},"")),o.createElement("p",{className:"text-center text-dark-text-secondary text-xs mt-4"},"Words appear as you recite them")),o.createElement("div",{className:"space-y-2 text-sm text-dark-text-secondary"},o.createElement("p",null," No text shown initially"),o.createElement("p",null," Recite from memory"),o.createElement("p",null," Words appear as you say them"),o.createElement("p",null," Master it with smooth, confident recitation")))},{title:"Building Your Foundation",description:"One yah at a time, then connecting them",content:o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"bg-dark-bg rounded-xl p-6 border border-dark-border"},o.createElement("div",{className:"space-y-3"},o.createElement("div",{className:"flex items-center gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-easy flex items-center justify-center flex-shrink-0"},o.createElement("svg",{className:"w-4 h-4 text-dark-bg",fill:"currentColor",viewBox:"0 0 20 20"},o.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),o.createElement("span",{className:"text-dark-text"},"yah 1 mastered")),o.createElement("div",{className:"flex items-center gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-easy flex items-center justify-center flex-shrink-0"},o.createElement("svg",{className:"w-4 h-4 text-dark-bg",fill:"currentColor",viewBox:"0 0 20 20"},o.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),o.createElement("span",{className:"text-dark-text"},"yah 2 mastered")),o.createElement("div",{className:"flex items-center gap-3"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-accent flex items-center justify-center flex-shrink-0 animate-pulse"},o.createElement("span",{className:"text-xs text-dark-bg font-semibold"},"")),o.createElement("span",{className:"text-dark-text"},"Connect yah 1 + 2")),o.createElement("div",{className:"flex items-center gap-3 opacity-50"},o.createElement("div",{className:"w-8 h-8 rounded-full bg-dark-surface-hover border border-dark-border flex items-center justify-center flex-shrink-0"},o.createElement("span",{className:"text-xs text-dark-text-muted"},"3")),o.createElement("span",{className:"text-dark-text-secondary"},"yah 3 next...")))),o.createElement("div",{className:"space-y-2 text-sm text-dark-text-secondary"},o.createElement("p",null," Master each yah individually first"),o.createElement("p",null," Then connect them together smoothly"),o.createElement("p",null," Build up to complete passages"),o.createElement("p",null," Strong foundation for long-term retention")))},{title:"Ready to Begin?",description:"Let's start your learning journey",content:o.createElement("div",{className:"space-y-6 text-center"},o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-6 border border-dark-border"},o.createElement("svg",{className:"w-16 h-16 text-accent mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20"},o.createElement("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})),o.createElement("h3",{className:"text-xl font-semibold text-dark-text mb-2"},"You're all set!"),o.createElement("p",{className:"text-dark-text-secondary"},"Take your time, trust the process, and enjoy the journey of memorization.")),o.createElement("div",{className:"space-y-2 text-sm text-dark-text-muted"},o.createElement("p",null," Tip: Find a quiet space and take deep breaths before starting"),o.createElement("p",null," Goal: Master through repetition, not rushing")))}],u=l[s],d=s===l.length-1;return o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},o.createElement("div",{className:"max-w-2xl w-full"},o.createElement("div",{className:"flex justify-center gap-2 mb-8"},l.map(function(e,t){return o.createElement("div",{key:t,className:"h-1.5 rounded-full transition-all duration-300 ".concat(t===s?"w-8 bg-accent":t<s?"w-1.5 bg-accent/50":"w-1.5 bg-dark-border")})})),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-8 border border-dark-border mb-6 min-h-[500px] flex flex-col"},o.createElement("div",{className:"text-center mb-6"},o.createElement("h2",{className:"text-2xl font-semibold text-dark-text mb-2"},u.title),o.createElement("p",{className:"text-dark-text-secondary"},u.description)),o.createElement("div",{className:"flex-1"},u.content)),o.createElement("div",{className:"flex items-center justify-between"},o.createElement("button",{onClick:a,className:"text-dark-text-secondary hover:text-dark-text transition-colors text-sm"},"Skip intro"),o.createElement("div",{className:"flex gap-3"},s>0&&o.createElement("button",{onClick:function(){s>0&&c(function(e){return e-1})},className:"px-6 py-2 text-dark-text-secondary hover:text-dark-text transition-colors"},"Back"),o.createElement("button",{onClick:function(){d?r():c(function(e){return e+1})},className:"btn-primary px-8 py-3"},d?"Start Learning":"Next")))))};function Gv(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Wv(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Wv(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Wv(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,Wv(d,"constructor",l),Wv(l,"constructor",c),c.displayName="GeneratorFunction",Wv(l,a,"GeneratorFunction"),Wv(d),Wv(d,a,"Generator"),Wv(d,r,function(){return this}),Wv(d,"toString",function(){return"[object Generator]"}),(Gv=function(){return{w:i,m:h}})()}function Wv(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Wv=function(e,t,n,r){function i(t,n){Wv(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Wv(e,t,n,r)}function Hv(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Kv(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){Hv(i,r,a,o,s,"next",e)}function s(e){Hv(i,r,a,o,s,"throw",e)}o(void 0)})}}function Qv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yv(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Xv=function(e){e.session;var t=e.onComplete,n=Qv((0,o.useState)(null),2),r=n[0],a=n[1],i=Qv((0,o.useState)([]),2),s=i[0],c=i[1],l=Qv((0,o.useState)(0),2),u=l[0],d=l[1],h=Qv((0,o.useState)(!0),2),f=h[0],p=h[1],m=Qv((0,o.useState)(null),2),g=m[0],y=m[1],v=Qv((0,o.useState)([]),2),b=v[0],w=v[1],x=Qv((0,o.useState)(!0),2),E=x[0],k=x[1],S=Qv((0,o.useState)(!1),2),_=S[0],N=S[1],T=function(){var e=Kv(Gv().m(function e(){var t,n,r,i,o,s;return Gv().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,p(!0),e.n=1,vg.getUserProfile();case 1:if(t=e.v){e.n=2;break}return t={id:"default",userId:vg.getCurrentUserId(),reciter:"Alafasy",tajwidColors:!1,language:"en",baselineMsPerWord:420,hesitationThresholdMs:380,revealMode:"mushaf-progressive",voiceOnsetMinMs:120,maxWordsPerVoicedBlock:2,wordLengthWeight:{},hasCompletedOnboarding:!0,createdAt:Date.now(),updatedAt:Date.now()},e.n=2,vg.createUserProfile(t);case 2:return y(t),e.n=3,vg.getSurahWithAyahs(112);case 3:if((n=e.v)&&0!==n.ayahs.length){e.n=4;break}return console.log("No surah data found, using sample data"),r=[{ayah:1,surahId:112,textUthmani:"   ",textTransliterated:"qul huwa allahu ahad",words:[],meta:{wordCount:4},createdAt:Date.now(),updatedAt:Date.now()},{ayah:2,surahId:112,textUthmani:" ",textTransliterated:"allahu assamad",words:[],meta:{wordCount:2},createdAt:Date.now(),updatedAt:Date.now()}],c(r),a(r[0]),i=tv.tokenizeAyah(r[0].textTransliterated||"",t.baselineMsPerWord),w(i),p(!1),e.a(2);case 4:c(n.ayahs),a(n.ayahs[0]),n.ayahs[0]&&t&&(o=tv.tokenizeAyah(n.ayahs[0].textTransliterated||"",t.baselineMsPerWord),w(o)),p(!1),e.n=6;break;case 5:e.p=5,s=e.v,console.error("Error loading learning ayahs:",s),p(!1);case 6:return e.a(2)}},e,null,[[0,5]])}));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)(function(){T()},[]);var I=function(){if(u<s.length-1){var e=u+1;if(d(e),a(s[e]),s[e]&&g){var n=tv.tokenizeAyah(s[e].textTransliterated||"",g.baselineMsPerWord);w(n)}}else t()},C=function(){var e=Kv(Gv().m(function e(t){return Gv().w(function(e){for(;;)switch(e.n){case 0:console.log("Ayah mastered:",t),I();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Kv(Gv().m(function e(t){return Gv().w(function(e){for(;;)switch(e.n){case 0:console.log("Ayah needs extra practice:",t),I();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return f?o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center"},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"w-8 h-8 border-2 border-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.createElement("p",{className:"text-dark-text-secondary"},"Preparing learning session..."))):E?o.createElement(qv,{onStart:function(){k(!1),N(!0)},onSkip:function(){k(!1),N(!0)}}):_&&r&&g&&b.length>0?o.createElement(Bv,{surah:r.surahId,ayah:r.ayah,ayahText:r.textUthmani||"",textTokens:b,baselineMsPerWord:g.baselineMsPerWord,hesitationThresholdMs:g.hesitationThresholdMs,currentAyahIndex:u,totalAyahs:s.length,onAyahMastered:C,onNeedsExtraPractice:A}):null},Jv=function(e){var t=e.onContinue,n=e.onSkip;return o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center p-6"},o.createElement("div",{className:"max-w-2xl w-full"},o.createElement("div",{className:"text-center mb-8"},o.createElement("div",{className:"w-16 h-16 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-4"},o.createElement("span",{className:"text-dark-text text-2xl font-medium"},"")),o.createElement("h1",{className:"text-3xl font-semibold text-dark-text mb-2"},"Consolidation Day"),o.createElement("p",{className:"text-dark-text-secondary"},"Time to strengthen your foundation before moving forward")),o.createElement("div",{className:"bg-dark-surface rounded-2xl p-6 border border-dark-border mb-6"},o.createElement("h2",{className:"text-xl font-medium text-dark-text mb-4"},"Today's Focus"),o.createElement("div",{className:"space-y-4"},o.createElement("div",{className:"p-4 bg-accent/10 border border-accent/20 rounded-xl"},o.createElement("h3",{className:"font-medium text-dark-text mb-2"},"Consolidation Goals"),o.createElement("ul",{className:"text-sm text-dark-text-secondary space-y-1"},o.createElement("li",null," Master all previously learned yt"),o.createElement("li",null," Eliminate hesitations and mistakes"),o.createElement("li",null," Build confidence through repetition"),o.createElement("li",null," Prepare for smooth progression"))),o.createElement("div",{className:"p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-xl"},o.createElement("h3",{className:"font-medium text-dark-text mb-2"},"Session Structure"),o.createElement("ul",{className:"text-sm text-dark-text-secondary space-y-1"},o.createElement("li",null," Review all weak yt until mastered"),o.createElement("li",null," Practice full surah recitation"),o.createElement("li",null," Focus on flow and connection"),o.createElement("li",null," No new yt today"))))),o.createElement("div",{className:"bg-dark-surface-hover rounded-xl p-4 mb-6"},o.createElement("div",{className:"flex items-center gap-3 mb-3"},o.createElement("div",{className:"w-2 h-2 bg-accent rounded-full"}),o.createElement("span",{className:"text-dark-text font-medium"},"Are you ready?")),o.createElement("div",{className:"text-sm text-dark-text-secondary"},"This session will focus entirely on strengthening what you've already learned. Take your time and focus on quality recitation.")),o.createElement("div",{className:"flex justify-between"},o.createElement("button",{onClick:n,className:"btn-secondary px-6 py-3"},"Skip Introduction"),o.createElement("button",{onClick:t,className:"btn-primary px-8 py-3 text-lg"},"Start Consolidation"))))};function Zv(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return eb(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(eb(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,eb(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,eb(d,"constructor",l),eb(l,"constructor",c),c.displayName="GeneratorFunction",eb(l,a,"GeneratorFunction"),eb(d),eb(d,a,"Generator"),eb(d,r,function(){return this}),eb(d,"toString",function(){return"[object Generator]"}),(Zv=function(){return{w:i,m:h}})()}function eb(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}eb=function(e,t,n,r){function i(t,n){eb(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},eb(e,t,n,r)}function tb(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function nb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rb(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ab=function(){var e=Y(),t=nb((0,o.useState)(null),2),n=t[0],r=t[1],a=nb((0,o.useState)(!0),2),i=a[0],s=a[1],c=nb((0,o.useState)("warmup"),2),l=c[0],u=c[1],d=nb((0,o.useState)([]),2),h=d[0],f=d[1],p=nb((0,o.useState)(!1),2),m=p[0],g=p[1];(0,o.useEffect)(function(){var t=function(){var t,n=(t=Zv().m(function t(){var n,a,i,o;return Zv().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,s(!0),t.n=1,Vy.getCurrentSession();case 1:if(n=t.v){t.n=2;break}return console.log("No active session found, redirecting to dashboard"),e("/today"),t.a(2);case 2:return r(n),t.n=3,vg.getDueCards();case 3:a=t.v,g(a.length>=20),i=a.sort(function(e,t){return e.ease-t.ease}).slice(0,3).map(function(e){return"yah ".concat(e.ayah)}),f(i),m?u("consolidation-warmup"):a.length>0?u("warmup"):u("learn"),t.n=5;break;case 4:t.p=4,o=t.v,console.error("Error initializing session:",o),e("/today");case 5:return t.p=5,s(!1),t.f(5);case 6:return t.a(2)}},t,null,[[0,4,5,6]])}),function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(e){tb(i,r,a,o,s,"next",e)}function s(e){tb(i,r,a,o,s,"throw",e)}o(void 0)})});return function(){return n.apply(this,arguments)}}();t()},[e,m]);var y=function(){e("/today")};return i?o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center"},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"w-8 h-8 border-2 border-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),o.createElement("p",{className:"text-dark-text-secondary"},"Preparing your session..."))):n?o.createElement("div",{className:"min-h-screen bg-dark-bg"},function(){switch(l){case"warmup":return o.createElement(zy,{problemAreas:h,onContinue:function(){return u("learn")},onSkip:function(){return u("learn")}});case"consolidation-warmup":return o.createElement(Jv,{onContinue:function(){return u("learn")},onSkip:function(){return u("learn")}});case"review":return o.createElement(Ky,{session:n,onComplete:function(){return u("learn")},onSessionComplete:y});case"learn":return o.createElement(Xv,{session:n,onComplete:y});default:return null}}()):o.createElement("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center"},o.createElement("div",{className:"text-center"},o.createElement("h1",{className:"text-xl font-semibold text-dark-text mb-2"},"No Active Session"),o.createElement("p",{className:"text-dark-text-secondary mb-4"},"Redirecting to dashboard..."),o.createElement("button",{onClick:function(){return e("/today")},className:"btn-primary"},"Go to Dashboard")))},ib=function(){var e=Y();return o.createElement("div",{className:"min-h-screen p-4"},o.createElement("div",{className:"max-w-2xl mx-auto"},o.createElement("div",{className:"card text-center"},o.createElement("h1",{className:"text-3xl font-bold text-dark-text mb-4"},"Progress"),o.createElement("p",{className:"text-dark-text-secondary mb-6"},"Progress tracking coming soon..."),o.createElement("button",{onClick:function(){return e("/today")},className:"btn-primary"},"Back to Today"))))},ob=function(){var e=Y();return o.createElement("div",{className:"min-h-screen p-4"},o.createElement("div",{className:"max-w-2xl mx-auto"},o.createElement("div",{className:"card"},o.createElement("h1",{className:"text-3xl font-bold text-dark-text mb-6"},"Settings"),o.createElement("div",{className:"space-y-6"},o.createElement("div",null,o.createElement("h3",{className:"text-xl font-semibold mb-3 text-dark-text"},"Preferences"),o.createElement("p",{className:"text-dark-text-secondary"},"Settings coming soon..."))),o.createElement("div",{className:"mt-8"},o.createElement("button",{onClick:function(){return e("/today")},className:"btn-primary"},"Back to Today")))))};function sb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||lb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cb(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=lb(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function lb(e,t){if(e){if("string"==typeof e)return ub(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ub(e,t):void 0}}function ub(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function db(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return hb(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(hb(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,hb(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,hb(d,"constructor",l),hb(l,"constructor",c),c.displayName="GeneratorFunction",hb(l,a,"GeneratorFunction"),hb(d),hb(d,a,"Generator"),hb(d,r,function(){return this}),hb(d,"toString",function(){return"[object Generator]"}),(db=function(){return{w:i,m:h}})()}function hb(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}hb=function(e,t,n,r){function i(t,n){hb(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},hb(e,t,n,r)}function fb(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function pb(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){fb(i,r,a,o,s,"next",e)}function s(e){fb(i,r,a,o,s,"throw",e)}o(void 0)})}}var mb=new Map,gb=new Map;function yb(){return vb.apply(this,arguments)}function vb(){return vb=pb(db().m(function e(){var t,n,r,a,i=arguments;return db().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"madani-15",e.p=1,n=Pf(zm,"mushafLayouts",t),e.n=2,Tp(n);case 2:if((r=e.v).exists()){e.n=3;break}return console.error("Mushaf layout ".concat(t," not found")),e.a(2,null);case 3:return e.a(2,r.data());case 4:return e.p=4,a=e.v,console.error("Error fetching Mushaf layout:",a),e.a(2,null)}},e,null,[[1,4]])})),vb.apply(this,arguments)}function bb(e,t){return wb.apply(this,arguments)}function wb(){return(wb=pb(db().m(function e(t,n){var r,a,i,o,s;return db().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r="".concat(t,":").concat(n),!mb.has(r)){e.n=1;break}return e.a(2,mb.get(r));case 1:return e.p=1,a=Pf(zm,"mushafLayouts",t,"pages",String(n)),e.n=2,Tp(a);case 2:if((i=e.v).exists()){e.n=3;break}return console.error("Page ".concat(n," not found for layout ").concat(t)),e.a(2,null);case 3:return o=i.data(),mb.set(r,o),e.a(2,o);case 4:return e.p=4,s=e.v,console.error("Error fetching page ".concat(n,":"),s),e.a(2,null)}},e,null,[[1,4]])}))).apply(this,arguments)}function xb(e,t,n){return Eb.apply(this,arguments)}function Eb(){return(Eb=pb(db().m(function e(t,n,r){var a,i,o,s,c;return db().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a="".concat(t,":").concat(n,":").concat(r),!gb.has(a)){e.n=1;break}return e.a(2,gb.get(a));case 1:return e.p=1,i=Pf(zm,"ayahToPage",t,String(n),String(r)),e.n=2,Tp(i);case 2:if((o=e.v).exists()){e.n=3;break}return console.error("Mapping not found for ".concat(n,":").concat(r)),e.a(2,null);case 3:return s=o.data(),gb.set(a,s),e.a(2,s);case 4:return e.p=4,c=e.v,console.error("Error fetching page mapping for ".concat(n,":").concat(r,":"),c),e.a(2,null)}},e,null,[[1,4]])}))).apply(this,arguments)}function kb(e,t){return Sb.apply(this,arguments)}function Sb(){return Sb=pb(db().m(function e(t,n){var r,a,i,o,s;return db().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=Af(zm,"surahs",String(t),"ayahs",String(n),"words"),a=dp(r,gp("position","asc")),e.n=1,Cp(a);case 1:if(!(i=e.v).empty){e.n=2;break}return console.warn("No words found for ".concat(t,":").concat(n)),e.a(2,null);case 2:return o=[],i.forEach(function(e){var t=e.data();o.push(t.textArabic||t.text||"")}),e.a(2,o.join(" "));case 3:return e.p=3,s=e.v,console.error("Error fetching words for ".concat(t,":").concat(n,":"),s),e.a(2,null)}},e,null,[[0,3]])})),Sb.apply(this,arguments)}function _b(e){return Nb.apply(this,arguments)}function Nb(){return(Nb=pb(db().m(function e(t){var n,r,a,i,o,s,c,l,u,d;return db().w(function(e){for(;;)switch(e.p=e.n){case 0:n=[],r=cb(t),e.p=1,r.s();case 2:if((a=r.n()).done){e.n=5;break}return i=a.value,o=i.split(":").map(Number),s=sb(o,2),c=s[0],l=s[1],e.n=3,kb(c,l);case 3:(u=e.v)&&n.push(u);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,d=e.v,r.e(d);case 7:return e.p=7,r.f(),e.f(7);case 8:return e.a(2,n.join(" "))}},e,null,[[1,6,7,8]])}))).apply(this,arguments)}function Tb(e,t,n){return Ib.apply(this,arguments)}function Ib(){return(Ib=pb(db().m(function e(t,n,r){var a;return db().w(function(e){for(;;)switch(e.n){case 0:return a=[],n>1&&a.push(n-1),n<r&&a.push(n+1),e.n=1,Promise.all(a.map(function(e){return bb(t,e)}));case 1:return e.a(2)}},e)}))).apply(this,arguments)}function Cb(e){return Ab.apply(this,arguments)}function Ab(){return(Ab=pb(db().m(function e(t){var n,r,a,i;return db().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=Pf(zm,"surahs",String(t)),e.n=1,Tp(n);case 1:if((r=e.v).exists()){e.n=2;break}return console.error("Surah ".concat(t," not found")),e.a(2,null);case 2:return a=r.data(),e.a(2,a.nameAr||a.nameEn||null);case 3:return e.p=3,i=e.v,console.error("Error fetching surah ".concat(t," name:"),i),e.a(2,null)}},e,null,[[0,3]])}))).apply(this,arguments)}function Pb(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return Ob(l,"_invoke",function(n,r,a){var i,s,c,l=0,u=a||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,i=u[t],f=h.p,p=i[2];n>3?(a=p===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((a=n<2&&f<i[1])?(s=0,h.v=r,h.n=i[1]):f<p&&(a=n<3||i[0]>r||r>p)&&(i[4]=n,i[5]=r,h.n=p,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,a,i),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Ob(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ob(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,Ob(d,"constructor",l),Ob(l,"constructor",c),c.displayName="GeneratorFunction",Ob(l,a,"GeneratorFunction"),Ob(d),Ob(d,a,"Generator"),Ob(d,r,function(){return this}),Ob(d,"toString",function(){return"[object Generator]"}),(Pb=function(){return{w:i,m:h}})()}function Ob(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}Ob=function(e,t,n,r){function i(t,n){Ob(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Ob(e,t,n,r)}function Rb(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Db(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){Rb(i,r,a,o,s,"next",e)}function s(e){Rb(i,r,a,o,s,"throw",e)}o(void 0)})}}function Mb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lb(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lb(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const jb=function(e){var t=e.layoutCode,n=void 0===t?"madani-15":t,r=e.startSurahId,a=e.startAyah,i=e.startPage,s=e.onPageChange,c=Mb((0,o.useState)(null),2),l=c[0],u=c[1],d=Mb((0,o.useState)(1),2),h=d[0],f=d[1],p=Mb((0,o.useState)(null),2),m=p[0],g=p[1],y=Mb((0,o.useState)([]),2),v=y[0],b=y[1],w=Mb((0,o.useState)(new Map),2),x=w[0],E=w[1],k=Mb((0,o.useState)(!0),2),S=k[0],_=k[1],N=Mb((0,o.useState)(null),2),T=N[0],I=N[1];(0,o.useEffect)(function(){function e(){return e=Db(Pb().m(function e(){var t,o,s,c,l;return Pb().w(function(e){for(;;)switch(e.p=e.n){case 0:return _(!0),I(null),e.p=1,e.n=2,yb(n);case 2:if(t=e.v){e.n=3;break}return I("Failed to load Mushaf layout"),e.a(2);case 3:if(u(t),o=i||1,i||!r||!a){e.n=5;break}return e.n=4,xb(n,r,a);case 4:(s=e.v)&&(o=s.page),e.n=7;break;case 5:if(i||!r){e.n=7;break}return e.n=6,xb(n,r,1);case 6:(c=e.v)&&(o=c.page);case 7:f(o),e.n=9;break;case 8:e.p=8,l=e.v,console.error("Error initializing MushafViewer:",l),I("Failed to initialize Mushaf viewer");case 9:return e.p=9,_(!1),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()},[n,r,a,i]),(0,o.useEffect)(function(){function e(){return(e=Db(Pb().m(function e(){var t,r,a,i,o,c,u,d,f,p,m,y,v;return Pb().w(function(e){for(;;)switch(e.p=e.n){case 0:if(l){e.n=1;break}return e.a(2);case 1:return _(!0),I(null),e.p=2,e.n=3,bb(n,h);case 3:if(t=e.v){e.n=4;break}return I("Failed to load page ".concat(h)),e.a(2);case 4:g(t),r=[],a=new Map,i=null,o=0;case 5:if(!(o<t.lines.length)){e.n=10;break}if(c=t.lines[o],!((u=c.split(",").filter(function(e){return e.length>0})).length>0)){e.n=7;break}if(d=u[0].split(":").map(Number),f=Mb(d,1),p=f[0],i===p){e.n=7;break}return e.n=6,Cb(p);case 6:(m=e.v)&&a.set(o,m),i=p;case 7:return e.n=8,_b(u);case 8:y=e.v,r.push(y);case 9:o++,e.n=5;break;case 10:b(r),E(a),Tb(n,h,l.totalPages),s&&s(h),e.n=12;break;case 11:e.p=11,v=e.v,console.error("Error loading page:",v),I("Failed to load page content");case 12:return e.p=12,_(!1),e.f(12);case 13:return e.a(2)}},e,null,[[2,11,12,13]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[h,l,n,s]);var C=(0,o.useCallback)(function(){l&&h<l.totalPages&&f(function(e){return e+1})},[h,l]),A=(0,o.useCallback)(function(){h>1&&f(function(e){return e-1})},[h]);(0,o.useCallback)(function(e){l&&e>=1&&e<=l.totalPages&&f(e)},[l]),(0,o.useEffect)(function(){var e=function(e){"ArrowRight"===e.key||"ArrowDown"===e.key?C():"ArrowLeft"!==e.key&&"ArrowUp"!==e.key||A()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[C,A]);var P=Mb((0,o.useState)(null),2),O=P[0],R=P[1],D=Mb((0,o.useState)(null),2),M=D[0],L=D[1];return S&&!m?o.createElement("div",{className:"flex items-center justify-center min-h-screen bg-dark-bg"},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mx-auto mb-4"}),o.createElement("p",{className:"text-dark-text-secondary"},"Loading Mushaf..."))):T?o.createElement("div",{className:"flex items-center justify-center min-h-screen bg-dark-bg"},o.createElement("div",{className:"text-center max-w-md p-6 bg-dark-surface rounded-2xl border border-dark-border"},o.createElement("div",{className:"text-hard mb-4"},o.createElement("svg",{className:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))),o.createElement("h3",{className:"text-lg font-semibold text-dark-text mb-2"},"Error Loading Mushaf"),o.createElement("p",{className:"text-dark-text-secondary"},T),o.createElement("button",{onClick:function(){return window.location.reload()},className:"mt-4 btn-primary"},"Reload Page"))):o.createElement("div",{className:"min-h-screen bg-dark-bg"},o.createElement("div",{className:"sticky top-0 z-20 bg-dark-surface/95 backdrop-blur-sm border-b border-dark-border"},o.createElement("div",{className:"max-w-5xl mx-auto px-4 md:px-6 py-3 flex items-center justify-between"},o.createElement("div",{className:"flex items-center gap-4"},o.createElement("div",{className:"text-dark-text-secondary text-sm"},o.createElement("span",{className:"text-dark-text font-medium"},h),o.createElement("span",{className:"mx-1"},"/"),o.createElement("span",null,(null==l?void 0:l.totalPages)||604))),o.createElement("div",{className:"flex items-center gap-2"},o.createElement("button",{onClick:A,disabled:1===h,className:"p-2 text-dark-text-secondary hover:text-dark-text disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Previous page"},o.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),o.createElement("button",{onClick:C,disabled:!(!l||h!==l.totalPages),className:"p-2 text-dark-text-secondary hover:text-dark-text disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Next page"},o.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})))))),o.createElement("div",{className:"max-w-5xl mx-auto px-4 md:px-6 py-8 md:py-12",onTouchStart:function(e){L(null),R(e.targetTouches[0].clientX)},onTouchMove:function(e){L(e.targetTouches[0].clientX)},onTouchEnd:function(){if(O&&M){var e=O-M,t=e<-50;e>50?C():t&&A()}}},o.createElement("div",{className:"bg-dark-surface rounded-2xl border border-dark-border p-6 md:p-10 relative"},o.createElement("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2"},o.createElement("div",{className:"bg-dark-bg border border-dark-border rounded-full px-4 py-1"},o.createElement("span",{className:"text-xs text-dark-text-secondary font-mono"},h))),o.createElement("div",{className:"space-y-3 md:space-y-4 mt-8"},v.map(function(e,t){var n;return o.createElement(o.Fragment,{key:t},x.has(t)&&o.createElement("div",{className:"my-6 py-4 border-y border-dark-border"},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"flex items-center justify-center gap-3 mb-3"},o.createElement("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-medina-green to-transparent opacity-30"}),o.createElement("svg",{className:"w-5 h-5 text-medina-green opacity-60",fill:"currentColor",viewBox:"0 0 20 20"},o.createElement("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})),o.createElement("div",{className:"h-px flex-1 bg-gradient-to-l from-transparent via-medina-green to-transparent opacity-30"})),o.createElement("h2",{className:"text-lg md:text-xl text-dark-text font-arabic mb-2"},x.get(t)),!(null!==(n=x.get(t))&&void 0!==n&&n.includes(""))&&o.createElement("p",{className:"text-2xl md:text-3xl text-dark-text font-arabic mt-3"},"   "))),o.createElement("div",{className:"text-right"},o.createElement("p",{dir:"rtl",className:"text-2xl md:text-3xl lg:text-4xl leading-loose font-arabic text-dark-text",style:{lineHeight:"2.2",fontWeight:400,letterSpacing:"0.02em"}},e||"...")))})),S&&m&&o.createElement("div",{className:"absolute inset-0 bg-dark-surface/75 backdrop-blur-sm flex items-center justify-center rounded-2xl"},o.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent"}))),o.createElement("div",{className:"mt-6 text-center"},o.createElement("p",{className:"text-xs text-dark-text-muted"},"Use arrow keys or swipe to navigate  Press Esc to go back"))))},Fb=function(){var e=function(){let{matches:e}=o.useContext(G),t=e[e.length-1];return t?t.params:{}}().surahId,t=Y();return(0,o.useEffect)(function(){var e=function(e){"Escape"===e.key&&t("/library")};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[t]),o.createElement("div",{className:"min-h-screen bg-dark-bg"},o.createElement("div",{className:"fixed top-4 left-4 z-30"},o.createElement("button",{onClick:function(){return t("/library")},className:"flex items-center gap-2 px-3 py-2 bg-dark-surface/95 backdrop-blur-sm border border-dark-border rounded-xl hover:bg-dark-surface-hover transition-colors text-dark-text-secondary hover:text-dark-text"},o.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})),o.createElement("span",{className:"text-sm"},"Library"))),o.createElement(jb,{layoutCode:"madani-15",startSurahId:e?parseInt(e):void 0,onPageChange:function(e){}}))};var Ub=a(72),Vb=a.n(Ub),zb=a(825),Bb=a.n(zb),$b=a(659),qb=a.n($b),Gb=a(56),Wb=a.n(Gb),Hb=a(159),Kb=a.n(Hb),Qb=a(113),Yb=a.n(Qb),Xb=a(697),Jb={};function Zb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ew(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ew(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ew(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tw(){var e=Zb((0,o.useState)(!1),2),t=e[0],n=e[1],r=Zb((0,o.useState)(!1),2),a=r[0],i=r[1],s=K();(0,o.useEffect)(function(){Jm.initializeAuth().then(function(){n(!!Jm.getCurrentUser()),i(!0)})},[]);var c=!s.pathname.startsWith("/mushaf")&&!s.pathname.startsWith("/session");return o.createElement("div",{className:"min-h-screen bg-dark-bg text-dark-text"},c&&o.createElement(ag,null),o.createElement("main",{className:"flex-1"},o.createElement(ce,null,o.createElement(oe,{path:"/",element:a?t?o.createElement(Yg,null):o.createElement(Xg,null):o.createElement("div",null)}),o.createElement(oe,{path:"/today",element:o.createElement(Yg,null)}),o.createElement(oe,{path:"/library",element:o.createElement(Sy,null)}),o.createElement(oe,{path:"/session",element:o.createElement(ab,null)}),o.createElement(oe,{path:"/progress",element:o.createElement(ib,null)}),o.createElement(oe,{path:"/settings",element:o.createElement(ob,null)}),o.createElement(oe,{path:"/mushaf/:surahId",element:o.createElement(Fb,null)}))))}Jb.styleTagTransform=Yb(),Jb.setAttributes=Wb(),Jb.insert=qb().bind(null,"head"),Jb.domAPI=Bb(),Jb.insertStyleElement=Kb(),Vb()(Xb.A,Jb),Xb.A&&Xb.A.locals&&Xb.A.locals;const nw=function(){return o.createElement(fe,null,o.createElement(tw,null))};var rw=document.getElementById("root");if(!rw)throw new Error("Root element not found");(0,c.H)(rw).render(o.createElement(nw,null))})();